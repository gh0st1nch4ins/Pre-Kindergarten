!function(modules){function webpackJsonpCallback(data){for(var moduleId,chunkId,chunkIds=data[0],moreModules=data[1],executeModules=data[2],i=0,resolves=[];i<chunkIds.length;i++)chunkId=chunkIds[i],installedChunks[chunkId]&&resolves.push(installedChunks[chunkId][0]),installedChunks[chunkId]=0;for(moduleId in moreModules)Object.prototype.hasOwnProperty.call(moreModules,moduleId)&&(modules[moduleId]=moreModules[moduleId]);for(parentJsonpFunction&&parentJsonpFunction(data);resolves.length;)resolves.shift()();return deferredModules.push.apply(deferredModules,executeModules||[]),checkDeferredModules()}function checkDeferredModules(){for(var result,i=0;i<deferredModules.length;i++){for(var deferredModule=deferredModules[i],fulfilled=!0,j=1;j<deferredModule.length;j++){var depId=deferredModule[j];0!==installedChunks[depId]&&(fulfilled=!1)}fulfilled&&(deferredModules.splice(i--,1),result=__webpack_require__(__webpack_require__.s=deferredModule[0]))}return result}var installedModules={},installedChunks={89:0},deferredModules=[];function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}__webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{configurable:!1,enumerable:!0,get:getter})},__webpack_require__.r=function(exports){Object.defineProperty(exports,"__esModule",{value:!0})},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="/javascripts/build/shared/";var jsonpArray=window.socrataFrontendWebpackJsonp=window.socrataFrontendWebpackJsonp||[],oldJsonpFunction=jsonpArray.push.bind(jsonpArray);jsonpArray.push=webpackJsonpCallback,jsonpArray=jsonpArray.slice();for(var i=0;i<jsonpArray.length;i++)webpackJsonpCallback(jsonpArray[i]);var parentJsonpFunction=oldJsonpFunction;deferredModules.push([1689,0]),checkDeferredModules()}({1668:function(module,exports,__webpack_require__){"use strict";var $,tt,ta,showDialog,fileUploaded,updateButtons;$=jQuery,tt=function(str){return $.t("controls.editors.photo."+str+"_title")},ta=function(str){return $.t("controls.editors.actions."+str)},showDialog=function(editObj){$.uploadDialog().show(editObj.customProperties.baseUrl,function(id){fileUploaded(editObj,id)},function(){editObj.focus()},["jpg","jpeg","gif","pjpeg","bmp","png","tif","tiff"],"Photo"),editObj.focus()},fileUploaded=function(editObj,fileId){editObj._curVal=fileId,updateButtons(editObj),editObj.$dom().trigger("edit_end",[!0])},updateButtons=function(editObj){var $d=editObj.$dom(),$add=$d.find(".add"),$editItems=$d.find(".view, .replace, .remove, img");if(null===editObj._curVal)$add.show(),$editItems.hide();else{$add.hide(),$editItems.show();var url=editObj.customProperties.baseUrl+editObj._curVal;$d.find(".view").attr("href",url),$d.find("img").attr("src",url)}$d.trigger("resize")},$.blistEditor.addEditor("photo",{editorAdded:function(){this._super.apply(this,arguments),this.setFullSize();var editObj=this;updateButtons(this),editObj.$editor().find("a.tableButton").click(function(e){!function(editObj,event){var href=$(event.currentTarget).attr("href"),hashI=href.indexOf("#");if(!(hashI<0))switch(event.preventDefault(),href.slice(hashI+1)){case"add":case"replace":showDialog(editObj);break;case"remove":editObj._curVal=null,updateButtons(editObj),editObj.focus()}}(editObj,e)}).end().find("img").load(function(){!function(editObj){editObj.$dom().trigger("resize")}(editObj)}).end().find(":input").keydown(function(e){!function(editObj,e){$.uploadDialog().isVisible()?27==e.keyCode&&(e.stopPropagation(),$.uploadDialog().close()):32==e.keyCode?showDialog(editObj):46!=e.keyCode&&8!=e.keyCode||(editObj._curVal=null,updateButtons(editObj))}(editObj,e)})},$editor:function(){if(!this._$editor){this.flattenValue(),this._curVal=this.originalValue;var html='<div class="blist-table-editor type-'+this.type.name+'"><div class="buttons"><a class="tableButton add" href="#add" title="'+tt("add")+'">'+ta("add")+'</a><a class="tableButton view" target="blist-viewer" rel="external" title="'+tt("view")+'">'+ta("view")+'</a><a class="tableButton replace" href="#replace" title="'+tt("replace")+'">'+ta("replace")+'</a><a class="tableButton remove" href="#remove" title="'+tt("remove")+'">'+ta("remove")+'</a></div><img /><input class="hiddenTextField" /></div>';this._$editor=$(html)}return this._$editor},currentValue:function(){return this._curVal},finishEdit:function(){this._super(),$.uploadDialog().close()},querySize:function(){var w=1,h=this.$editor().find("a:visible").each(function(i,a){w+=$(a).outerWidth(!0)}).outerHeight(!0);if(null!==this._curVal){var $photo=this.$editor().find("img");w=Math.max(w,$photo.outerWidth(!0)),h=Math.max(h,$photo.outerHeight(!0))}return{width:w,height:h}},focus:function(){this.$dom().find(":input").focus()}})},1669:function(module,exports,__webpack_require__){"use strict";var $,tt,ta,showDialog,idField,fileUploaded,updateButtons;$=jQuery,tt=function(str){return $.t("controls.editors.document."+str+"_title")},ta=function(str){return $.t("controls.editors.actions."+str)},showDialog=function(editObj){$.uploadDialog().show(editObj.customProperties.baseUrl,function(id,name){fileUploaded(editObj,id,name)},function(){editObj.focus()}),editObj.focus()},idField=function(editObj){return"document"==editObj.type.name?"file_id":"id"},fileUploaded=function(editObj,fileId,fileName){editObj._curVal={filename:fileName},editObj._curVal[idField(editObj)]=fileId,updateButtons(editObj),editObj.$dom().trigger("edit_end",[!0])},updateButtons=function(editObj){var $d=editObj.$dom(),$add=$d.find(".add"),$editItems=$d.find(".replace, .remove, .docLink");null===editObj._curVal?($add.show(),$editItems.hide()):($add.hide(),$editItems.show());var v=editObj._curVal;$d.find(".docLink").attr("href",v?editObj.customProperties.baseUrl+v[idField(editObj)]:"").text(v?v.filename:""),$d.trigger("resize")},$.blistEditor.addEditor("document",{editorAdded:function(){this._super.apply(this,arguments);var editObj=this;updateButtons(this),editObj.$editor().find("a.tableButton").click(function(e){!function(editObj,event){event.preventDefault();var href=$(event.currentTarget).attr("href");switch(href.slice(href.indexOf("#")+1)){case"add":case"replace":showDialog(editObj);break;case"remove":editObj._curVal=null,updateButtons(editObj),editObj.focus()}}(editObj,e)}).end().find(":input").keydown(function(e){!function(editObj,e){$.uploadDialog().isVisible()?27==e.keyCode&&(e.stopPropagation(),$.uploadDialog().close()):(32==e.keyCode&&showDialog(editObj),46!=e.keyCode&&8!=e.keyCode||(editObj._curVal=null,updateButtons(editObj)))}(editObj,e)})},$editor:function(){if(!this._$editor){this._curVal=this.originalValue;var html='<div class="blist-table-editor type-'+this.type.name+'"><a class="tableButton add" href="#add" title="'+tt("add")+'">'+ta("add")+'</a><a class="tableButton replace" href="#replace" title="'+tt("replace")+'">'+ta("replace")+'</a><a class="tableButton remove" href="#remove" title="'+tt("remove")+'">'+ta("remove")+'</a><a class="docLink" target="blist-viewer" rel="external"></a><input class="hiddenTextField" /></div>';this._$editor=$(html)}return this._$editor},currentValue:function(){return this._curVal},finishEdit:function(){this._super(),$.uploadDialog().close()},querySize:function(){var w=1;return this.$editor().find("a:visible").each(function(i,a){w+=$(a).outerWidth(!0)}),{width:w}},focus:function(){this.$dom().find(":input").focus()}})},1670:function(module,exports,__webpack_require__){"use strict";var $,tt,ta,showDialog,fileUploaded,updateButtons;$=jQuery,tt=function(str){return $.t("controls.editors.document."+str+"_title")},ta=function(str){return $.t("controls.editors.actions."+str)},showDialog=function(editObj){$.uploadDialog().show(editObj.customProperties.baseUrl,function(id,name){fileUploaded(editObj,id,name)},function(){editObj.focus()}),editObj.focus()},fileUploaded=function(editObj,fileId){editObj._curVal=fileId,editObj._modelView.resyncFileDataForFileIds([fileId]).done(function(fileDataMap){editObj._fileData=fileDataMap[fileId]}).then(function(){updateButtons(editObj),editObj.$dom().trigger("edit_end",[!0])})},updateButtons=function(editObj){var $d=editObj.$dom(),$add=$d.find(".add"),$editItems=$d.find(".replace, .remove");null===editObj._curVal?($add.show(),$editItems.hide()):($add.hide(),$editItems.show()),$d.trigger("resize")},$.blistEditor.addEditor("blob",{editorAdded:function(){this._super.apply(this,arguments),this._fileData=$.deepGet(this.row,"fileData",this.settings.colLookup),this._modelView=this.settings.modelView,this.setFullSize();var editObj=this;updateButtons(this),editObj.$editor().find("a.tableButton").click(function(e){!function(editObj,event){event.preventDefault();var href=$(event.currentTarget).attr("href");switch(href.slice(href.indexOf("#")+1)){case"add":case"replace":showDialog(editObj);break;case"remove":editObj._curVal=null,updateButtons(editObj),editObj.focus()}}(editObj,e)}).end().find("img").load(function(){!function(editObj){editObj.$dom().trigger("resize")}(editObj)}).end().find(":input").keydown(function(e){!function(editObj,e){$.uploadDialog().isVisible()?27==e.keyCode&&(e.stopPropagation(),$.uploadDialog().close()):(32==e.keyCode&&showDialog(editObj),46!=e.keyCode&&8!=e.keyCode||(editObj._curVal=null,updateButtons(editObj)))}(editObj,e)})},$editor:function(){if(!this._$editor){this._curVal=this.originalValue;var html='<div class="blist-table-editor type-'+this.type.name+'"><a class="tableButton add" href="#add" title="'+tt("add")+'">'+ta("add")+'</a><a class="tableButton replace" href="#replace" title="'+tt("replace")+'">'+ta("replace")+'</a><a class="tableButton remove" href="#remove" title="'+tt("remove")+'">'+ta("remove")+'</a><a class="docLink" target="blist-viewer" rel="external"></a><img /><input class="hiddenTextField" /></div>';this._$editor=$(html)}return this._$editor},currentValue:function(){return this._curVal},finishEdit:function(){this._super(),$.uploadDialog().close()},querySize:function(){var w=1;return this.$editor().find("a:visible").each(function(i,a){w+=$(a).outerWidth(!0)}),{width:w}},focus:function(){this.$dom().find(":input").focus()}})},1671:function(module,exports,__webpack_require__){"use strict";!function($){tinymce.ThemeManager.add("blist_dummy",function(){return{init:function(editor){this.editor=editor},renderUI:function(o){var ct=o.targetNode.nextSibling;return{iframeContainer:ct,editorContainer:ct.id,sizeContainer:ct,deltaHeight:0}}}}),tinymce.ThemeManager.urls.blist_dummy=!0;var booleanCommand={query:function(editor,name){return{enabled:editor.getDoc().queryCommandEnabled(name),value:editor.queryCommandState(name)}},fire:function(editor,name){editor.execCommand(name)}},buttonCommand={query:function(editor,name){return{enabled:editor.getDoc().queryCommandEnabled(name)}},fire:function(editor,name){editor.execCommand(name)}},valueCommand={query:function(editor,name){return{enabled:editor.getDoc().queryCommandEnabled(name),value:editor.queryCommandValue(name)}},fire:function(editor,name,value){editor.execCommand(name,!1,value)}},commandMap={bold:{id:"Bold",type:booleanCommand},italic:{id:"Italic",type:booleanCommand},underline:{id:"Underline",type:booleanCommand},strikethrough:{id:"StrikeThrough",type:booleanCommand},cut:{id:"Cut",type:buttonCommand},copy:{id:"Copy",type:buttonCommand},paste:{id:"Paste",type:buttonCommand},undo:{id:"Undo",type:buttonCommand},redo:{id:"Redo",type:buttonCommand},fontFamily:{id:"FontName",type:valueCommand},fontSize:{id:"FontSize",type:valueCommand},color:{id:"ForeColor",type:{query:function(editor,name){var v,p=editor.dom.getParent(editor.selection.getNode(),"span");return p&&(v=p.style.color),{enabled:editor.getDoc().queryCommandEnabled(name),value:v||editor.editorCommands.queryCommandValue(name)}},fire:function(editor,name,value){editor.execCommand(name,!1,value)}}},backgroundColor:{id:"BackColor",type:valueCommand},link:{id:"CreateLink",type:{query:function(editor,name){return{enabled:editor.getDoc().queryCommandEnabled(name),value:$(editor.selection.getNode()).closest("a").attr("href")}},fire:function(editor,name,value){editor.execCommand(name,!1,value)}}},unlink:{id:"UnLink",type:{query:function(editor){return{enabled:$(editor.selection.getNode()).closest("a").length>0}},fire:function(editor,name){editor.execCommand(name)}}},justifyLeft:{id:"JustifyLeft",type:booleanCommand},justifyRight:{id:"JustifyRight",type:booleanCommand},justifyCenter:{id:"JustifyCenter",type:booleanCommand},indent:{id:"Indent",type:buttonCommand},outdent:{id:"Outdent",type:buttonCommand},unorderedList:{id:"InsertUnorderedList",type:booleanCommand},orderedList:{id:"InsertOrderedList",type:booleanCommand}};$.blistEditor.addEditor("html",{editorAdded:function(){this._super.apply(this,arguments),this.setFullSize(),this._editor.render()},$editor:function(){if(!this._editor){this._editor=function(){var $root=$('<div class="blist-table-editor type-html"><textarea class="tinymce"></textarea><div class="blist-rte-container"></div></div>'),textarea=$root.find("textarea")[0];textarea.id="html_"+_.uniqueId(),$root.find(".blist-rte-container")[0].id=textarea.id+"_container";var rte=new tinymce.Editor(textarea.id,{content_element:textarea,theme:"blist_dummy",body_class:"blist-html-document",valid_elements:"@[id|class|style|title|dir<ltr?rtl|lang|xml::lang],a[rel|rev|charset|hreflang|tabindex|accesskey|type|name|href|target|title|class],-strong/b,-em/i,-strike,-u,-s,#p[align],-ol[type|compact],-ul[type|compact],-li,br,img[longdesc|usemap|src|border|alt=|title|hspace|vspace|width|height|align],-sub,-sup,-blockquote,-table[border=0|cellspacing|cellpadding|width|frame|rules|height|align|summary|bgcolor|background|bordercolor],-tr[rowspan|width|height|align|valign|bgcolor|background|bordercolor],tbody,thead,tfoot,#td[colspan|rowspan|width|height|align|valign|bgcolor|background|bordercolor|scope],#th[colspan|rowspan|width|height|align|valign|scope],caption,-div,-span,-code,-pre,-address,-h1,-h2,-h3,-h4,-h5,-h6,hr[size|noshade],-font[face|size|color],-dd,-dl,-dt,cite,abbr,acronym,del[datetime|cite],ins[datetime|cite],param[name|value|_value],map[name],area[shape|coords|href|alt|target],bdo,col[align|char|charoff|span|valign|width],colgroup[align|char|charoff|span|valign|width],dfn,kbd,legend,noscript,q[cite],samp,-small,textarea[cols|rows|disabled|name|readonly],tt,var,-big",add_form_submit_trigger:!1,add_unload_trigger:!1,popup_css:!1,submit_patch:!1,content_css:"/stylesheets/base.css,/styles/merged/html-styles.css",plugins:"safari,style,inlinepopups,paste,directionality,visualchars,nonbreaking,xhtmlxtras"});return rte.$dom=$root,rte}(),this._editorInitDone=!1;var me=this;this._editor.onInit.add(function(){var t=this;_.defer(function(){!function(doc){try{if(doc){for(var css,rulesNode=$(doc).find("head").append('<style type="text/css" id="init-styles"></style>').children("#init-styles")[0],i=0;i<doc.styleSheets.length&&((css=doc.styleSheets[i]).ownerNode||css.owningElement)!=rulesNode;i++);if(css){var rules=css.cssRules||css.rules;for(css.insertRule?(css.insertRule("body {}",rules.length),css.insertRule("p {}",rules.length),css.insertRule("ul {}",rules.length),css.insertRule("ol {}",rules.length)):(css.addRule("body",null,rules.length),css.addRule("p",null,rules.length),css.addRule("ul",null,rules.length),css.addRule("ol",null,rules.length)),rules=css.cssRules||css.rules,i=0;i<rules.length;i++)if("body"==rules[i].selectorText.toLowerCase()){var style=rules[i].style;style.fontSize="12px",style.padding="2px 3px 3px 3px",style.margin="0",style.fontFamily="Arial,sans-serif",style.color="#333333"}else"p"==rules[i].selectorText.toLowerCase()?((style=rules[i].style).fontSize="1em",style.lineHeight="1.4em",style.padding=0,style.margin="0.3em 0"):"ul"==rules[i].selectorText.toLowerCase()?((style=rules[i].style).listStylePosition="inside",style.listStyleType="disc",style.lineHeight="1.4em",style.padding=0,style.margin="0.3em 0"):"ol"==rules[i].selectorText.toLowerCase()&&((style=rules[i].style).listStylePosition="inside",style.listStyleType="decimal",style.lineHeight="1.4em",style.padding=0,style.margin="0.3em 0")}}}catch(e){}}(t.getDoc()),t.setContent(t._initValue),me._editorInitDone=!0,_.isFunction(me.showCallback)&&me.showCallback(),t.focus()})}),this._editor.onNodeChange.add(function(){me.actionStatesChanged()}),this._editor.onKeyDown.add(function(ed,e){if(27==e.keyCode||113==e.keyCode||9==e.keyCode)return me.$dom().trigger("edit_end",[27!=e.keyCode,$.event.fix(e)]),!1})}return null!=this.newValue?(this._value=this.newValue,this.goToEndOnFocus=!0):(this.flattenValue(),this._value=this.originalValue),this._editor._initValue=this._value||"",this._editor.$dom},_val:function(){return this._editor.getContent()||""},finishEdit:function(){this._super(),this._editorInitDone&&(this._value=this._val()),this._editor.remove(),delete this._editor},focus:function(){this._editor.getWin()&&(this._editor.execCommand("selectall"),this._editor.focus(),this.goToEndOnFocus&&(delete this.goToEndOnFocus,this._editor.selection.collapse(!1)))},currentValue:function(){var v;return""===(v=this._editor?this._val():this._value)?null:v},getActionStates:function(){var e=this._editor,rv={};if(e&&e.getDoc())for(var id in commandMap){var command=commandMap[id];rv[id]=command.type.query(e,command.id)}return rv},action:function(name,value){var e=this._editor;if(e){var command=commandMap[name];if(command)return command.type.fire(e,command.id,value)}return!1},initComplete:function(showCallback){this.showCallback=showCallback},querySize:function(){var s=function(value){var ret;if("string"==typeof value){var $mDiv=$('<div><div class="blist-html">'+value+"</div></div>");$mDiv.find("script").remove(),$mDiv.css("position","absolute"),$mDiv.css("top","-10000px"),$mDiv.css("height","auto"),$("body").append($mDiv),ret={width:$mDiv.width()+10,height:$mDiv.height()+5},$mDiv.remove()}return ret}(this._value)||{width:0,height:0};return s.width=Math.max(150,s.width),s.height=Math.max(75,s.height),s},setSize:function(width,height){$(this.getSizeElement()).width(width).height(height),this.$editor().find("iframe").width(width).height(height)},supportsFormatting:function(){return!0}})}(jQuery)},1672:function(module,exports){"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},each,extend,JSON,XHR;!function(win){var whiteSpaceRe=/^\s*|\s*$/g,isRegExpBroken="$1"==="B".replace(/A(.)|B/,"$1"),tinymce={majorVersion:"3",minorVersion:"4.3.1",releaseDate:"2011-06-16",_init:function(){var i,nl,n,base,p,v,t=this,d=document,na=navigator,ua=na.userAgent;if(t.isOpera=win.opera&&opera.buildNumber,t.isWebKit=/WebKit/.test(ua),t.isIE=!t.isWebKit&&!t.isOpera&&/MSIE/gi.test(ua)&&/Explorer/gi.test(na.appName),t.isIE6=t.isIE&&/MSIE [56]/.test(ua),t.isGecko=!t.isWebKit&&/Gecko/.test(ua),t.isMac=-1!=ua.indexOf("Mac"),t.isAir=/adobeair/i.test(ua),t.isIDevice=/(iPad|iPhone)/.test(ua),t.isIOS5=t.isIDevice&&ua.match(/AppleWebKit\/(\d*)/)[1]>=534,win.tinyMCEPreInit)return t.suffix=tinyMCEPreInit.suffix,t.baseURL=tinyMCEPreInit.base,void(t.query=tinyMCEPreInit.query);for(t.suffix="",nl=d.getElementsByTagName("base"),i=0;i<nl.length;i++)(v=nl[i].href)&&(/^https?:\/\/[^\/]+$/.test(v)&&(v+="/"),base=v?v.match(/.*\//)[0]:"");function getBase(n){return n.src&&/tiny_mce(|_gzip|_jquery|_prototype|_full)(_dev|_src)?.js/.test(n.src)?(/_(src|dev)\.js/g.test(n.src)&&(t.suffix="_src"),-1!=(p=n.src.indexOf("?"))&&(t.query=n.src.substring(p+1)),t.baseURL=n.src.substring(0,n.src.lastIndexOf("/")),base&&-1==t.baseURL.indexOf("://")&&0!==t.baseURL.indexOf("/")&&(t.baseURL=base+t.baseURL),t.baseURL):null}for(nl=d.getElementsByTagName("script"),i=0;i<nl.length;i++)if(getBase(nl[i]))return;if(n=d.getElementsByTagName("head")[0])for(nl=n.getElementsByTagName("script"),i=0;i<nl.length;i++)if(getBase(nl[i]))return},is:function(o,t){return t?!!("array"==t&&o.hasOwnProperty&&o instanceof Array)||(void 0===o?"undefined":_typeof(o))==t:void 0!==o},makeMap:function(items,delim,map){var i;for(items=items||[],delim=delim||",","string"==typeof items&&(items=items.split(delim)),map=map||{},i=items.length;i--;)map[items[i]]={};return map},each:function(o,cb,s){var n,l;if(!o)return 0;if(s=s||o,void 0!==o.length){for(n=0,l=o.length;n<l;n++)if(!1===cb.call(s,o[n],n,o))return 0}else for(n in o)if(o.hasOwnProperty(n)&&!1===cb.call(s,o[n],n,o))return 0;return 1},trim:function(s){return(s?""+s:"").replace(whiteSpaceRe,"")},create:function(s,p,root){var sp,ns,cn,scn,c,t=this,de=0;if(s=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(s),cn=s[3].match(/(^|\.)(\w+)$/i)[2],!(ns=t.createNS(s[3].replace(/\.\w+$/,""),root))[cn]){if("static"==s[2])return ns[cn]=p,void(this.onCreate&&this.onCreate(s[2],s[3],ns[cn]));p[cn]||(p[cn]=function(){},de=1),ns[cn]=p[cn],t.extend(ns[cn].prototype,p),s[5]&&(sp=t.resolve(s[5]).prototype,scn=s[5].match(/\.(\w+)$/i)[1],c=ns[cn],ns[cn]=de?function(){return sp[scn].apply(this,arguments)}:function(){return this.parent=sp[scn],c.apply(this,arguments)},ns[cn].prototype[cn]=ns[cn],t.each(sp,function(f,n){ns[cn].prototype[n]=sp[n]}),t.each(p,function(f,n){sp[n]?ns[cn].prototype[n]=function(){return this.parent=sp[n],f.apply(this,arguments)}:n!=cn&&(ns[cn].prototype[n]=f)})),t.each(p.static,function(f,n){ns[cn][n]=f}),this.onCreate&&this.onCreate(s[2],s[3],ns[cn].prototype)}},walk:function(o,f,n,s){s=s||this,o&&(n&&(o=o[n]),tinymce.each(o,function(o,i){if(!1===f.call(s,o,i,n))return!1;tinymce.walk(o,f,n,s)}))},createNS:function(n,o){var i,v;for(o=o||win,n=n.split("."),i=0;i<n.length;i++)o[v=n[i]]||(o[v]={}),o=o[v];return o},resolve:function(n,o){var i,l;for(o=o||win,i=0,l=(n=n.split(".")).length;i<l&&(o=o[n[i]]);i++);return o},addUnload:function(f,s){var t=this;if(f={func:f,scope:s||this},t.unloads)t.unloads.push(f);else{var _unload=function(){var o,n,li=t.unloads;if(li){for(n in li)(o=li[n])&&o.func&&o.func.call(o.scope,1);win.detachEvent?(win.detachEvent("onbeforeunload",fakeUnload),win.detachEvent("onunload",_unload)):win.removeEventListener&&win.removeEventListener("unload",_unload,!1),t.unloads=o=li=w=_unload=0,win.CollectGarbage&&CollectGarbage()}},fakeUnload=function(){var d=document;if("interactive"==d.readyState){var _stop=function _stop(){d.detachEvent("onstop",_stop),_unload&&_unload(),d=0};d&&d.attachEvent("onstop",_stop),win.setTimeout(function(){d&&d.detachEvent("onstop",_stop)},0)}};win.attachEvent?(win.attachEvent("onunload",_unload),win.attachEvent("onbeforeunload",fakeUnload)):win.addEventListener&&win.addEventListener("unload",_unload,!1),t.unloads=[f]}return f},removeUnload:function(f){var u=this.unloads,r=null;return tinymce.each(u,function(o,i){if(o&&o.func==f)return u.splice(i,1),r=f,!1}),r},explode:function(s,d){return s?tinymce.map(s.split(d||","),tinymce.trim):s},_addVer:function(u){var v;return this.query?(v=(-1==u.indexOf("?")?"?":"&")+this.query,-1==u.indexOf("#")?u+v:u.replace("#",v+"#")):u},_replace:function(find,replace,str){return isRegExpBroken?str.replace(find,function(){var i,val=replace,args=arguments;for(i=0;i<args.length-2;i++)val=void 0===args[i]?val.replace(new RegExp("\\$"+i,"g"),""):val.replace(new RegExp("\\$"+i,"g"),args[i]);return val}):str.replace(find,replace)}};tinymce._init(),win.tinymce=win.tinyMCE=tinymce}(window),function($,tinymce){tinymce.is;var undefined,attrRegExp=/^(href|src|style)$/i;if(!$&&window.console)return console.log("Load jQuery first!");tinymce.$=$,tinymce.adapter={patchEditor:function(editor){var fn=$.fn;function css(name,value){return value&&this.removeAttr("data-mce-style"),fn.css.apply(this,arguments)}function attr(name,value){return attrRegExp.test(name)?value!==undefined?(this.each(function(i,node){editor.dom.setAttrib(node,name,value)}),this):this.attr("data-mce-"+name):fn.attr.apply(this,arguments)}function htmlPatchFunc(func){return function(content){return content&&(content=editor.dom.processHTML(content)),func.call(this,content)}}editor.$=function(selector,scope){var doc=editor.getDoc();return function patch(jq){return jq.css!==css&&(jq.css=css,jq.attr=attr,jq.html=htmlPatchFunc(fn.html),jq.append=htmlPatchFunc(fn.append),jq.prepend=htmlPatchFunc(fn.prepend),jq.after=htmlPatchFunc(fn.after),jq.before=htmlPatchFunc(fn.before),jq.replaceWith=htmlPatchFunc(fn.replaceWith),jq.tinymce=editor,jq.pushStack=function(){return patch(fn.pushStack.apply(this,arguments))}),jq}($(selector||doc,doc||scope))}}},tinymce.extend=$.extend,tinymce.extend(tinymce,{map:$.map,grep:function(a,f){return $.grep(a,f||function(){return 1})},inArray:function(a,v){return $.inArray(v,a||[])}});var patches={"tinymce.dom.DOMUtils":{select:function(pattern,scope){var t=this;return $.find(pattern,t.get(scope)||t.get(t.settings.root_element)||t.doc,[])},is:function(n,patt){return $(this.get(n)).is(patt)}}};tinymce.onCreate=function(ty,c,p){tinymce.extend(p,patches[c])}}(window.jQuery,tinymce),tinymce.create("tinymce.util.Dispatcher",{scope:null,listeners:null,Dispatcher:function(s){this.scope=s||this,this.listeners=[]},add:function(cb,s){return this.listeners.push({cb:cb,scope:s||this.scope}),cb},addToTop:function(cb,s){return this.listeners.unshift({cb:cb,scope:s||this.scope}),cb},remove:function(cb){var l=this.listeners,o=null;return tinymce.each(l,function(c,i){if(cb==c.cb)return o=cb,l.splice(i,1),!1}),o},dispatch:function(){var s,i,c,a=arguments,li=this.listeners;for(i=0;i<li.length&&!1!==(s=(c=li[i]).cb.apply(c.scope,a));i++);return s}}),each=tinymce.each,tinymce.create("tinymce.util.URI",{URI:function(u,s){var b,base_url,t=this;u=tinymce.trim(u),s=t.settings=s||{},/^(mailto|tel|news|javascript|about|data):/i.test(u)||/^\s*#/.test(u)?t.source=u:(0===u.indexOf("/")&&0!==u.indexOf("//")&&(u=(s.base_uri&&s.base_uri.protocol||"http")+"://mce_host"+u),/^[\w-]*:?\/\//.test(u)||(base_url=s.base_uri?s.base_uri.path:new tinymce.util.URI(location.href).directory,u=(s.base_uri&&s.base_uri.protocol||"http")+"://mce_host"+t.toAbsPath(base_url,u)),u=u.replace(/@@/g,"(mce_at)"),u=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(u),each(["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],function(v,i){var s=u[i];s&&(s=s.replace(/\(mce_at\)/g,"@@")),t[v]=s}),(b=s.base_uri)&&(t.protocol||(t.protocol=b.protocol),t.userInfo||(t.userInfo=b.userInfo),t.port||"mce_host"!=t.host||(t.port=b.port),t.host&&"mce_host"!=t.host||(t.host=b.host),t.source=""))},setPath:function(p){var t=this;p=/^(.*?)\/?(\w+)?$/.exec(p),t.path=p[0],t.directory=p[1],t.file=p[2],t.source="",t.getURI()},toRelative:function(u){var o,t=this;return"./"===u?u:"mce_host"!=(u=new tinymce.util.URI(u,{base_uri:t})).host&&t.host!=u.host&&u.host||t.port!=u.port||t.protocol!=u.protocol?u.getURI():(o=t.toRelPath(t.path,u.path),u.query&&(o+="?"+u.query),u.anchor&&(o+="#"+u.anchor),o)},toAbsolute:function(u,nh){return(u=new tinymce.util.URI(u,{base_uri:this})).getURI(this.host==u.host&&this.protocol==u.protocol?nh:0)},toRelPath:function(base,path){var items,i,l,bp=0,out="";if(base=(base=base.substring(0,base.lastIndexOf("/"))).split("/"),items=path.split("/"),base.length>=items.length)for(i=0,l=base.length;i<l;i++)if(i>=items.length||base[i]!=items[i]){bp=i+1;break}if(base.length<items.length)for(i=0,l=items.length;i<l;i++)if(i>=base.length||base[i]!=items[i]){bp=i+1;break}if(1==bp)return path;for(i=0,l=base.length-(bp-1);i<l;i++)out+="../";for(i=bp-1,l=items.length;i<l;i++)out+=i!=bp-1?"/"+items[i]:items[i];return out},toAbsPath:function(base,path){var i,tr,outPath,nb=0,o=[];for(tr=/\/$/.test(path)?"/":"",base=base.split("/"),path=path.split("/"),each(base,function(k){k&&o.push(k)}),base=o,i=path.length-1,o=[];i>=0;i--)0!=path[i].length&&"."!=path[i]&&(".."!=path[i]?nb>0?nb--:o.push(path[i]):nb++);return 0!==(outPath=(i=base.length-nb)<=0?o.reverse().join("/"):base.slice(0,i).join("/")+"/"+o.reverse().join("/")).indexOf("/")&&(outPath="/"+outPath),tr&&outPath.lastIndexOf("/")!==outPath.length-1&&(outPath+=tr),outPath},getURI:function(nh){var s,t=this;return t.source&&!nh||(s="",nh||(t.protocol&&(s+=t.protocol+"://"),t.userInfo&&(s+=t.userInfo+"@"),t.host&&(s+=t.host),t.port&&(s+=":"+t.port)),t.path&&(s+=t.path),t.query&&(s+="?"+t.query),t.anchor&&(s+="#"+t.anchor),t.source=s),t.source}}),function(){var each=tinymce.each;tinymce.create("static tinymce.util.Cookie",{getHash:function(n){var h,v=this.get(n);return v&&each(v.split("&"),function(v){v=v.split("="),(h=h||{})[unescape(v[0])]=unescape(v[1])}),h},setHash:function(n,v,e,p,d,s){var o="";each(v,function(v,k){o+=(o?"&":"")+escape(k)+"="+escape(v)}),this.set(n,o,e,p,d,s)},get:function(n){var e,b,c=document.cookie,p=n+"=";if(c){if(-1==(b=c.indexOf("; "+p))){if(0!=(b=c.indexOf(p)))return null}else b+=2;return-1==(e=c.indexOf(";",b))&&(e=c.length),unescape(c.substring(b+p.length,e))}},set:function(n,v,e,p,d,s){document.cookie=n+"="+escape(v)+(e?"; expires="+e.toGMTString():"")+(p?"; path="+escape(p):"")+(d?"; domain="+d:"")+(s?"; secure":"")},remove:function(n,p){var d=new Date;d.setTime(d.getTime()-1e3),this.set(n,"",d,p,d)}})}(),function(){function serialize(o,quote){var i,v,t;if(quote=quote||'"',null==o)return"null";if("string"==(t=void 0===o?"undefined":_typeof(o)))return v="\bb\tt\nn\ff\rr\"\"''\\\\",quote+o.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(a,b){return'"'===quote&&"'"===a?a:(i=v.indexOf(b))+1?"\\"+v.charAt(i+1):(a=b.charCodeAt().toString(16),"\\u"+"0000".substring(a.length)+a)})+quote;if("object"==t){if(o.hasOwnProperty&&o instanceof Array){for(i=0,v="[";i<o.length;i++)v+=(i>0?",":"")+serialize(o[i],quote);return v+"]"}for(i in v="{",o)v+="function"!=typeof o[i]?(v.length>1?","+quote:quote)+i+quote+":"+serialize(o[i],quote):"";return v+"}"}return""+o}tinymce.util.JSON={serialize:serialize,parse:function parse(s){try{return eval("("+s+")")}catch(ex){}}}}(),tinymce.create("static tinymce.util.XHR",{send:function(o){var x,w=window,c=0;function get(s){x=0;try{x=new ActiveXObject(s)}catch(ex){}return x}if(o.scope=o.scope||this,o.success_scope=o.success_scope||o.scope,o.error_scope=o.error_scope||o.scope,o.async=!1!==o.async,o.data=o.data||"",x=w.XMLHttpRequest?new XMLHttpRequest:get("Microsoft.XMLHTTP")||get("Msxml2.XMLHTTP")){var ready=function ready(){!o.async||4==x.readyState||c++>1e4?(o.success&&c<1e4&&200==x.status?o.success.call(o.success_scope,""+x.responseText,x,o):o.error&&o.error.call(o.error_scope,c>1e4?"TIMED_OUT":"GENERAL",x,o),x=null):w.setTimeout(ready,10)};if(x.overrideMimeType&&x.overrideMimeType(o.content_type),x.open(o.type||(o.data?"POST":"GET"),o.url,o.async),o.content_type&&x.setRequestHeader("Content-Type",o.content_type),x.setRequestHeader("X-Requested-With","XMLHttpRequest"),x.send(o.data),!o.async)return ready();w.setTimeout(ready,10)}}}),extend=tinymce.extend,JSON=tinymce.util.JSON,XHR=tinymce.util.XHR,tinymce.create("tinymce.util.JSONRequest",{JSONRequest:function(s){this.settings=extend({},s),this.count=0},send:function(o){var ecb=o.error,scb=o.success;(o=extend(this.settings,o)).success=function(c,x){void 0===(c=JSON.parse(c))&&(c={error:"JSON Parse error."}),c.error?ecb.call(o.error_scope||o.scope,c.error,x):scb.call(o.success_scope||o.scope,c.result)},o.error=function(ty,x){ecb&&ecb.call(o.error_scope||o.scope,ty,x)},o.data=JSON.serialize({id:o.id||"c"+this.count++,method:o.method,params:o.params}),o.content_type="application/json",XHR.send(o)},static:{sendRPC:function(o){return(new tinymce.util.JSONRequest).send(o)}}}),function(tinymce){var namedEntities,baseEntities,reverseEntities,attrsCharsRegExp=/[&<>\"\u007E-\uD7FF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,textCharsRegExp=/[<>&\u007E-\uD7FF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,rawCharsRegExp=/[<>&\"\']/g,entityRegExp=/&(#x|#)?([\w]+);/g,asciiMap={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"};function buildEntitiesLookup(items,radix){var i,chr,entity,lookup={};if(items){for(items=items.split(","),radix=radix||10,i=0;i<items.length;i+=2)chr=String.fromCharCode(parseInt(items[i],radix)),baseEntities[chr]||(entity="&"+items[i+1]+";",lookup[chr]=entity,lookup[entity]=chr);return lookup}}baseEntities={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;"},reverseEntities={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},namedEntities=buildEntitiesLookup("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),tinymce.html=tinymce.html||{},tinymce.html.Entities={encodeRaw:function(text,attr){return text.replace(attr?attrsCharsRegExp:textCharsRegExp,function(chr){return baseEntities[chr]||chr})},encodeAllRaw:function(text){return(""+text).replace(rawCharsRegExp,function(chr){return baseEntities[chr]||chr})},encodeNumeric:function(text,attr){return text.replace(attr?attrsCharsRegExp:textCharsRegExp,function(chr){return chr.length>1?"&#"+(1024*(chr.charCodeAt(0)-55296)+(chr.charCodeAt(1)-56320)+65536)+";":baseEntities[chr]||"&#"+chr.charCodeAt(0)+";"})},encodeNamed:function(text,attr,entities){return entities=entities||namedEntities,text.replace(attr?attrsCharsRegExp:textCharsRegExp,function(chr){return baseEntities[chr]||entities[chr]||chr})},getEncodeFunc:function(name,entities){var Entities=tinymce.html.Entities;return entities=buildEntitiesLookup(entities)||namedEntities,(name=tinymce.makeMap(name.replace(/\+/g,","))).named&&name.numeric?function(text,attr){return text.replace(attr?attrsCharsRegExp:textCharsRegExp,function(chr){return baseEntities[chr]||entities[chr]||"&#"+chr.charCodeAt(0)+";"||chr})}:name.named?entities?function(text,attr){return Entities.encodeNamed(text,attr,entities)}:Entities.encodeNamed:name.numeric?Entities.encodeNumeric:Entities.encodeRaw},decode:function(text){return text.replace(entityRegExp,function(all,numeric,value){return numeric?(value=parseInt(value,2===numeric.length?16:10))>65535?(value-=65536,String.fromCharCode(55296+(value>>10),56320+(1023&value))):asciiMap[value]||String.fromCharCode(value):reverseEntities[all]||namedEntities[all]||(text=all,(elm=document.createElement("div")).innerHTML=text,elm.textContent||elm.innerText||text);var text,elm})}}}(tinymce),tinymce.html.Styles=function(settings,schema){var undef,i,encodingItems,rgbRegExp=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,urlOrStrRegExp=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,styleRegExp=/\s*([^:]+):\s*([^;]+);?/g,trimRightRegExp=/\s+$/,encodingLookup={};for(settings=settings||{},encodingItems="\\\" \\' \\; \\: ; : \ufeff".split(" "),i=0;i<encodingItems.length;i++)encodingLookup[encodingItems[i]]="\ufeff"+i,encodingLookup["\ufeff"+i]=encodingItems[i];function _toHex(match,r,g,b){function hex(val){return(val=parseInt(val).toString(16)).length>1?val:"0"+val}return"#"+hex(r)+hex(g)+hex(b)}return{toHex:function(color){return color.replace(rgbRegExp,_toHex)},parse:function(css){var matches,name,value,isEncoded,target,a,b,c,styles={},urlConverter=settings.url_converter,urlConverterScope=settings.url_converter_scope||this;function compress(prefix,suffix){var top,right,bottom,left;(top=styles[prefix+"-top"+suffix])&&top==(right=styles[prefix+"-right"+suffix])&&right==(bottom=styles[prefix+"-bottom"+suffix])&&bottom==(left=styles[prefix+"-left"+suffix])&&(styles[prefix+suffix]=left,delete styles[prefix+"-top"+suffix],delete styles[prefix+"-right"+suffix],delete styles[prefix+"-bottom"+suffix],delete styles[prefix+"-left"+suffix])}function canCompress(key){var i,value=styles[key];if(value&&!(value.indexOf(" ")<0)){for(i=(value=value.split(" ")).length;i--;)if(value[i]!==value[0])return!1;return styles[key]=value[0],!0}}function encode(str){return isEncoded=!0,encodingLookup[str]}function decode(str,keep_slashes){return isEncoded&&(str=str.replace(/\uFEFF[0-9]/g,function(str){return encodingLookup[str]})),keep_slashes||(str=str.replace(/\\([\'\";:])/g,"$1")),str}if(css){for(css=css.replace(/\\[\"\';:\uFEFF]/g,encode).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(str){return str.replace(/[;:]/g,encode)});matches=styleRegExp.exec(css);)name=matches[1].replace(trimRightRegExp,"").toLowerCase(),value=matches[2].replace(trimRightRegExp,""),name&&value.length>0&&("font-weight"===name&&"700"===value?value="bold":"color"!==name&&"background-color"!==name||(value=value.toLowerCase()),value=(value=value.replace(rgbRegExp,_toHex)).replace(urlOrStrRegExp,function(match,url,url2,url3,str,str2){return(str=str||str2)?"'"+(str=decode(str)).replace(/\'/g,"\\'")+"'":(url=decode(url||url2||url3),urlConverter&&(url=urlConverter.call(urlConverterScope,url,"style")),"url('"+url.replace(/\'/g,"\\'")+"')")}),styles[name]=isEncoded?decode(value,!0):value),styleRegExp.lastIndex=matches.index+matches[0].length;compress("border",""),compress("border","-width"),compress("border","-color"),compress("border","-style"),compress("padding",""),compress("margin",""),target="border",b="border-style",c="border-color",canCompress(a="border-width")&&canCompress(b)&&canCompress(c)&&(styles[target]=styles[a]+" "+styles[b]+" "+styles[c],delete styles[a],delete styles[b],delete styles[c]),"medium none"===styles.border&&delete styles.border}return styles},serialize:function(styles,element_name){var name,value,css="";function serializeStyles(name){var styleList,i,l,value;if(styleList=schema.styles[name])for(i=0,l=styleList.length;i<l;i++)name=styleList[i],(value=styles[name])!==undef&&value.length>0&&(css+=(css.length>0?" ":"")+name+": "+value+";")}if(element_name&&schema&&schema.styles)serializeStyles("*"),serializeStyles(element_name);else for(name in styles)(value=styles[name])!==undef&&value.length>0&&(css+=(css.length>0?" ":"")+name+": "+value+";");return css}}},function(tinymce){var boolAttrMap,blockElementsMap,shortEndedElementsMap,nonEmptyElementsMap,whiteSpaceElementsMap,selfClosingElementsMap,transitional={},customElementsMap={},makeMap=tinymce.makeMap,each=tinymce.each;function split(str,delim){return str.split(delim||",")}blockElementsMap=makeMap(blockElementsMap="h1,h2,h3,h4,h5,h6,hr,p,div,address,pre,form,table,tbody,thead,tfoot,th,tr,td,li,ol,ul,caption,blockquote,center,dl,dt,dd,dir,fieldset,noscript,menu,isindex,samp,header,footer,article,section,hgroup",",",makeMap(blockElementsMap.toUpperCase())),transitional=function(lookup,data){var key,elements={};function replace(value){return value.replace(/[A-Z]+/g,function(key){return replace(lookup[key])})}for(key in lookup)lookup.hasOwnProperty(key)&&(lookup[key]=replace(lookup[key]));return replace(data).replace(/#/g,"#text").replace(/(\w+)\[([^\]]+)\]\[([^\]]*)\]/g,function(str,name,attributes,children){attributes=split(attributes,"|"),elements[name]={attributes:makeMap(attributes),attributesOrder:attributes,children:makeMap(children,"|",{"#comment":{}})}}),elements}({Z:"H|K|N|O|P",Y:"X|form|R|Q",ZG:"E|span|width|align|char|charoff|valign",X:"p|T|div|U|W|isindex|fieldset|table",ZF:"E|align|char|charoff|valign",W:"pre|hr|blockquote|address|center|noframes",ZE:"abbr|axis|headers|scope|rowspan|colspan|align|char|charoff|valign|nowrap|bgcolor|width|height",ZD:"[E][S]",U:"ul|ol|dl|menu|dir",ZC:"p|Y|div|U|W|table|br|span|bdo|object|applet|img|map|K|N|Q",T:"h1|h2|h3|h4|h5|h6",ZB:"X|S|Q",S:"R|P",ZA:"a|G|J|M|O|P",R:"a|H|K|N|O",Q:"noscript|P",P:"ins|del|script",O:"input|select|textarea|label|button",N:"M|L",M:"em|strong|dfn|code|q|samp|kbd|var|cite|abbr|acronym",L:"sub|sup",K:"J|I",J:"tt|i|b|u|s|strike",I:"big|small|font|basefont",H:"G|F",G:"br|span|bdo",F:"object|applet|img|map|iframe",E:"A|B|C",D:"accesskey|tabindex|onfocus|onblur",C:"onclick|ondblclick|onmousedown|onmouseup|onmouseover|onmousemove|onmouseout|onkeypress|onkeydown|onkeyup",B:"lang|xml:lang|dir",A:"id|class|style|title"},"script[id|charset|type|language|src|defer|xml:space][]style[B|id|type|media|title|xml:space][]object[E|declare|classid|codebase|data|type|codetype|archive|standby|width|height|usemap|name|tabindex|align|border|hspace|vspace][#|param|Y]param[id|name|value|valuetype|type][]p[E|align][#|S]a[E|D|charset|type|name|href|hreflang|rel|rev|shape|coords|target][#|Z]br[A|clear][]span[E][#|S]bdo[A|C|B][#|S]applet[A|codebase|archive|code|object|alt|name|width|height|align|hspace|vspace][#|param|Y]h1[E|align][#|S]img[E|src|alt|name|longdesc|width|height|usemap|ismap|align|border|hspace|vspace][]map[B|C|A|name][X|form|Q|area]h2[E|align][#|S]iframe[A|longdesc|name|src|frameborder|marginwidth|marginheight|scrolling|align|width|height][#|Y]h3[E|align][#|S]tt[E][#|S]i[E][#|S]b[E][#|S]u[E][#|S]s[E][#|S]strike[E][#|S]big[E][#|S]small[E][#|S]font[A|B|size|color|face][#|S]basefont[id|size|color|face][]em[E][#|S]strong[E][#|S]dfn[E][#|S]code[E][#|S]q[E|cite][#|S]samp[E][#|S]kbd[E][#|S]var[E][#|S]cite[E][#|S]abbr[E][#|S]acronym[E][#|S]sub[E][#|S]sup[E][#|S]input[E|D|type|name|value|checked|disabled|readonly|size|maxlength|src|alt|usemap|onselect|onchange|accept|align][]select[E|name|size|multiple|disabled|tabindex|onfocus|onblur|onchange][optgroup|option]optgroup[E|disabled|label][option]option[E|selected|disabled|label|value][]textarea[E|D|name|rows|cols|disabled|readonly|onselect|onchange][]label[E|for|accesskey|onfocus|onblur][#|S]button[E|D|name|value|type|disabled][#|p|T|div|U|W|table|G|object|applet|img|map|K|N|Q]h4[E|align][#|S]ins[E|cite|datetime][#|Y]h5[E|align][#|S]del[E|cite|datetime][#|Y]h6[E|align][#|S]div[E|align][#|Y]ul[E|type|compact][li]li[E|type|value][#|Y]ol[E|type|compact|start][li]dl[E|compact][dt|dd]dt[E][#|S]dd[E][#|Y]menu[E|compact][li]dir[E|compact][li]pre[E|width|xml:space][#|ZA]hr[E|align|noshade|size|width][]blockquote[E|cite][#|Y]address[E][#|S|p]center[E][#|Y]noframes[E][#|Y]isindex[A|B|prompt][]fieldset[E][#|legend|Y]legend[E|accesskey|align][#|S]table[E|summary|width|border|frame|rules|cellspacing|cellpadding|align|bgcolor][caption|col|colgroup|thead|tfoot|tbody|tr]caption[E|align][#|S]col[ZG][]colgroup[ZG][col]thead[ZF][tr]tr[ZF|bgcolor][th|td]th[E|ZE][#|Y]form[E|action|method|name|enctype|onsubmit|onreset|accept|accept-charset|target][#|X|R|Q]noscript[E][#|Y]td[E|ZE][#|Y]tfoot[ZF][tr]tbody[ZF][tr]area[E|D|shape|coords|href|nohref|alt|target][]base[id|href|target][]body[E|onload|onunload|background|bgcolor|text|link|vlink|alink][#|Y]"),boolAttrMap=makeMap("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected,preload,autoplay,loop,controls"),shortEndedElementsMap=makeMap("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed,source"),nonEmptyElementsMap=tinymce.extend(makeMap("td,th,iframe,video,object"),shortEndedElementsMap),whiteSpaceElementsMap=makeMap("pre,script,style"),selfClosingElementsMap=makeMap("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr"),tinymce.html.Schema=function(settings){var validStyles,elements={},children={},patternElements=[];function patternToRegExp(str){return new RegExp("^"+str.replace(/([?+*])/g,".$1")+"$")}function addValidElements(valid_elements){var ei,el,ai,al,matches,element,attr,attrData,elementName,attrName,attrType,attributes,attributesOrder,prefix,outputName,globalAttributes,globalAttributesOrder,key,value,elementRuleRegExp=/^([#+-])?([^\[\/]+)(?:\/([^\[]+))?(?:\[([^\]]+)\])?$/,attrRuleRegExp=/^([!\-])?(\w+::\w+|[^=:<]+)?(?:([=:<])(.*))?$/,hasPatternsRegExp=/[*?+]/;if(valid_elements)for(valid_elements=split(valid_elements),elements["@"]&&(globalAttributes=elements["@"].attributes,globalAttributesOrder=elements["@"].attributesOrder),ei=0,el=valid_elements.length;ei<el;ei++)if(matches=elementRuleRegExp.exec(valid_elements[ei])){if(prefix=matches[1],elementName=matches[2],outputName=matches[3],attrData=matches[4],element={attributes:attributes={},attributesOrder:attributesOrder=[]},"#"===prefix&&(element.paddEmpty=!0),"-"===prefix&&(element.removeEmpty=!0),globalAttributes){for(key in globalAttributes)attributes[key]=globalAttributes[key];attributesOrder.push.apply(attributesOrder,globalAttributesOrder)}if(attrData)for(ai=0,al=(attrData=split(attrData,"|")).length;ai<al;ai++)if(matches=attrRuleRegExp.exec(attrData[ai])){if(attr={},attrType=matches[1],attrName=matches[2].replace(/::/g,":"),prefix=matches[3],value=matches[4],"!"===attrType&&(element.attributesRequired=element.attributesRequired||[],element.attributesRequired.push(attrName),attr.required=!0),"-"===attrType){delete attributes[attrName],attributesOrder.splice(tinymce.inArray(attributesOrder,attrName),1);continue}prefix&&("="===prefix&&(element.attributesDefault=element.attributesDefault||[],element.attributesDefault.push({name:attrName,value:value}),attr.defaultValue=value),":"===prefix&&(element.attributesForced=element.attributesForced||[],element.attributesForced.push({name:attrName,value:value}),attr.forcedValue=value),"<"===prefix&&(attr.validValues=makeMap(value,"?"))),hasPatternsRegExp.test(attrName)?(element.attributePatterns=element.attributePatterns||[],attr.pattern=patternToRegExp(attrName),element.attributePatterns.push(attr)):(attributes[attrName]||attributesOrder.push(attrName),attributes[attrName]=attr)}globalAttributes||"@"!=elementName||(globalAttributes=attributes,globalAttributesOrder=attributesOrder),outputName&&(element.outputName=elementName,elements[outputName]=element),hasPatternsRegExp.test(elementName)?(element.pattern=patternToRegExp(elementName),patternElements.push(element)):elements[elementName]=element}}function setValidElements(valid_elements){elements={},patternElements=[],addValidElements(valid_elements),each(transitional,function(element,name){children[name]=element.children})}function addCustomElements(custom_elements){var customElementRegExp=/^(~)?(.+)$/;custom_elements&&each(split(custom_elements),function(rule){var matches=customElementRegExp.exec(rule),inline="~"===matches[1],cloneName=inline?"span":"div",name=matches[2];children[name]=children[cloneName],customElementsMap[name]=cloneName,inline||(blockElementsMap[name]={}),each(children,function(element,child){element[cloneName]&&(element[name]=element[cloneName])})})}function addValidChildren(valid_children){var childRuleRegExp=/^([+\-]?)(\w+)\[([^\]]+)\]$/;valid_children&&each(split(valid_children),function(rule){var parent,prefix,matches=childRuleRegExp.exec(rule);matches&&(prefix=matches[1],parent=prefix?children[matches[2]]:children[matches[2]]={"#comment":{}},parent=children[matches[2]],each(split(matches[3],"|"),function(child){"-"===prefix?delete parent[child]:parent[child]={}}))})}!1===(settings=settings||{}).verify_html&&(settings.valid_elements="*[*]"),settings.valid_styles&&(validStyles={},each(settings.valid_styles,function(value,key){validStyles[key]=tinymce.explode(value)})),settings.valid_elements?setValidElements(settings.valid_elements):(each(transitional,function(element,name){elements[name]={attributes:element.attributes,attributesOrder:element.attributesOrder},children[name]=element.children}),each(split("strong/b,em/i"),function(item){item=split(item,"/"),elements[item[1]].outputName=item[0]}),elements.img.attributesDefault=[{name:"alt",value:""}],each(split("ol,ul,sub,sup,blockquote,span,font,a,table,tbody,tr"),function(name){elements[name].removeEmpty=!0}),each(split("p,h1,h2,h3,h4,h5,h6,th,td,pre,div,address,caption"),function(name){elements[name].paddEmpty=!0})),addCustomElements(settings.custom_elements),addValidChildren(settings.valid_children),addValidElements(settings.extended_valid_elements),addValidChildren("+ol[ul|ol],+ul[ul|ol]"),settings.invalid_elements&&tinymce.each(tinymce.explode(settings.invalid_elements),function(item){elements[item]&&delete elements[item]}),this.children=children,this.styles=validStyles,this.getBoolAttrs=function(){return boolAttrMap},this.getBlockElements=function(){return blockElementsMap},this.getShortEndedElements=function(){return shortEndedElementsMap},this.getSelfClosingElements=function(){return selfClosingElementsMap},this.getNonEmptyElements=function(){return nonEmptyElementsMap},this.getWhiteSpaceElements=function(){return whiteSpaceElementsMap},this.isValidChild=function(name,child){var parent=children[name];return!(!parent||!parent[child])},this.getElementRule=function(name){var i,element=elements[name];if(element)return element;for(i=patternElements.length;i--;)if((element=patternElements[i]).pattern.test(name))return element},this.getCustomElements=function(){return customElementsMap},this.addValidElements=addValidElements,this.setValidElements=setValidElements,this.addCustomElements=addCustomElements,this.addValidChildren=addValidChildren},tinymce.html.Schema.boolAttrMap=boolAttrMap,tinymce.html.Schema.blockElementsMap=blockElementsMap}(tinymce),function(tinymce){tinymce.html.SaxParser=function(settings,schema){var self=this,noop=function(){};settings=settings||{},self.schema=schema=schema||new tinymce.html.Schema,!1!==settings.fix_self_closing&&(settings.fix_self_closing=!0),tinymce.each("comment cdata text start end pi doctype".split(" "),function(name){name&&(self[name]=settings[name]||noop)}),self.parse=function(html){var matches,value,endRegExp,attrList,i,text,name,shortEndedElements,fillAttrsMap,isShortEnded,validate,elementRule,isValidElement,attr,attribsValue,validAttributesMap,validAttributePatterns,attributesRequired,attributesDefault,attributesForced,selfClosing,tokenRegExp,attrRegExp,specialElements,attrValue,fixSelfClosing,self=this,index=0,stack=[],idCount=0,decode=tinymce.html.Entities.decode;function processEndTag(name){var pos,i;for(pos=stack.length;pos--&&stack[pos].name!==name;);if(pos>=0){for(i=stack.length-1;i>=pos;i--)(name=stack[i]).valid&&self.end(name.name);stack.length=pos}}for(tokenRegExp=new RegExp("<(?:(?:!--([\\w\\W]*?)--\x3e)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([^>]+)>)|(?:([^\\s\\/<>]+)\\s*((?:[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*)>))","g"),attrRegExp=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:\\.|[^\"])*)\")|(?:\'((?:\\.|[^\'])*)\')|([^>\s]+)))?/g,specialElements={script:/<\/script[^>]*>/gi,style:/<\/style[^>]*>/gi,noscript:/<\/noscript[^>]*>/gi},shortEndedElements=schema.getShortEndedElements(),selfClosing=schema.getSelfClosingElements(),fillAttrsMap=schema.getBoolAttrs(),validate=settings.validate,fixSelfClosing=settings.fix_self_closing;matches=tokenRegExp.exec(html);){if(index<matches.index&&self.text(decode(html.substr(index,matches.index-index))),value=matches[6])processEndTag(value.toLowerCase());else if(value=matches[7]){if(isShortEnded=(value=value.toLowerCase())in shortEndedElements,fixSelfClosing&&selfClosing[value]&&stack.length>0&&stack[stack.length-1].name===value&&processEndTag(value),!validate||(elementRule=schema.getElementRule(value))){if(isValidElement=!0,validate&&(validAttributesMap=elementRule.attributes,validAttributePatterns=elementRule.attributePatterns),(attribsValue=matches[8])?((attrList=[]).map={},attribsValue.replace(attrRegExp,function(match,name,value,val2,val3){var attrRule,i;if(value=(name=name.toLowerCase())in fillAttrsMap?name:decode(value||val2||val3||""),validate&&0!==name.indexOf("data-")){if(!(attrRule=validAttributesMap[name])&&validAttributePatterns){for(i=validAttributePatterns.length;i--&&!(attrRule=validAttributePatterns[i]).pattern.test(name););-1===i&&(attrRule=null)}if(!attrRule)return;if(attrRule.validValues&&!(value in attrRule.validValues))return}attrList.map[name]=value,attrList.push({name:name,value:value})})):(attrList=[]).map={},validate){if(attributesRequired=elementRule.attributesRequired,attributesDefault=elementRule.attributesDefault,attributesForced=elementRule.attributesForced)for(i=attributesForced.length;i--;)name=(attr=attributesForced[i]).name,"{$uid}"===(attrValue=attr.value)&&(attrValue="mce_"+idCount++),attrList.map[name]=attrValue,attrList.push({name:name,value:attrValue});if(attributesDefault)for(i=attributesDefault.length;i--;)(name=(attr=attributesDefault[i]).name)in attrList.map||("{$uid}"===(attrValue=attr.value)&&(attrValue="mce_"+idCount++),attrList.map[name]=attrValue,attrList.push({name:name,value:attrValue}));if(attributesRequired){for(i=attributesRequired.length;i--&&!(attributesRequired[i]in attrList.map););-1===i&&(isValidElement=!1)}attrList.map["data-mce-bogus"]&&(isValidElement=!1)}isValidElement&&self.start(value,attrList,isShortEnded)}else isValidElement=!1;if(endRegExp=specialElements[value]){endRegExp.lastIndex=index=matches.index+matches[0].length,(matches=endRegExp.exec(html))?(isValidElement&&(text=html.substr(index,matches.index-index)),index=matches.index+matches[0].length):(text=html.substr(index),index=html.length),isValidElement&&text.length>0&&self.text(text,!0),isValidElement&&self.end(value),tokenRegExp.lastIndex=index;continue}isShortEnded||(attribsValue&&attribsValue.indexOf("/")==attribsValue.length-1?isValidElement&&self.end(value):stack.push({name:value,valid:isValidElement}))}else(value=matches[1])?self.comment(value):(value=matches[2])?self.cdata(value):(value=matches[3])?self.doctype(value):(value=matches[4])&&self.pi(value,matches[5]);index=matches.index+matches[0].length}for(index<html.length&&self.text(decode(html.substr(index))),i=stack.length-1;i>=0;i--)(value=stack[i]).valid&&self.end(value.name)}}}(tinymce),function(tinymce){var whiteSpaceRegExp=/^[ \t\r\n]*$/,typeLookup={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11};function _walk(node,root_node,prev){var sibling,parent,startName=prev?"lastChild":"firstChild",siblingName=prev?"prev":"next";if(node[startName])return node[startName];if(node!==root_node){if(sibling=node[siblingName])return sibling;for(parent=node.parent;parent&&parent!==root_node;parent=parent.parent)if(sibling=parent[siblingName])return sibling}}function Node(name,type){this.name=name,this.type=type,1===type&&(this.attributes=[],this.attributes.map={})}tinymce.extend(Node.prototype,{replace:function(node){return node.parent&&node.remove(),this.insert(node,this),this.remove(),this},attr:function(name,value){var attrs,i;if("string"!=typeof name){for(i in name)this.attr(i,name[i]);return this}if(attrs=this.attributes){if(void 0!==value){if(null===value){if(name in attrs.map)for(delete attrs.map[name],i=attrs.length;i--;)if(attrs[i].name===name)return attrs=attrs.splice(i,1),this;return this}if(name in attrs.map){for(i=attrs.length;i--;)if(attrs[i].name===name){attrs[i].value=value;break}}else attrs.push({name:name,value:value});return attrs.map[name]=value,this}return attrs.map[name]}},clone:function(){var i,l,selfAttrs,selfAttr,cloneAttrs,clone=new Node(this.name,this.type);if(selfAttrs=this.attributes){for((cloneAttrs=[]).map={},i=0,l=selfAttrs.length;i<l;i++)"id"!==(selfAttr=selfAttrs[i]).name&&(cloneAttrs[cloneAttrs.length]={name:selfAttr.name,value:selfAttr.value},cloneAttrs.map[selfAttr.name]=selfAttr.value);clone.attributes=cloneAttrs}return clone.value=this.value,clone.shortEnded=this.shortEnded,clone},wrap:function(wrapper){return this.parent.insert(wrapper,this),wrapper.append(this),this},unwrap:function(){var node,next;for(node=this.firstChild;node;)next=node.next,this.insert(node,this,!0),node=next;this.remove()},remove:function(){var parent=this.parent,next=this.next,prev=this.prev;return parent&&(parent.firstChild===this?(parent.firstChild=next,next&&(next.prev=null)):prev.next=next,parent.lastChild===this?(parent.lastChild=prev,prev&&(prev.next=null)):next.prev=prev,this.parent=this.next=this.prev=null),this},append:function(node){var last;return node.parent&&node.remove(),(last=this.lastChild)?(last.next=node,node.prev=last,this.lastChild=node):this.lastChild=this.firstChild=node,node.parent=this,node},insert:function(node,ref_node,before){var parent;return node.parent&&node.remove(),parent=ref_node.parent||this,before?(ref_node===parent.firstChild?parent.firstChild=node:ref_node.prev.next=node,node.prev=ref_node.prev,node.next=ref_node,ref_node.prev=node):(ref_node===parent.lastChild?parent.lastChild=node:ref_node.next.prev=node,node.next=ref_node.next,node.prev=ref_node,ref_node.next=node),node.parent=parent,node},getAll:function(name){var node,collection=[];for(node=this.firstChild;node;node=_walk(node,this))node.name===name&&collection.push(node);return collection},empty:function(){var nodes,i,node;if(this.firstChild){for(nodes=[],node=this.firstChild;node;node=_walk(node,this))nodes.push(node);for(i=nodes.length;i--;)(node=nodes[i]).parent=node.firstChild=node.lastChild=node.next=node.prev=null}return this.firstChild=this.lastChild=null,this},isEmpty:function(elements){var i,name,node=this.firstChild;if(node)do{if(1===node.type){if(node.attributes.map["data-mce-bogus"])continue;if(elements[node.name])return!1;for(i=node.attributes.length;i--;)if("name"===(name=node.attributes[i].name)||0===name.indexOf("data-"))return!1}if(3===node.type&&!whiteSpaceRegExp.test(node.value))return!1}while(node=_walk(node,this));return!0},walk:function(prev){return _walk(this,null,prev)}}),tinymce.extend(Node,{create:function(name,attrs){var node,attrName;if(node=new Node(name,typeLookup[name]||1),attrs)for(attrName in attrs)node.attr(attrName,attrs[attrName]);return node}}),tinymce.html.Node=Node}(tinymce),function(tinymce){var Node=tinymce.html.Node;tinymce.html.DomParser=function(settings,schema){var self=this,nodeFilters={},attributeFilters=[],matchedNodes={},matchedAttributes={};(settings=settings||{}).validate=!("validate"in settings)||settings.validate,settings.root_name=settings.root_name||"body",self.schema=schema=schema||new tinymce.html.Schema,self.filterNode=function(node){var i,name,list;name in nodeFilters&&((list=matchedNodes[name])?list.push(node):matchedNodes[name]=[node]),i=attributeFilters.length;for(;i--;)(name=attributeFilters[i].name)in node.attributes.map&&((list=matchedAttributes[name])?list.push(node):matchedAttributes[name]=[node]);return node},self.addNodeFilter=function(name,callback){tinymce.each(tinymce.explode(name),function(name){var list=nodeFilters[name];list||(nodeFilters[name]=list=[]),list.push(callback)})},self.addAttributeFilter=function(name,callback){tinymce.each(tinymce.explode(name),function(name){var i;for(i=0;i<attributeFilters.length;i++)if(attributeFilters[i].name===name)return void attributeFilters[i].callbacks.push(callback);attributeFilters.push({name:name,callbacks:[callback]})})},self.parse=function(html,args){var parser,rootNode,node,nodes,i,l,fi,fl,list,name,validate,blockElements,startWhiteSpaceRegExp,endWhiteSpaceRegExp,allWhiteSpaceRegExp,whiteSpaceElements,children,nonEmptyElements,rootBlockName,invalidChildren=[];function createNode(name,type){var list,node=new Node(name,type);return name in nodeFilters&&((list=matchedNodes[name])?list.push(node):matchedNodes[name]=[node]),node}function removeWhitespaceBefore(node){var textNode,textVal,sibling;for(textNode=node.prev;textNode&&3===textNode.type;)(textVal=textNode.value.replace(endWhiteSpaceRegExp,"")).length>0?(textNode.value=textVal,textNode=textNode.prev):(sibling=textNode.prev,textNode.remove(),textNode=sibling)}if(args=args||{},matchedNodes={},matchedAttributes={},blockElements=tinymce.extend(tinymce.makeMap("script,style,head,html,body,title,meta,param"),schema.getBlockElements()),nonEmptyElements=schema.getNonEmptyElements(),children=schema.children,validate=settings.validate,rootBlockName="forced_root_block"in args?args.forced_root_block:settings.forced_root_block,whiteSpaceElements=schema.getWhiteSpaceElements(),startWhiteSpaceRegExp=/^[ \t\r\n]+/,endWhiteSpaceRegExp=/[ \t\r\n]+$/,allWhiteSpaceRegExp=/[ \t\r\n]+/g,parser=new tinymce.html.SaxParser({validate:validate,fix_self_closing:!validate,cdata:function(text){node.append(createNode("#cdata",4)).value=text},text:function(_text,raw){var textNode;whiteSpaceElements[node.name]||(_text=_text.replace(allWhiteSpaceRegExp," "),node.lastChild&&blockElements[node.lastChild.name]&&(_text=_text.replace(startWhiteSpaceRegExp,""))),0!==_text.length&&((textNode=createNode("#text",3)).raw=!!raw,node.append(textNode).value=_text)},comment:function(text){node.append(createNode("#comment",8)).value=text},pi:function(name,text){node.append(createNode(name,7)).value=text,removeWhitespaceBefore(node)},doctype:function(text){node.append(createNode("#doctype",10)).value=text,removeWhitespaceBefore(node)},start:function(name,attrs,empty){var newNode,attrFiltersLen,elementRule,attrName,parent;if(elementRule=validate?schema.getElementRule(name):{}){for((newNode=createNode(elementRule.outputName||name,1)).attributes=attrs,newNode.shortEnded=empty,node.append(newNode),(parent=children[node.name])&&children[newNode.name]&&!parent[newNode.name]&&invalidChildren.push(newNode),attrFiltersLen=attributeFilters.length;attrFiltersLen--;)(attrName=attributeFilters[attrFiltersLen].name)in attrs.map&&((list=matchedAttributes[attrName])?list.push(newNode):matchedAttributes[attrName]=[newNode]);blockElements[name]&&removeWhitespaceBefore(newNode),empty||(node=newNode)}},end:function(name){var textNode,elementRule,text,sibling,tempNode;if(elementRule=validate?schema.getElementRule(name):{}){if(blockElements[name]){if(!whiteSpaceElements[node.name]){for(textNode=node.firstChild;textNode&&3===textNode.type;)(text=textNode.value.replace(startWhiteSpaceRegExp,"")).length>0?(textNode.value=text,textNode=textNode.next):(sibling=textNode.next,textNode.remove(),textNode=sibling);for(textNode=node.lastChild;textNode&&3===textNode.type;)(text=textNode.value.replace(endWhiteSpaceRegExp,"")).length>0?(textNode.value=text,textNode=textNode.prev):(sibling=textNode.prev,textNode.remove(),textNode=sibling)}(textNode=node.prev)&&3===textNode.type&&((text=textNode.value.replace(startWhiteSpaceRegExp,"")).length>0?textNode.value=text:textNode.remove())}if((elementRule.removeEmpty||elementRule.paddEmpty)&&node.isEmpty(nonEmptyElements))if(elementRule.paddEmpty)node.empty().append(new Node("#text","3")).value=" ";else if(!node.attributes.map.name)return tempNode=node.parent,node.empty().remove(),void(node=tempNode);node=node.parent}}},schema),rootNode=node=new Node(args.context||settings.root_name,11),parser.parse(html),validate&&invalidChildren.length&&(args.context?args.invalid=!0:function(nodes){var ni,node,parent,parents,newParent,currentNode,tempNode,childNode,i,nonEmptyElements,nonSplitableElements,sibling,nextNode;for(nonSplitableElements=tinymce.makeMap("tr,td,th,tbody,thead,tfoot,table"),nonEmptyElements=schema.getNonEmptyElements(),ni=0;ni<nodes.length;ni++)if((node=nodes[ni]).parent){for(parents=[node],parent=node.parent;parent&&!schema.isValidChild(parent.name,node.name)&&!nonSplitableElements[parent.name];parent=parent.parent)parents.push(parent);if(parent&&parents.length>1){for(parents.reverse(),newParent=currentNode=self.filterNode(parents[0].clone()),i=0;i<parents.length-1;i++){for(schema.isValidChild(currentNode.name,parents[i].name)?(tempNode=self.filterNode(parents[i].clone()),currentNode.append(tempNode)):tempNode=currentNode,childNode=parents[i].firstChild;childNode&&childNode!=parents[i+1];)nextNode=childNode.next,tempNode.append(childNode),childNode=nextNode;currentNode=tempNode}newParent.isEmpty(nonEmptyElements)?parent.insert(node,parents[0],!0):(parent.insert(newParent,parents[0],!0),parent.insert(node,newParent)),((parent=parents[0]).isEmpty(nonEmptyElements)||parent.firstChild===parent.lastChild&&"br"===parent.firstChild.name)&&parent.empty().remove()}else if(node.parent){if("li"===node.name){if((sibling=node.prev)&&("ul"===sibling.name||"ul"===sibling.name)){sibling.append(node);continue}if((sibling=node.next)&&("ul"===sibling.name||"ul"===sibling.name)){sibling.insert(node,sibling.firstChild,!0);continue}node.wrap(self.filterNode(new Node("ul",1)));continue}schema.isValidChild(node.parent.name,"div")&&schema.isValidChild("div",node.name)?node.wrap(self.filterNode(new Node("div",1))):"style"===node.name||"script"===node.name?node.empty().remove():node.unwrap()}}}(invalidChildren)),rootBlockName&&"body"==rootNode.name&&function(){for(var next,rootBlockNode,node=rootNode.firstChild;node;)next=node.next,3==node.type||1==node.type&&"p"!==node.name&&!blockElements[node.name]&&!node.attr("data-mce-type")?rootBlockNode?rootBlockNode.append(node):(rootBlockNode=createNode(rootBlockName,1),rootNode.insert(rootBlockNode,node),rootBlockNode.append(node)):rootBlockNode=null,node=next}(),!args.invalid){for(name in matchedNodes){for(list=nodeFilters[name],fi=(nodes=matchedNodes[name]).length;fi--;)nodes[fi].parent||nodes.splice(fi,1);for(i=0,l=list.length;i<l;i++)list[i](nodes,name,args)}for(i=0,l=attributeFilters.length;i<l;i++)if((list=attributeFilters[i]).name in matchedAttributes){for(fi=(nodes=matchedAttributes[list.name]).length;fi--;)nodes[fi].parent||nodes.splice(fi,1);for(fi=0,fl=list.callbacks.length;fi<fl;fi++)list.callbacks[fi](nodes,list.name,args)}}return rootNode},settings.remove_trailing_brs&&self.addNodeFilter("br",function(nodes,name){var i,node,parent,prev,prevName,l=nodes.length,blockElements=schema.getBlockElements(),nonEmptyElements=schema.getNonEmptyElements();for(blockElements.body=1,i=0;i<l;i++)if(parent=(node=nodes[i]).parent,blockElements[node.parent.name]&&node===parent.lastChild){for(prev=node.prev;prev;){if("span"!==(prevName=prev.name)||"bookmark"!==prev.attr("data-mce-type")){if("br"!==prevName)break;if("br"===prevName){node=null;break}}prev=prev.prev}node&&(node.remove(),parent.isEmpty(nonEmptyElements)&&(elementRule=schema.getElementRule(parent.name),elementRule.removeEmpty?parent.remove():elementRule.paddEmpty&&(parent.empty().append(new tinymce.html.Node("#text",3)).value=" ")))}})}}(tinymce),tinymce.html.Writer=function(settings){var indent,indentBefore,indentAfter,encode,htmlOutput,html=[];return indent=(settings=settings||{}).indent,indentBefore=tinymce.makeMap(settings.indent_before||""),indentAfter=tinymce.makeMap(settings.indent_after||""),encode=tinymce.html.Entities.getEncodeFunc(settings.entity_encoding||"raw",settings.entities),htmlOutput="html"==settings.element_format,{start:function(name,attrs,empty){var i,l,attr,value;if(indent&&indentBefore[name]&&html.length>0&&(value=html[html.length-1]).length>0&&"\n"!==value&&html.push("\n"),html.push("<",name),attrs)for(i=0,l=attrs.length;i<l;i++)attr=attrs[i],html.push(" ",attr.name,'="',encode(attr.value,!0),'"');html[html.length]=!empty||htmlOutput?">":" />",empty&&indent&&indentAfter[name]&&html.length>0&&(value=html[html.length-1]).length>0&&"\n"!==value&&html.push("\n")},end:function(name){var value;html.push("</",name,">"),indent&&indentAfter[name]&&html.length>0&&(value=html[html.length-1]).length>0&&"\n"!==value&&html.push("\n")},text:function(_text2,raw){_text2.length>0&&(html[html.length]=raw?_text2:encode(_text2))},cdata:function(text){html.push("<![CDATA[",text,"]]>")},comment:function(text){html.push("\x3c!--",text,"--\x3e")},pi:function(name,text){text?html.push("<?",name," ",text,"?>"):html.push("<?",name,"?>"),indent&&html.push("\n")},doctype:function(text){html.push("<!DOCTYPE",text,">",indent?"\n":"")},reset:function(){html.length=0},getContent:function(){return html.join("").replace(/\n$/,"")}}},function(tinymce){tinymce.html.Serializer=function(settings,schema){var writer=new tinymce.html.Writer(settings);(settings=settings||{}).validate=!("validate"in settings)||settings.validate,this.schema=schema=schema||new tinymce.html.Schema,this.writer=writer,this.serialize=function(node){var handlers,validate;function walk(node){var name,isEmpty,attrs,attrName,attrValue,sortedAttrs,i,l,elementRule,handler=handlers[node.type];if(handler)handler(node);else{if(name=node.name,isEmpty=node.shortEnded,attrs=node.attributes,validate&&attrs&&attrs.length>1){for((sortedAttrs=[]).map={},i=0,l=(elementRule=schema.getElementRule(node.name)).attributesOrder.length;i<l;i++)(attrName=elementRule.attributesOrder[i])in attrs.map&&(attrValue=attrs.map[attrName],sortedAttrs.map[attrName]=attrValue,sortedAttrs.push({name:attrName,value:attrValue}));for(i=0,l=attrs.length;i<l;i++)(attrName=attrs[i].name)in sortedAttrs.map||(attrValue=attrs.map[attrName],sortedAttrs.map[attrName]=attrValue,sortedAttrs.push({name:attrName,value:attrValue}));attrs=sortedAttrs}if(writer.start(node.name,attrs,isEmpty),!isEmpty){if(node=node.firstChild)do{walk(node)}while(node=node.next);writer.end(name)}}}return validate=settings.validate,handlers={3:function(node,raw){writer.text(node.value,node.raw)},8:function(node){writer.comment(node.value)},7:function(node){writer.pi(node.name,node.value)},10:function(node){writer.doctype(node.value)},4:function(node){writer.cdata(node.value)},11:function(node){if(node=node.firstChild)do{walk(node)}while(node=node.next)}},writer.reset(),1!=node.type||settings.inner?handlers[11](node):walk(node),writer.getContent()}}}(tinymce),function(tinymce){var each=tinymce.each,is=tinymce.is,isWebKit=tinymce.isWebKit,isIE=tinymce.isIE,Entities=tinymce.html.Entities,blockElementsMap=tinymce.html.Schema.blockElementsMap,whiteSpaceRegExp=/^[ \t\r\n]*$/;tinymce.create("tinymce.dom.DOMUtils",{doc:null,root:null,files:null,pixelStyles:/^(top|left|bottom|right|width|height|borderWidth)$/,props:{for:"htmlFor",class:"className",className:"className",checked:"checked",disabled:"disabled",maxlength:"maxLength",readonly:"readOnly",selected:"selected",value:"value",id:"id",name:"name",type:"type"},DOMUtils:function(d,s){var name,t=this;if(t.doc=d,t.win=window,t.files={},t.cssFlicker=!1,t.counter=0,t.stdMode=!tinymce.isIE||d.documentMode>=8,t.boxModel=!tinymce.isIE||"CSS1Compat"==d.compatMode||t.stdMode,t.hasOuterHTML="outerHTML"in d.createElement("a"),t.settings=s=tinymce.extend({keep_values:!1,hex_colors:1},s),t.schema=s.schema,t.styles=new tinymce.html.Styles({url_converter:s.url_converter,url_converter_scope:s.url_converter_scope},s.schema),tinymce.isIE6)try{d.execCommand("BackgroundImageCache",!1,!0)}catch(e){t.cssFlicker=!0}if(isIE&&s.schema)for(name in"abbr article aside audio canvas details figcaption figure footer header hgroup mark menu meter nav output progress section summary time video".replace(/\w+/g,function(name){d.createElement(name)}),s.schema.getCustomElements())d.createElement(name);tinymce.addUnload(t.destroy,t)},getRoot:function(){var t=this,s=t.settings;return s&&t.get(s.root_element)||t.doc.body},getViewPort:function(w){var d,b;return d=(w=w||this.win).document,b=this.boxModel?d.documentElement:d.body,{x:w.pageXOffset||b.scrollLeft,y:w.pageYOffset||b.scrollTop,w:w.innerWidth||b.clientWidth,h:w.innerHeight||b.clientHeight}},getRect:function(e){var p,sr,t=this;return e=t.get(e),p=t.getPos(e),sr=t.getSize(e),{x:p.x,y:p.y,w:sr.w,h:sr.h}},getSize:function(e){var w,h,t=this;return e=t.get(e),w=t.getStyle(e,"width"),h=t.getStyle(e,"height"),-1===w.indexOf("px")&&(w=0),-1===h.indexOf("px")&&(h=0),{w:parseInt(w)||e.offsetWidth||e.clientWidth,h:parseInt(h)||e.offsetHeight||e.clientHeight}},getParent:function(n,f,r){return this.getParents(n,f,r,!1)},getParents:function(n,f,r,c){var na,t=this,se=t.settings,o=[];for(n=t.get(n),c=void 0===c,se.strict_root&&(r=r||t.getRoot()),is(f,"string")&&(na=f,f="*"===f?function(n){return 1==n.nodeType}:function(n){return t.is(n,na)});n&&n!=r&&n.nodeType&&9!==n.nodeType;){if(!f||f(n)){if(!c)return n;o.push(n)}n=n.parentNode}return c?o:null},get:function(e){var n;return e&&this.doc&&"string"==typeof e&&(n=e,(e=this.doc.getElementById(e))&&e.id!==n)?this.doc.getElementsByName(n)[1]:e},getNext:function(node,selector){return this._findSib(node,selector,"nextSibling")},getPrev:function(node,selector){return this._findSib(node,selector,"previousSibling")},add:function(p,n,a,h,c){var t=this;return this.run(p,function(p){var e;return e=is(n,"string")?t.doc.createElement(n):n,t.setAttribs(e,a),h&&(h.nodeType?e.appendChild(h):t.setHTML(e,h)),c?e:p.appendChild(e)})},create:function(n,a,h){return this.add(this.doc.createElement(n),n,a,h,1)},createHTML:function(n,a,h){var k,o="";for(k in o+="<"+n,a)a.hasOwnProperty(k)&&(o+=" "+k+'="'+this.encode(a[k])+'"');return void 0!==h?o+">"+h+"</"+n+">":o+" />"},remove:function(node,keep_children){return this.run(node,function(node){var child,parent=node.parentNode;if(!parent)return null;if(keep_children)for(;child=node.firstChild;)!tinymce.isIE||3!==child.nodeType||child.nodeValue?parent.insertBefore(child,node):node.removeChild(child);return parent.removeChild(node)})},setStyle:function(n,na,v){var t=this;return t.run(n,function(e){var s;switch(s=e.style,na=na.replace(/-(\D)/g,function(a,b){return b.toUpperCase()}),t.pixelStyles.test(na)&&(tinymce.is(v,"number")||/^[\-0-9\.]+$/.test(v))&&(v+="px"),na){case"opacity":isIE&&(s.filter=""===v?"":"alpha(opacity="+100*v+")",n.currentStyle&&n.currentStyle.hasLayout||(s.display="inline-block")),s[na]=s["-moz-opacity"]=s["-khtml-opacity"]=v||"";break;case"float":isIE?s.styleFloat=v:s.cssFloat=v;break;default:s[na]=v||""}t.settings.update_styles&&t.setAttrib(e,"data-mce-style")})},getStyle:function(n,na,c){if(n=this.get(n)){if(this.doc.defaultView&&c){na=na.replace(/[A-Z]/g,function(a){return"-"+a});try{return this.doc.defaultView.getComputedStyle(n,null).getPropertyValue(na)}catch(ex){return null}}return"float"==(na=na.replace(/-(\D)/g,function(a,b){return b.toUpperCase()}))&&(na=isIE?"styleFloat":"cssFloat"),n.currentStyle&&c?n.currentStyle[na]:n.style?n.style[na]:void 0}},setStyles:function(e,o){var ol,t=this,s=t.settings;ol=s.update_styles,s.update_styles=0,each(o,function(v,n){t.setStyle(e,n,v)}),s.update_styles=ol,s.update_styles&&t.setAttrib(e,s.cssText)},removeAllAttribs:function(e){return this.run(e,function(e){var i,attrs=e.attributes;for(i=attrs.length-1;i>=0;i--)e.removeAttributeNode(attrs.item(i))})},setAttrib:function(e,n,v){var t=this;if(e&&n)return t.settings.strict&&(n=n.toLowerCase()),this.run(e,function(e){var s=t.settings;switch(n){case"style":if(!is(v,"string"))return void each(v,function(v,n){t.setStyle(e,n,v)});s.keep_values&&(v&&!t._isRes(v)?e.setAttribute("data-mce-style",v,2):e.removeAttribute("data-mce-style",2)),e.style.cssText=v;break;case"class":e.className=v||"";break;case"src":case"href":s.keep_values&&(s.url_converter&&(v=s.url_converter.call(s.url_converter_scope||t,v,n,e)),t.setAttrib(e,"data-mce-"+n,v,2));break;case"shape":e.setAttribute("data-mce-style",v)}is(v)&&null!==v&&0!==v.length?e.setAttribute(n,""+v,2):e.removeAttribute(n,2)})},setAttribs:function(e,o){var t=this;return this.run(e,function(e){each(o,function(v,n){t.setAttrib(e,n,v)})})},getAttrib:function(e,n,dv){var v,t=this;if(!(e=t.get(e))||1!==e.nodeType)return!1;if(is(dv)||(dv=""),/^(src|href|style|coords|shape)$/.test(n)&&(v=e.getAttribute("data-mce-"+n)))return v;if(isIE&&t.props[n]&&(v=(v=e[t.props[n]])&&v.nodeValue?v.nodeValue:v),v||(v=e.getAttribute(n,2)),/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noshade|nowrap|readonly|selected)$/.test(n))return!0===e[t.props[n]]&&""===v?n:v?n:"";if("FORM"===e.nodeName&&e.getAttributeNode(n))return e.getAttributeNode(n).nodeValue;if("style"===n&&(v=v||e.style.cssText)&&(v=t.serializeStyle(t.parseStyle(v),e.nodeName),t.settings.keep_values&&!t._isRes(v)&&e.setAttribute("data-mce-style",v)),isWebKit&&"class"===n&&v&&(v=v.replace(/(apple|webkit)\-[a-z\-]+/gi,"")),isIE)switch(n){case"rowspan":case"colspan":1===v&&(v="");break;case"size":"+0"!==v&&20!==v&&0!==v||(v="");break;case"width":case"height":case"vspace":case"checked":case"disabled":case"readonly":0===v&&(v="");break;case"hspace":-1===v&&(v="");break;case"maxlength":case"tabindex":32768!==v&&2147483647!==v&&"32768"!==v||(v="");break;case"multiple":case"compact":case"noshade":case"nowrap":return 65535===v?n:dv;case"shape":v=v.toLowerCase();break;default:0===n.indexOf("on")&&v&&(v=tinymce._replace(/^function\s+\w+\(\)\s+\{\s+(.*)\s+\}$/,"$1",""+v))}return void 0!==v&&null!==v&&""!==v?""+v:dv},getPos:function(n,ro){var e,r,t=this,x=0,y=0,d=t.doc;if(n=t.get(n),ro=ro||d.body,n){if(n.getBoundingClientRect)return n=n.getBoundingClientRect(),e=t.boxModel?d.documentElement:d.body,{x:x=n.left+(d.documentElement.scrollLeft||d.body.scrollLeft)-e.clientTop,y:y=n.top+(d.documentElement.scrollTop||d.body.scrollTop)-e.clientLeft};for(r=n;r&&r!=ro&&r.nodeType;)x+=r.offsetLeft||0,y+=r.offsetTop||0,r=r.offsetParent;for(r=n.parentNode;r&&r!=ro&&r.nodeType;)x-=r.scrollLeft||0,y-=r.scrollTop||0,r=r.parentNode}return{x:x,y:y}},parseStyle:function(st){return this.styles.parse(st)},serializeStyle:function(o,name){return this.styles.serialize(o,name)},loadCSS:function(u){var head,t=this,d=t.doc;u||(u=""),head=t.select("head")[0],each(u.split(","),function(u){var link;t.files[u]||(t.files[u]=!0,link=t.create("link",{rel:"stylesheet",href:tinymce._addVer(u)}),isIE&&d.documentMode&&d.recalc&&(link.onload=function(){d.recalc&&d.recalc(),link.onload=null}),head.appendChild(link))})},addClass:function(e,c){return this.run(e,function(e){var o;return c?this.hasClass(e,c)?e.className:(o=this.removeClass(e,c),e.className=(""!=o?o+" ":"")+c):0})},removeClass:function(e,c){var re,t=this;return t.run(e,function(e){var v;return t.hasClass(e,c)?(re||(re=new RegExp("(^|\\s+)"+c+"(\\s+|$)","g")),v=e.className.replace(re," "),v=tinymce.trim(" "!=v?v:""),e.className=v,v||(e.removeAttribute("class"),e.removeAttribute("className")),v):e.className})},hasClass:function(n,c){return!(!(n=this.get(n))||!c)&&-1!==(" "+n.className+" ").indexOf(" "+c+" ")},show:function(e){return this.setStyle(e,"display","block")},hide:function(e){return this.setStyle(e,"display","none")},isHidden:function(e){return!(e=this.get(e))||"none"==e.style.display||"none"==this.getStyle(e,"display")},uniqueId:function(p){return(p||"mce_")+this.counter++},setHTML:function(element,html){var self=this;return self.run(element,function(element){if(isIE){for(;element.firstChild;)element.removeChild(element.firstChild);try{element.innerHTML="<br />"+html,element.removeChild(element.firstChild)}catch(ex){(element=self.create("div")).innerHTML="<br />"+html,each(element.childNodes,function(node,i){i&&element.appendChild(node)})}}else element.innerHTML=html;return html})},getOuterHTML:function(elm){var doc;return(elm=this.get(elm))?1===elm.nodeType&&this.hasOuterHTML?elm.outerHTML:((doc=(elm.ownerDocument||this.doc).createElement("body")).appendChild(elm.cloneNode(!0)),doc.innerHTML):null},setOuterHTML:function(e,h,d){var t=this;function setHTML(e,h,d){var n,tp;for((tp=d.createElement("body")).innerHTML=h,n=tp.lastChild;n;)t.insertAfter(n.cloneNode(!0),e),n=n.previousSibling;t.remove(e)}return this.run(e,function(e){if(1==(e=t.get(e)).nodeType)if(d=d||e.ownerDocument||t.doc,isIE)try{isIE&&1==e.nodeType?e.outerHTML=h:setHTML(e,h,d)}catch(ex){setHTML(e,h,d)}else setHTML(e,h,d)})},decode:Entities.decode,encode:Entities.encodeAllRaw,insertAfter:function(node,reference_node){return reference_node=this.get(reference_node),this.run(node,function(node){var parent,nextSibling;return parent=reference_node.parentNode,(nextSibling=reference_node.nextSibling)?parent.insertBefore(node,nextSibling):parent.appendChild(node),node})},isBlock:function(node){var type=node.nodeType;return type?!(1!==type||!blockElementsMap[node.nodeName]):!!blockElementsMap[node]},replace:function(n,o,k){return is(o,"array")&&(n=n.cloneNode(!0)),this.run(o,function(o){return k&&each(tinymce.grep(o.childNodes),function(c){n.appendChild(c)}),o.parentNode.replaceChild(n,o)})},rename:function(elm,name){var newElm,t=this;return elm.nodeName!=name.toUpperCase()&&(newElm=t.create(name),each(t.getAttribs(elm),function(attr_node){t.setAttrib(newElm,attr_node.nodeName,t.getAttrib(elm,attr_node.nodeName))}),t.replace(newElm,elm,1)),newElm||elm},findCommonAncestor:function(a,b){for(var pe,ps=a;ps;){for(pe=b;pe&&ps!=pe;)pe=pe.parentNode;if(ps==pe)break;ps=ps.parentNode}return!ps&&a.ownerDocument?a.ownerDocument.documentElement:ps},toHex:function(s){var c=/^\s*rgb\s*?\(\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?\)\s*$/i.exec(s);function hex(s){return(s=parseInt(s).toString(16)).length>1?s:"0"+s}return c?s="#"+hex(c[1])+hex(c[2])+hex(c[3]):s},getClasses:function(){var ov,t=this,cl=[],lo={},f=t.settings.class_filter;if(t.classes)return t.classes;try{each(t.doc.styleSheets,function addClasses(s){each(s.imports,function(r){addClasses(r)}),each(s.cssRules||s.rules,function(r){switch(r.type||1){case 1:r.selectorText&&each(r.selectorText.split(","),function(v){v=v.replace(/^\s*|\s*$|^\s\./g,""),!/\.mce/.test(v)&&/\.[\w\-]+$/.test(v)&&(ov=v,v=tinymce._replace(/.*\.([a-z0-9_\-]+).*/i,"$1",v),f&&!(v=f(v,ov))||lo[v]||(cl.push({class:v}),lo[v]=1))});break;case 3:addClasses(r.styleSheet)}})})}catch(ex){}return cl.length>0&&(t.classes=cl),cl},run:function(e,f,s){var o,t=this;return t.doc&&"string"==typeof e&&(e=t.get(e)),!!e&&(s=s||this,e.nodeType||!e.length&&0!==e.length?f.call(s,e):(o=[],each(e,function(e,i){e&&("string"==typeof e&&(e=t.doc.getElementById(e)),o.push(f.call(s,e,i)))}),o))},getAttribs:function(n){var o;return(n=this.get(n))?isIE?(o=[],"OBJECT"==n.nodeName?n.attributes:("OPTION"===n.nodeName&&this.getAttrib(n,"selected")&&o.push({specified:1,nodeName:"selected"}),n.cloneNode(!1).outerHTML.replace(/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi,"").replace(/[\w:\-]+/gi,function(a){o.push({specified:1,nodeName:a})}),o)):n.attributes:[]},isEmpty:function(node,elements){var i,type,walker,name;if(node=node.firstChild){walker=new tinymce.dom.TreeWalker(node),elements=elements||this.schema?this.schema.getNonEmptyElements():null;do{if(1===(type=node.nodeType)){if(node.getAttribute("data-mce-bogus"))continue;if(elements&&elements[node.nodeName.toLowerCase()])return!1;for(this.getAttribs(node),i=node.attributes.length;i--;)if("name"===(name=node.attributes[i].nodeName)||0===name.indexOf("data-"))return!1}if(3===type&&!whiteSpaceRegExp.test(node.nodeValue))return!1}while(node=walker.next())}return!0},destroy:function(s){var t=this;t.events&&t.events.destroy(),t.win=t.doc=t.root=t.events=null,s||tinymce.removeUnload(t.destroy)},createRng:function(){var d=this.doc;return d.createRange?d.createRange():new tinymce.dom.Range(this)},nodeIndex:function(node,normalized){var lastNodeType,nodeType,idx=0;if(node)for(lastNodeType=node.nodeType,node=node.previousSibling;node;node=node.previousSibling)nodeType=node.nodeType,(!normalized||3!=nodeType||nodeType!=lastNodeType&&node.nodeValue.length)&&(idx++,lastNodeType=nodeType);return idx},split:function(pe,e,re){var bef,aft,pa,t=this,r=t.createRng();function trim(node){var i,children=node.childNodes,type=node.nodeType;if(1!=type||"bookmark"!=node.getAttribute("data-mce-type")){for(i=children.length-1;i>=0;i--)trim(children[i]);if(9!=type){if(3==type&&node.nodeValue.length>0){if(!t.isBlock(node.parentNode)||tinymce.trim(node.nodeValue).length>0)return}else if(1==type&&(1==(children=node.childNodes).length&&children[0]&&1==children[0].nodeType&&"bookmark"==children[0].getAttribute("data-mce-type")&&node.parentNode.insertBefore(children[0],node),children.length||/^(br|hr|input|img)$/i.test(node.nodeName)))return;t.remove(node)}return node}}if(pe&&e)return r.setStart(pe.parentNode,t.nodeIndex(pe)),r.setEnd(e.parentNode,t.nodeIndex(e)),bef=r.extractContents(),(r=t.createRng()).setStart(e.parentNode,t.nodeIndex(e)+1),r.setEnd(pe.parentNode,t.nodeIndex(pe)+1),aft=r.extractContents(),(pa=pe.parentNode).insertBefore(trim(bef),pe),re?pa.replaceChild(re,e):pa.insertBefore(e,pe),pa.insertBefore(trim(aft),pe),t.remove(pe),re||e},bind:function(target,name,func,scope){var t=this;return t.events||(t.events=new tinymce.dom.EventUtils),t.events.add(target,name,func,scope||this)},unbind:function(target,name,func){var t=this;return t.events||(t.events=new tinymce.dom.EventUtils),t.events.remove(target,name,func)},_findSib:function(node,selector,name){var t=this,f=selector;if(node)for(is(f,"string")&&(f=function(node){return t.is(node,selector)}),node=node[name];node;node=node[name])if(f(node))return node;return null},_isRes:function(c){return/^(top|left|bottom|right|width|height)/i.test(c)||/;\s*(top|left|bottom|right|width|height)/i.test(c)}}),tinymce.DOM=new tinymce.dom.DOMUtils(document,{process_html:0})}(tinymce),function(ns){tinymce.dom.Range=function Range(dom){var t=this,doc=dom.doc,EXTRACT=0,CLONE=1,DELETE=2,TRUE=!0,FALSE=!1,START_OFFSET="startOffset",START_CONTAINER="startContainer",END_CONTAINER="endContainer",END_OFFSET="endOffset",extend=tinymce.extend,nodeIndex=dom.nodeIndex;function setStart(n,o){_setEndPoint(TRUE,n,o)}function setEnd(n,o){_setEndPoint(FALSE,n,o)}function setStartBefore(n){setStart(n.parentNode,nodeIndex(n))}function setEndAfter(n){setEnd(n.parentNode,nodeIndex(n)+1)}function _getSelectedNode(container,offset){var child;if(3==container.nodeType)return container;if(offset<0)return container;for(child=container.firstChild;child&&offset>0;)--offset,child=child.nextSibling;return child||container}function _compareBoundaryPoints(containerA,offsetA,containerB,offsetB){var c,offsetC,n,cmnRoot,childA,childB;if(containerA==containerB)return offsetA==offsetB?0:offsetA<offsetB?-1:1;for(c=containerB;c&&c.parentNode!=containerA;)c=c.parentNode;if(c){for(offsetC=0,n=containerA.firstChild;n!=c&&offsetC<offsetA;)offsetC++,n=n.nextSibling;return offsetA<=offsetC?-1:1}for(c=containerA;c&&c.parentNode!=containerB;)c=c.parentNode;if(c){for(offsetC=0,n=containerB.firstChild;n!=c&&offsetC<offsetB;)offsetC++,n=n.nextSibling;return offsetC<offsetB?-1:1}for(cmnRoot=dom.findCommonAncestor(containerA,containerB),childA=containerA;childA&&childA.parentNode!=cmnRoot;)childA=childA.parentNode;for(childA||(childA=cmnRoot),childB=containerB;childB&&childB.parentNode!=cmnRoot;)childB=childB.parentNode;if(childB||(childB=cmnRoot),childA==childB)return 0;for(n=cmnRoot.firstChild;n;){if(n==childA)return-1;if(n==childB)return 1;n=n.nextSibling}}function _setEndPoint(st,n,o){var ec,sc;for(st?(t[START_CONTAINER]=n,t[START_OFFSET]=o):(t[END_CONTAINER]=n,t[END_OFFSET]=o),ec=t[END_CONTAINER];ec.parentNode;)ec=ec.parentNode;for(sc=t[START_CONTAINER];sc.parentNode;)sc=sc.parentNode;sc==ec?_compareBoundaryPoints(t[START_CONTAINER],t[START_OFFSET],t[END_CONTAINER],t[END_OFFSET])>0&&t.collapse(st):t.collapse(st),t.collapsed=t[START_CONTAINER]==t[END_CONTAINER]&&t[START_OFFSET]==t[END_OFFSET],t.commonAncestorContainer=dom.findCommonAncestor(t[START_CONTAINER],t[END_CONTAINER])}function _traverse(how){var c,p,depthDiff,startNode,endNode,sp,ep,endContainerDepth=0,startContainerDepth=0;if(t[START_CONTAINER]==t[END_CONTAINER])return function(how){var frag,s,sub,n,cnt,sibling,xferNode;if(how!=DELETE&&(frag=doc.createDocumentFragment()),t[START_OFFSET]==t[END_OFFSET])return frag;if(3==t[START_CONTAINER].nodeType){if(s=t[START_CONTAINER].nodeValue,sub=s.substring(t[START_OFFSET],t[END_OFFSET]),how!=CLONE&&(t[START_CONTAINER].deleteData(t[START_OFFSET],t[END_OFFSET]-t[START_OFFSET]),t.collapse(TRUE)),how==DELETE)return;return frag.appendChild(doc.createTextNode(sub)),frag}for(n=_getSelectedNode(t[START_CONTAINER],t[START_OFFSET]),cnt=t[END_OFFSET]-t[START_OFFSET];cnt>0;)sibling=n.nextSibling,xferNode=_traverseFullySelected(n,how),frag&&frag.appendChild(xferNode),--cnt,n=sibling;return how!=CLONE&&t.collapse(TRUE),frag}(how);for(p=(c=t[END_CONTAINER]).parentNode;p;c=p,p=p.parentNode){if(p==t[START_CONTAINER])return _traverseCommonStartContainer(c,how);++endContainerDepth}for(p=(c=t[START_CONTAINER]).parentNode;p;c=p,p=p.parentNode){if(p==t[END_CONTAINER])return _traverseCommonEndContainer(c,how);++startContainerDepth}for(depthDiff=startContainerDepth-endContainerDepth,startNode=t[START_CONTAINER];depthDiff>0;)startNode=startNode.parentNode,depthDiff--;for(endNode=t[END_CONTAINER];depthDiff<0;)endNode=endNode.parentNode,depthDiff++;for(sp=startNode.parentNode,ep=endNode.parentNode;sp!=ep;sp=sp.parentNode,ep=ep.parentNode)startNode=sp,endNode=ep;return function(startAncestor,endAncestor,how){var n,frag,startOffset,endOffset,cnt,sibling,nextSibling;for(how!=DELETE&&(frag=doc.createDocumentFragment()),n=_traverseLeftBoundary(startAncestor,how),frag&&frag.appendChild(n),startAncestor.parentNode,startOffset=nodeIndex(startAncestor),endOffset=nodeIndex(endAncestor),cnt=endOffset-++startOffset,sibling=startAncestor.nextSibling;cnt>0;)nextSibling=sibling.nextSibling,n=_traverseFullySelected(sibling,how),frag&&frag.appendChild(n),sibling=nextSibling,--cnt;return n=_traverseRightBoundary(endAncestor,how),frag&&frag.appendChild(n),how!=CLONE&&(t.setStartAfter(startAncestor),t.collapse(TRUE)),frag}(startNode,endNode,how)}function _traverseCommonStartContainer(endAncestor,how){var frag,n,cnt,sibling,xferNode;if(how!=DELETE&&(frag=doc.createDocumentFragment()),n=_traverseRightBoundary(endAncestor,how),frag&&frag.appendChild(n),(cnt=nodeIndex(endAncestor)-t[START_OFFSET])<=0)return how!=CLONE&&(t.setEndBefore(endAncestor),t.collapse(FALSE)),frag;for(n=endAncestor.previousSibling;cnt>0;)sibling=n.previousSibling,xferNode=_traverseFullySelected(n,how),frag&&frag.insertBefore(xferNode,frag.firstChild),--cnt,n=sibling;return how!=CLONE&&(t.setEndBefore(endAncestor),t.collapse(FALSE)),frag}function _traverseCommonEndContainer(startAncestor,how){var frag,startIdx,n,cnt,sibling,xferNode;for(how!=DELETE&&(frag=doc.createDocumentFragment()),n=_traverseLeftBoundary(startAncestor,how),frag&&frag.appendChild(n),startIdx=nodeIndex(startAncestor),++startIdx,cnt=t[END_OFFSET]-startIdx,n=startAncestor.nextSibling;cnt>0;)sibling=n.nextSibling,xferNode=_traverseFullySelected(n,how),frag&&frag.appendChild(xferNode),--cnt,n=sibling;return how!=CLONE&&(t.setStartAfter(startAncestor),t.collapse(TRUE)),frag}function _traverseRightBoundary(root,how){var parent,clonedParent,prevSibling,clonedChild,clonedGrandParent,next=_getSelectedNode(t[END_CONTAINER],t[END_OFFSET]-1),isFullySelected=next!=t[END_CONTAINER];if(next==root)return _traverseNode(next,isFullySelected,FALSE,how);for(clonedParent=_traverseNode(parent=next.parentNode,FALSE,FALSE,how);parent;){for(;next;)prevSibling=next.previousSibling,clonedChild=_traverseNode(next,isFullySelected,FALSE,how),how!=DELETE&&clonedParent.insertBefore(clonedChild,clonedParent.firstChild),isFullySelected=TRUE,next=prevSibling;if(parent==root)return clonedParent;next=parent.previousSibling,clonedGrandParent=_traverseNode(parent=parent.parentNode,FALSE,FALSE,how),how!=DELETE&&clonedGrandParent.appendChild(clonedParent),clonedParent=clonedGrandParent}}function _traverseLeftBoundary(root,how){var parent,clonedParent,nextSibling,clonedChild,clonedGrandParent,next=_getSelectedNode(t[START_CONTAINER],t[START_OFFSET]),isFullySelected=next!=t[START_CONTAINER];if(next==root)return _traverseNode(next,isFullySelected,TRUE,how);for(clonedParent=_traverseNode(parent=next.parentNode,FALSE,TRUE,how);parent;){for(;next;)nextSibling=next.nextSibling,clonedChild=_traverseNode(next,isFullySelected,TRUE,how),how!=DELETE&&clonedParent.appendChild(clonedChild),isFullySelected=TRUE,next=nextSibling;if(parent==root)return clonedParent;next=parent.nextSibling,clonedGrandParent=_traverseNode(parent=parent.parentNode,FALSE,TRUE,how),how!=DELETE&&clonedGrandParent.appendChild(clonedParent),clonedParent=clonedGrandParent}}function _traverseNode(n,isFullySelected,isLeft,how){var txtValue,newNodeValue,oldNodeValue,offset,newNode;if(isFullySelected)return _traverseFullySelected(n,how);if(3==n.nodeType){if(txtValue=n.nodeValue,isLeft?(offset=t[START_OFFSET],newNodeValue=txtValue.substring(offset),oldNodeValue=txtValue.substring(0,offset)):(offset=t[END_OFFSET],newNodeValue=txtValue.substring(0,offset),oldNodeValue=txtValue.substring(offset)),how!=CLONE&&(n.nodeValue=oldNodeValue),how==DELETE)return;return(newNode=n.cloneNode(FALSE)).nodeValue=newNodeValue,newNode}return how!=DELETE?n.cloneNode(FALSE):void 0}function _traverseFullySelected(n,how){if(how!=DELETE)return how==CLONE?n.cloneNode(TRUE):n;n.parentNode.removeChild(n)}extend(t,{startContainer:doc,startOffset:0,endContainer:doc,endOffset:0,collapsed:TRUE,commonAncestorContainer:doc,START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3,setStart:setStart,setEnd:setEnd,setStartBefore:setStartBefore,setStartAfter:function(n){setStart(n.parentNode,nodeIndex(n)+1)},setEndBefore:function(n){setEnd(n.parentNode,nodeIndex(n))},setEndAfter:setEndAfter,collapse:function(ts){ts?(t[END_CONTAINER]=t[START_CONTAINER],t[END_OFFSET]=t[START_OFFSET]):(t[START_CONTAINER]=t[END_CONTAINER],t[START_OFFSET]=t[END_OFFSET]),t.collapsed=TRUE},selectNode:function(n){setStartBefore(n),setEndAfter(n)},selectNodeContents:function(n){setStart(n,0),setEnd(n,1===n.nodeType?n.childNodes.length:n.nodeValue.length)},compareBoundaryPoints:function(h,r){var sc=t[START_CONTAINER],so=t[START_OFFSET],ec=t[END_CONTAINER],eo=t[END_OFFSET],rsc=r.startContainer,rso=r.startOffset,rec=r.endContainer,reo=r.endOffset;return 0===h?_compareBoundaryPoints(sc,so,rsc,rso):1===h?_compareBoundaryPoints(ec,eo,rsc,rso):2===h?_compareBoundaryPoints(ec,eo,rec,reo):3===h?_compareBoundaryPoints(sc,so,rec,reo):void 0},deleteContents:function(){_traverse(DELETE)},extractContents:function(){return _traverse(EXTRACT)},cloneContents:function(){return _traverse(CLONE)},insertNode:function(n){var nn,o,startContainer=this[START_CONTAINER],startOffset=this[START_OFFSET];3!==startContainer.nodeType&&4!==startContainer.nodeType||!startContainer.nodeValue?(startContainer.childNodes.length>0&&(o=startContainer.childNodes[startOffset]),o?startContainer.insertBefore(n,o):startContainer.appendChild(n)):startOffset?startOffset>=startContainer.nodeValue.length?dom.insertAfter(n,startContainer):(nn=startContainer.splitText(startOffset),startContainer.parentNode.insertBefore(n,nn)):startContainer.parentNode.insertBefore(n,startContainer)},surroundContents:function(n){var f=t.extractContents();t.insertNode(n),n.appendChild(f),t.selectNode(n)},cloneRange:function(){return extend(new Range(dom),{startContainer:t[START_CONTAINER],startOffset:t[START_OFFSET],endContainer:t[END_CONTAINER],endOffset:t[END_OFFSET],collapsed:t.collapsed,commonAncestorContainer:t.commonAncestorContainer})}})}}(),function(){tinymce.dom.TridentSelection=function(selection){var self=this,dom=selection.dom,TRUE=!0;function getPosition(rng,start){var checkRng,endIndex,inside,children,child,offset,index,parent,startIndex=0,position=-1;if((checkRng=rng.duplicate()).collapse(start),(parent=checkRng.parentElement()).ownerDocument===selection.dom.doc){for(;"false"===parent.contentEditable;)parent=parent.parentNode;if(!parent.hasChildNodes())return{node:parent,inside:1};for(endIndex=(children=parent.children).length-1;startIndex<=endIndex;)if(child=children[index=Math.floor((startIndex+endIndex)/2)],checkRng.moveToElementText(child),(position=checkRng.compareEndPoints(start?"StartToStart":"EndToEnd",rng))>0)endIndex=index-1;else{if(!(position<0))return{node:child};startIndex=index+1}if(position<0){if(child?checkRng.collapse(!1):(checkRng.moveToElementText(parent),checkRng.collapse(!0),child=parent,inside=!0),checkRng.setEndPoint(start?"EndToStart":"EndToEnd",rng),checkRng.compareEndPoints(start?"StartToStart":"StartToEnd",rng)>0)for((checkRng=rng.duplicate()).collapse(start),offset=-1;parent==checkRng.parentElement()&&0!=checkRng.move("character",-1);)offset++;offset=offset||checkRng.text.replace("\r\n"," ").length}else checkRng.collapse(!0),checkRng.setEndPoint(start?"StartToStart":"StartToEnd",rng),offset=checkRng.text.replace("\r\n"," ").length;return{node:child,position:position,offset:offset,inside:inside}}}this.getBookmark=function(type){var rng=selection.getRng(),bookmark={};function getIndexes(node){var parent,root,children,i,indexes=[];for(parent=node.parentNode,root=dom.getRoot().parentNode;parent!=root;){for(i=(children=parent.children).length;i--;)if(node===children[i]){indexes.push(i);break}node=parent,parent=parent.parentNode}return indexes}function getBookmarkEndPoint(start){var position;if(position=getPosition(rng,start))return{position:position.position,offset:position.offset,indexes:getIndexes(position.node),inside:position.inside}}return 2===type&&(rng.item?bookmark.start={ctrl:!0,indexes:getIndexes(rng.item(0))}:(bookmark.start=getBookmarkEndPoint(!0),selection.isCollapsed()||(bookmark.end=getBookmarkEndPoint()))),bookmark},this.moveToBookmark=function(bookmark){var rng,body=dom.doc.body;function resolveIndexes(indexes){var node,i,idx,children;for(node=dom.getRoot(),i=indexes.length-1;i>=0;i--)children=node.children,(idx=indexes[i])<=children.length-1&&(node=children[idx]);return node}function setBookmarkEndPoint(start){var moveLeft,moveRng,endPoint=bookmark[start?"start":"end"];endPoint&&(moveLeft=endPoint.position>0,(moveRng=body.createTextRange()).moveToElementText(resolveIndexes(endPoint.indexes)),offset=endPoint.offset,void 0!==offset?(moveRng.collapse(endPoint.inside||moveLeft),moveRng.moveStart("character",moveLeft?-offset:offset)):moveRng.collapse(start),rng.setEndPoint(start?"StartToStart":"EndToStart",moveRng),start&&rng.collapse(!0))}bookmark.start&&(bookmark.start.ctrl?((rng=body.createControlRange()).addElement(resolveIndexes(bookmark.start.indexes)),rng.select()):(rng=body.createTextRange(),setBookmarkEndPoint(!0),setBookmarkEndPoint(),rng.select()))},this.addRange=function(rng){var ieRng,ctrlRng,startContainer,startOffset,endContainer,endOffset,doc=selection.dom.doc,body=doc.body;function setEndPoint(start){var container,offset,marker,tmpRng,nodes;marker=dom.create("a"),container=start?startContainer:endContainer,offset=start?startOffset:endOffset,tmpRng=ieRng.duplicate(),container!=doc&&container!=doc.documentElement||(container=body,offset=0),3==container.nodeType?(container.parentNode.insertBefore(marker,container),tmpRng.moveToElementText(marker),tmpRng.moveStart("character",offset),dom.remove(marker),ieRng.setEndPoint(start?"StartToStart":"EndToEnd",tmpRng)):((nodes=container.childNodes).length?(offset>=nodes.length?dom.insertAfter(marker,nodes[nodes.length-1]):container.insertBefore(marker,nodes[offset]),tmpRng.moveToElementText(marker)):(marker=doc.createTextNode("\ufeff"),container.appendChild(marker),tmpRng.moveToElementText(marker.parentNode),tmpRng.collapse(TRUE)),ieRng.setEndPoint(start?"StartToStart":"EndToEnd",tmpRng),dom.remove(marker))}if(startContainer=rng.startContainer,startOffset=rng.startOffset,endContainer=rng.endContainer,endOffset=rng.endOffset,ieRng=body.createTextRange(),startContainer==endContainer&&1==startContainer.nodeType&&startOffset==endOffset-1&&startOffset==endOffset-1)try{return(ctrlRng=body.createControlRange()).addElement(startContainer.childNodes[startOffset]),void ctrlRng.select()}catch(ex){}setEndPoint(!0),setEndPoint(),ieRng.select()},this.getRangeAt=function(){var element,collapsed,tmpRange,element2,bookmark,ieRange=selection.getRng(),domRange=dom.createRng();if((element=ieRange.item?ieRange.item(0):ieRange.parentElement()).ownerDocument!=dom.doc)return domRange;if(collapsed=selection.isCollapsed(),ieRange.item)return domRange.setStart(element.parentNode,dom.nodeIndex(element)),domRange.setEnd(domRange.startContainer,domRange.startOffset+1),domRange;function findEndPoint(start){var container,offset,sibling,nodeValue,endPoint=getPosition(ieRange,start),textNodeOffset=0;if(container=endPoint.node,offset=endPoint.offset,!endPoint.inside||container.hasChildNodes())if(void 0!==offset){if(endPoint.position<0){if(!(sibling=endPoint.inside?container.firstChild:container.nextSibling))return void domRange[start?"setStartAfter":"setEndAfter"](container);if(!offset)return void(3==sibling.nodeType?domRange[start?"setStart":"setEnd"](sibling,0):domRange[start?"setStartBefore":"setEndBefore"](sibling));for(;sibling;){if((textNodeOffset+=(nodeValue=sibling.nodeValue).length)>=offset){container=sibling,textNodeOffset-=offset,textNodeOffset=nodeValue.length-textNodeOffset;break}sibling=sibling.nextSibling}}else{if(!(sibling=container.previousSibling))return domRange[start?"setStartBefore":"setEndBefore"](container);if(!offset)return void(3==container.nodeType?domRange[start?"setStart":"setEnd"](sibling,container.nodeValue.length):domRange[start?"setStartAfter":"setEndAfter"](sibling));for(;sibling;){if((textNodeOffset+=sibling.nodeValue.length)>=offset){container=sibling,textNodeOffset-=offset;break}sibling=sibling.previousSibling}}domRange[start?"setStart":"setEnd"](container,textNodeOffset)}else domRange[start?"setStartBefore":"setEndAfter"](container);else domRange[start?"setStart":"setEnd"](container,0)}try{findEndPoint(!0),collapsed||findEndPoint()}catch(ex){if(-2147024809!=ex.number)throw ex;bookmark=self.getBookmark(2),(tmpRange=ieRange.duplicate()).collapse(!0),element=tmpRange.parentElement(),collapsed||((tmpRange=ieRange.duplicate()).collapse(!1),(element2=tmpRange.parentElement()).innerHTML=element2.innerHTML),element.innerHTML=element.innerHTML,self.moveToBookmark(bookmark),ieRange=selection.getRng(),findEndPoint(!0),collapsed||findEndPoint()}return domRange}}}(),function(tinymce){var Event,each=tinymce.each,DOM=tinymce.DOM,isIE=tinymce.isIE;tinymce.isWebKit;tinymce.create("tinymce.dom.EventUtils",{EventUtils:function(){this.inits=[],this.events=[]},add:function(o,n,f,s){var cb,r,t=this,el=t.events;return n instanceof Array?(r=[],each(n,function(n){r.push(t.add(o,n,f,s))}),r):o&&o.hasOwnProperty&&o instanceof Array?(r=[],each(o,function(o){o=DOM.get(o),r.push(t.add(o,n,f,s))}),r):(o=DOM.get(o))?(cb=function(e){if(!t.disabled)return(e=e||window.event)&&isIE&&(e.target||(e.target=e.srcElement),tinymce.extend(e,t._stoppers)),s?f.call(s,e):f(e)},"unload"==n?(tinymce.unloads.unshift({func:cb}),cb):"init"==n?(t.domLoaded?cb():t.inits.push(cb),cb):(el.push({obj:o,name:n,func:f,cfunc:cb,scope:s}),t._add(o,n,cb),f)):void 0},remove:function(o,n,f){var r,t=this,a=t.events,s=!1;return o&&o.hasOwnProperty&&o instanceof Array?(r=[],each(o,function(o){o=DOM.get(o),r.push(t.remove(o,n,f))}),r):(o=DOM.get(o),each(a,function(e,i){if(e.obj==o&&e.name==n&&(!f||e.func==f||e.cfunc==f))return a.splice(i,1),t._remove(o,n,e.cfunc),s=!0,!1}),s)},clear:function(o){var i,e,a=this.events;if(o)for(o=DOM.get(o),i=a.length-1;i>=0;i--)(e=a[i]).obj===o&&(this._remove(e.obj,e.name,e.cfunc),e.obj=e.cfunc=null,a.splice(i,1))},cancel:function(e){return!!e&&(this.stop(e),this.prevent(e))},stop:function(e){return e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,!1},prevent:function(e){return e.preventDefault?e.preventDefault():e.returnValue=!1,!1},destroy:function(){var t=this;each(t.events,function(e,i){t._remove(e.obj,e.name,e.cfunc),e.obj=e.cfunc=null}),t.events=[],t=null},_add:function(o,n,f){o.attachEvent?o.attachEvent("on"+n,f):o.addEventListener?o.addEventListener(n,f,!1):o["on"+n]=f},_remove:function(o,n,f){if(o)try{o.detachEvent?o.detachEvent("on"+n,f):o.removeEventListener?o.removeEventListener(n,f,!1):o["on"+n]=null}catch(ex){}},_pageInit:function(win){var t=this;t.domLoaded||(t.domLoaded=!0,each(t.inits,function(c){c()}),t.inits=[])},_wait:function(win){var t=this,doc=win.document;win.tinyMCE_GZ&&tinyMCE_GZ.loaded?t.domLoaded=1:(doc.attachEvent?(doc.attachEvent("onreadystatechange",function(){"complete"===doc.readyState&&(doc.detachEvent("onreadystatechange",arguments.callee),t._pageInit(win))}),doc.documentElement.doScroll&&win==win.top&&function(){if(!t.domLoaded){try{doc.documentElement.doScroll("left")}catch(ex){return void setTimeout(arguments.callee,0)}t._pageInit(win)}}()):doc.addEventListener&&t._add(win,"DOMContentLoaded",function(){t._pageInit(win)}),t._add(win,"load",function(){t._pageInit(win)}))},_stoppers:{preventDefault:function(){this.returnValue=!1},stopPropagation:function(){this.cancelBubble=!0}}}),(Event=tinymce.dom.Event=new tinymce.dom.EventUtils)._wait(window),tinymce.addUnload(function(){Event.destroy()})}(tinymce),function(tinymce){tinymce.dom.Element=function(id,settings){var dom,t=this;t.settings=settings=settings||{},t.id=id,t.dom=dom=settings.dom||tinymce.DOM,tinymce.isIE||dom.get(t.id),tinymce.each("getPos,getRect,getParent,add,setStyle,getStyle,setStyles,setAttrib,setAttribs,getAttrib,addClass,removeClass,hasClass,getOuterHTML,setOuterHTML,remove,show,hide,isHidden,setHTML,get".split(/,/),function(k){t[k]=function(){var i,a=[id];for(i=0;i<arguments.length;i++)a.push(arguments[i]);return a=dom[k].apply(dom,a),t.update(k),a}}),tinymce.extend(t,{on:function(n,f,s){return tinymce.dom.Event.add(t.id,n,f,s)},getXY:function(){return{x:parseInt(t.getStyle("left")),y:parseInt(t.getStyle("top"))}},getSize:function(){var n=dom.get(t.id);return{w:parseInt(t.getStyle("width")||n.clientWidth),h:parseInt(t.getStyle("height")||n.clientHeight)}},moveTo:function(x,y){t.setStyles({left:x,top:y})},moveBy:function(x,y){var p=t.getXY();t.moveTo(p.x+x,p.y+y)},resizeTo:function(w,h){t.setStyles({width:w,height:h})},resizeBy:function(w,h){var s=t.getSize();t.resizeTo(s.w+w,s.h+h)},update:function(k){var b;if(tinymce.isIE6&&settings.blocker){if(0===(k=k||"").indexOf("get")||0===k.indexOf("has")||0===k.indexOf("is"))return;if("remove"==k)return void dom.remove(t.blocker);t.blocker?b=dom.get(t.blocker):(t.blocker=dom.uniqueId(),b=dom.add(settings.container||dom.getRoot(),"iframe",{id:t.blocker,style:"position:absolute;",frameBorder:0,src:'javascript:""'}),dom.setStyle(b,"opacity",0)),dom.setStyles(b,{left:t.getStyle("left",1),top:t.getStyle("top",1),width:t.getStyle("width",1),height:t.getStyle("height",1),display:t.getStyle("display",1),zIndex:parseInt(t.getStyle("zIndex",1)||0)-1})}}})}}(tinymce),function(tinymce){var is=tinymce.is,isIE=tinymce.isIE,each=tinymce.each;tinymce.create("tinymce.dom.Selection",{Selection:function(dom,win,serializer){var t=this;t.dom=dom,t.win=win,t.serializer=serializer,each(["onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent"],function(e){t[e]=new tinymce.util.Dispatcher(t)}),t.win.getSelection||(t.tridentSel=new tinymce.dom.TridentSelection(t)),tinymce.isIE&&dom.boxModel&&this._fixIESelection(),tinymce.addUnload(t.destroy,t)},getContent:function(s){var wb,wa,n,t=this,r=t.getRng(),e=t.dom.create("body"),se=t.getSel();return wb=wa="",(s=s||{}).get=!0,s.format=s.format||"html",s.forced_root_block="",t.onBeforeGetContent.dispatch(t,s),"text"==s.format?t.isCollapsed()?"":r.text||(se.toString?se.toString():""):(r.cloneContents?(n=r.cloneContents())&&e.appendChild(n):is(r.item)||is(r.htmlText)?e.innerHTML=r.item?r.item(0).outerHTML:r.htmlText:e.innerHTML=r.toString(),/^\s/.test(e.innerHTML)&&(wb=" "),/\s+$/.test(e.innerHTML)&&(wa=" "),s.getInner=!0,s.content=t.isCollapsed()?"":wb+t.serializer.serialize(e,s)+wa,t.onGetContent.dispatch(t,s),s.content)},setContent:function(content,args){var caretNode,frag,temp,rng=this.getRng(),doc=this.win.document;if((args=args||{format:"html"}).set=!0,content=args.content=content,args.no_events||this.onBeforeSetContent.dispatch(this,args),content=args.content,rng.insertNode){content+='<span id="__caret">_</span>',rng.startContainer==doc&&rng.endContainer==doc?doc.body.innerHTML=content:(rng.deleteContents(),0==doc.body.childNodes.length?doc.body.innerHTML=content:rng.createContextualFragment?rng.insertNode(rng.createContextualFragment(content)):(frag=doc.createDocumentFragment(),temp=doc.createElement("div"),frag.appendChild(temp),temp.outerHTML=content,rng.insertNode(frag))),caretNode=this.dom.get("__caret"),(rng=doc.createRange()).setStartBefore(caretNode),rng.setEndBefore(caretNode),this.setRng(rng),this.dom.remove("__caret");try{this.setRng(rng)}catch(ex){}}else rng.item&&(doc.execCommand("Delete",!1,null),rng=this.getRng()),rng.pasteHTML(content);args.no_events||this.onSetContent.dispatch(this,args)},getStart:function(){var startElement,parentElement,checkRng,node,rng=this.getRng();if(rng.duplicate||rng.item){if(rng.item)return rng.item(0);for((checkRng=rng.duplicate()).collapse(1),startElement=checkRng.parentElement(),parentElement=node=rng.parentElement();node=node.parentNode;)if(node==startElement){startElement=parentElement;break}return startElement}return 1==(startElement=rng.startContainer).nodeType&&startElement.hasChildNodes()&&(startElement=startElement.childNodes[Math.min(startElement.childNodes.length-1,rng.startOffset)]),startElement&&3==startElement.nodeType?startElement.parentNode:startElement},getEnd:function(){var e,eo,r=this.getRng();return r.duplicate||r.item?r.item?r.item(0):((r=r.duplicate()).collapse(0),(e=r.parentElement())&&"BODY"==e.nodeName&&e.lastChild||e):(e=r.endContainer,eo=r.endOffset,1==e.nodeType&&e.hasChildNodes()&&(e=e.childNodes[eo>0?eo-1:eo]),e&&3==e.nodeType?e.parentNode:e)},getBookmark:function(type,normalized){var rng,rng2,id,collapsed,name,element,styles,t=this,dom=t.dom,chr="\ufeff";function findIndex(name,element){var index=0;return each(dom.select(name),function(node,i){node==element&&(index=i)}),index}if(2==type){return t.tridentSel?t.tridentSel.getBookmark(type):function(){var rng=t.getRng(!0),root=dom.getRoot(),bookmark={};function getPoint(rng,start){var node,childNodes,container=rng[start?"startContainer":"endContainer"],offset=rng[start?"startOffset":"endOffset"],point=[],after=0;if(3==container.nodeType){if(normalized)for(node=container.previousSibling;node&&3==node.nodeType;node=node.previousSibling)offset+=node.nodeValue.length;point.push(offset)}else offset>=(childNodes=container.childNodes).length&&childNodes.length&&(after=1,offset=Math.max(0,childNodes.length-1)),point.push(t.dom.nodeIndex(childNodes[offset],normalized)+after);for(;container&&container!=root;container=container.parentNode)point.push(t.dom.nodeIndex(container,normalized));return point}return bookmark.start=getPoint(rng,!0),t.isCollapsed()||(bookmark.end=getPoint(rng)),bookmark}()}if(type)return{rng:t.getRng()};if(rng=t.getRng(),id=dom.uniqueId(),collapsed=tinyMCE.activeEditor.selection.isCollapsed(),styles="overflow:hidden;line-height:0px",rng.duplicate||rng.item){if(rng.item)return{name:name=(element=rng.item(0)).nodeName,index:findIndex(name,element)};rng2=rng.duplicate();try{rng.collapse(),rng.pasteHTML('<span data-mce-type="bookmark" id="'+id+'_start" style="'+styles+'">'+chr+"</span>"),collapsed||(rng2.collapse(!1),rng.moveToElementText(rng2.parentElement()),0==rng.compareEndPoints("StartToEnd",rng2)&&rng2.move("character",-1),rng2.pasteHTML('<span data-mce-type="bookmark" id="'+id+'_end" style="'+styles+'">'+chr+"</span>"))}catch(ex){return null}}else{if("IMG"==(name=(element=t.getNode()).nodeName))return{name:name,index:findIndex(name,element)};rng2=rng.cloneRange(),collapsed||(rng2.collapse(!1),rng2.insertNode(dom.create("span",{"data-mce-type":"bookmark",id:id+"_end",style:styles},chr))),rng.collapse(!0),rng.insertNode(dom.create("span",{"data-mce-type":"bookmark",id:id+"_start",style:styles},chr))}return t.moveToBookmark({id:id,keep:1}),{id:id}},moveToBookmark:function(bookmark){var rng,root,startContainer,endContainer,startOffset,endOffset,t=this,dom=t.dom;if(bookmark)if(bookmark.start){var setEndPoint=function(start){var i,node,offset,children,point=bookmark[start?"start":"end"];if(point){for(offset=point[0],node=root,i=point.length-1;i>=1;i--){if(children=node.childNodes,point[i]>children.length-1)return;node=children[point[i]]}3===node.nodeType&&(offset=Math.min(point[0],node.nodeValue.length)),1===node.nodeType&&(offset=Math.min(point[0],node.childNodes.length)),start?rng.setStart(node,offset):rng.setEnd(node,offset)}return!0};if(rng=dom.createRng(),root=dom.getRoot(),t.tridentSel)return t.tridentSel.moveToBookmark(bookmark);setEndPoint(!0)&&setEndPoint()&&t.setRng(rng)}else if(bookmark.id){var restoreEndPoint=function(suffix){var node,idx,next,prev,marker=dom.get(bookmark.id+"_"+suffix),keep=bookmark.keep;if(marker&&(node=marker.parentNode,"start"==suffix?(keep?(node=marker.firstChild,idx=1):idx=dom.nodeIndex(marker),startContainer=endContainer=node,startOffset=endOffset=idx):(keep?(node=marker.firstChild,idx=1):idx=dom.nodeIndex(marker),endContainer=node,endOffset=idx),!keep)){for(prev=marker.previousSibling,next=marker.nextSibling,each(tinymce.grep(marker.childNodes),function(node){3==node.nodeType&&(node.nodeValue=node.nodeValue.replace(/\uFEFF/g,""))});marker=dom.get(bookmark.id+"_"+suffix);)dom.remove(marker,1);prev&&next&&prev.nodeType==next.nodeType&&3==prev.nodeType&&!tinymce.isOpera&&(idx=prev.nodeValue.length,prev.appendData(next.nodeValue),dom.remove(next),"start"==suffix?(startContainer=endContainer=prev,startOffset=endOffset=idx):(endContainer=prev,endOffset=idx))}},addBogus=function(node){return dom.isBlock(node)&&!node.innerHTML&&(node.innerHTML=isIE?" ":'<br data-mce-bogus="1" />'),node};restoreEndPoint("start"),restoreEndPoint("end"),startContainer&&((rng=dom.createRng()).setStart(addBogus(startContainer),startOffset),rng.setEnd(addBogus(endContainer),endOffset),t.setRng(rng))}else bookmark.name?t.select(dom.select(bookmark.name)[bookmark.index]):bookmark.rng&&t.setRng(bookmark.rng)},select:function(node,content){var idx,dom=this.dom,rng=dom.createRng();if(node){if(idx=dom.nodeIndex(node),rng.setStart(node.parentNode,idx),rng.setEnd(node.parentNode,idx+1),content){var setPoint=function(node,start){var walker=new tinymce.dom.TreeWalker(node,node);do{if(3==node.nodeType&&0!=tinymce.trim(node.nodeValue).length)return void(start?rng.setStart(node,0):rng.setEnd(node,node.nodeValue.length));if("BR"==node.nodeName)return void(start?rng.setStartBefore(node):rng.setEndBefore(node))}while(node=start?walker.next():walker.prev())};setPoint(node,1),setPoint(node)}this.setRng(rng)}return node},isCollapsed:function(){var r=this.getRng(),s=this.getSel();return!(!r||r.item)&&(r.compareEndPoints?0===r.compareEndPoints("StartToEnd",r):!s||r.collapsed)},collapse:function(to_start){var node,rng=this.getRng();rng.item&&(node=rng.item(0),(rng=this.win.document.body.createTextRange()).moveToElementText(node)),rng.collapse(!!to_start),this.setRng(rng)},getSel:function(){var w=this.win;return w.getSelection?w.getSelection():w.document.selection},getRng:function(w3c){var s,r,elm,t=this,doc=t.win.document;if(w3c&&t.tridentSel)return t.tridentSel.getRangeAt(0);try{(s=t.getSel())&&(r=s.rangeCount>0?s.getRangeAt(0):s.createRange?s.createRange():doc.createRange())}catch(ex){}return tinymce.isIE&&r&&r.setStart&&doc.selection.createRange().item&&(elm=doc.selection.createRange().item(0),(r=doc.createRange()).setStartBefore(elm),r.setEndAfter(elm)),r||(r=doc.createRange?doc.createRange():doc.body.createTextRange()),t.selectedRange&&t.explicitRange&&(0===r.compareBoundaryPoints(r.START_TO_START,t.selectedRange)&&0===r.compareBoundaryPoints(r.END_TO_END,t.selectedRange)?r=t.explicitRange:(t.selectedRange=null,t.explicitRange=null)),r},setRng:function(r){var s,t=this;if(t.tridentSel){if(r.cloneRange)return void t.tridentSel.addRange(r);try{r.select()}catch(ex){}}else if(s=t.getSel()){t.explicitRange=r;try{s.removeAllRanges()}catch(ex){}s.addRange(r),t.selectedRange=s.getRangeAt(0)}},setNode:function(n){return this.setContent(this.dom.getOuterHTML(n)),n},getNode:function(){var elm,t=this,rng=t.getRng(),start=(t.getSel(),rng.startContainer),end=rng.endContainer;if(!rng)return t.dom.getRoot();if(rng.setStart){if(elm=rng.commonAncestorContainer,!rng.collapsed&&(rng.startContainer==rng.endContainer&&rng.endOffset-rng.startOffset<2&&rng.startContainer.hasChildNodes()&&(elm=rng.startContainer.childNodes[rng.startOffset]),3===start.nodeType&&3===end.nodeType)){var skipEmptyTextNodes=function(n,forwards){for(var orig=n;n&&3===n.nodeType&&0===n.length;)n=forwards?n.nextSibling:n.previousSibling;return n||orig};if(start=start.length===rng.startOffset?skipEmptyTextNodes(start.nextSibling,!0):start.parentNode,end=0===rng.endOffset?skipEmptyTextNodes(end.previousSibling,!1):end.parentNode,start&&start===end)return start}return elm&&3==elm.nodeType?elm.parentNode:elm}return rng.item?rng.item(0):rng.parentElement()},getSelectedBlocks:function(st,en){var sb,eb,n,t=this,dom=t.dom,bl=[];if(sb=dom.getParent(st||t.getStart(),dom.isBlock),eb=dom.getParent(en||t.getEnd(),dom.isBlock),sb&&bl.push(sb),sb&&eb&&sb!=eb)for(n=sb;(n=n.nextSibling)&&n!=eb;)dom.isBlock(n)&&bl.push(n);return eb&&sb!=eb&&bl.push(eb),bl},destroy:function(s){this.win=null,s||tinymce.removeUnload(this.destroy)},_fixIESelection:function(){var started,startRng,htmlElm,dom=this.dom,doc=dom.doc,body=doc.body;function rngFromPoint(x,y){var rng=body.createTextRange();try{rng.moveToPoint(x,y)}catch(ex){rng=null}return rng}function selectionChange(e){var pointRng;e.button?(pointRng=rngFromPoint(e.x,e.y))&&(pointRng.compareEndPoints("StartToStart",startRng)>0?pointRng.setEndPoint("StartToStart",startRng):pointRng.setEndPoint("EndToEnd",startRng),pointRng.select()):endSelection()}function endSelection(){var rng=doc.selection.createRange();startRng&&!rng.item&&0===rng.compareEndPoints("StartToEnd",rng)&&startRng.select(),dom.unbind(doc,"mouseup",endSelection),dom.unbind(doc,"mousemove",selectionChange),startRng=started=0}doc.documentElement.unselectable=!0,dom.bind(doc,["mousedown","contextmenu"],function(e){if("HTML"===e.target.nodeName){if(started&&endSelection(),(htmlElm=doc.documentElement).scrollHeight>htmlElm.clientHeight)return;started=1,(startRng=rngFromPoint(e.x,e.y))&&(dom.bind(doc,"mouseup",endSelection),dom.bind(doc,"mousemove",selectionChange),dom.win.focus(),startRng.select())}})}})}(tinymce),function(tinymce){tinymce.dom.Serializer=function(settings,dom,schema){var onPreProcess,onPostProcess,htmlParser,isIE=tinymce.isIE,each=tinymce.each;return settings.apply_source_formatting||(settings.indent=!1),settings.remove_trailing_brs=!0,dom=dom||tinymce.DOM,schema=schema||new tinymce.html.Schema(settings),settings.entity_encoding=settings.entity_encoding||"named",onPreProcess=new tinymce.util.Dispatcher(self),onPostProcess=new tinymce.util.Dispatcher(self),(htmlParser=new tinymce.html.DomParser(settings,schema)).addAttributeFilter("src,href,style",function(nodes,name){for(var node,value,i=nodes.length,internalName="data-mce-"+name,urlConverter=settings.url_converter,urlConverterScope=settings.url_converter_scope;i--;)void 0!==(value=(node=nodes[i]).attributes.map[internalName])?(node.attr(name,value.length>0?value:null),node.attr(internalName,null)):(value=node.attributes.map[name],"style"===name?value=dom.serializeStyle(dom.parseStyle(value),node.name):urlConverter&&(value=urlConverter.call(urlConverterScope,value,name,node.name)),node.attr(name,value.length>0?value:null))}),htmlParser.addAttributeFilter("class",function(nodes,name){for(var node,value,i=nodes.length;i--;)value=(node=nodes[i]).attr("class").replace(/\s*mce(Item\w+|Selected)\s*/g,""),node.attr("class",value.length>0?value:null)}),htmlParser.addAttributeFilter("data-mce-type",function(nodes,name,args){for(var node,i=nodes.length;i--;)"bookmark"!==(node=nodes[i]).attributes.map["data-mce-type"]||args.cleanup||node.remove()}),htmlParser.addNodeFilter("script,style",function(nodes,name){var node,value,i=nodes.length;function trim(value){return value.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*(\/\/\s*<!--|\/\/\s*<!\[CDATA\[|<!--|<!\[CDATA\[)[\r\n]*/g,"").replace(/\s*(\/\/\s*\]\]>|\/\/\s*-->|\]\]>|-->|\]\]-->)\s*$/g,"")}for(;i--;)value=(node=nodes[i]).firstChild?node.firstChild.value:"","script"===name?(node.attr("type",(node.attr("type")||"text/javascript").replace(/^mce\-/,"")),value.length>0&&(node.firstChild.value="// <![CDATA[\n"+trim(value)+"\n// ]]>")):value.length>0&&(node.firstChild.value="\x3c!--\n"+trim(value)+"\n--\x3e")}),htmlParser.addNodeFilter("#comment",function(nodes,name){for(var node,i=nodes.length;i--;)0===(node=nodes[i]).value.indexOf("[CDATA[")?(node.name="#cdata",node.type=4,node.value=node.value.replace(/^\[CDATA\[|\]\]$/g,"")):0===node.value.indexOf("mce:protected ")&&(node.name="#text",node.type=3,node.raw=!0,node.value=unescape(node.value).substr(14))}),htmlParser.addNodeFilter("xml:namespace,input",function(nodes,name){for(var node,i=nodes.length;i--;)7===(node=nodes[i]).type?node.remove():1===node.type&&("input"!==name||"type"in node.attributes.map||node.attr("type","text"))}),settings.fix_list_elements&&htmlParser.addNodeFilter("ul,ol",function(nodes,name){for(var node,parentNode,i=nodes.length;i--;)"ul"!==(parentNode=(node=nodes[i]).parent).name&&"ol"!==parentNode.name||node.prev&&"li"===node.prev.name&&node.prev.append(node)}),htmlParser.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style",function(nodes,name){for(var i=nodes.length;i--;)nodes[i].attr(name,null)}),{schema:schema,addNodeFilter:htmlParser.addNodeFilter,addAttributeFilter:htmlParser.addAttributeFilter,onPreProcess:onPreProcess,onPostProcess:onPostProcess,serialize:function(node,args){var impl,doc,oldDoc,htmlSerializer,content;return isIE&&dom.select("script,style,select").length>0?(content=node.innerHTML,node=node.cloneNode(!1),dom.setHTML(node,content)):node=node.cloneNode(!0),(impl=node.ownerDocument.implementation).createHTMLDocument&&(doc=impl.createHTMLDocument(""),each("BODY"==node.nodeName?node.childNodes:[node],function(node){doc.body.appendChild(doc.importNode(node,!0))}),node="BODY"!=node.nodeName?doc.body.firstChild:doc.body,oldDoc=dom.doc,dom.doc=doc),(args=args||{}).format=args.format||"html",args.no_events||(args.node=node,onPreProcess.dispatch(self,args)),htmlSerializer=new tinymce.html.Serializer(settings,schema),args.content=htmlSerializer.serialize(htmlParser.parse(args.getInner?node.innerHTML:tinymce.trim(dom.getOuterHTML(node),args),args)),args.cleanup||(args.content=args.content.replace(/\uFEFF/g,"")),args.no_events||onPostProcess.dispatch(self,args),oldDoc&&(dom.doc=oldDoc),args.node=null,args.content},addRules:function(rules){schema.addValidElements(rules)},setRules:function(rules){schema.setValidElements(rules)}}}}(tinymce),function(tinymce){tinymce.dom.ScriptLoader=function(settings){var undefined,states={},queue=[],scriptLoadedCallbacks={},queueLoadedCallbacks=[],loading=0;this.isDone=function(url){return 2==states[url]},this.markDone=function(url){states[url]=2},this.add=this.load=function(url,callback,scope){states[url]==undefined&&(queue.push(url),states[url]=0),callback&&(scriptLoadedCallbacks[url]||(scriptLoadedCallbacks[url]=[]),scriptLoadedCallbacks[url].push({func:callback,scope:scope||this}))},this.loadQueue=function(callback,scope){this.loadScripts(queue,callback,scope)},this.loadScripts=function(scripts,callback,scope){var _loadScripts;function execScriptLoadedCallbacks(url){tinymce.each(scriptLoadedCallbacks[url],function(callback){callback.func.call(callback.scope)}),scriptLoadedCallbacks[url]=undefined}queueLoadedCallbacks.push({func:callback,scope:scope||this}),(_loadScripts=function(){var loadingScripts=tinymce.grep(scripts);scripts.length=0,tinymce.each(loadingScripts,function(url){2!=states[url]?1!=states[url]&&(states[url]=1,loading++,function(url,callback){var elm,uri,loc,id,dom=tinymce.DOM;function done(){dom.remove(id),elm&&(elm.onreadystatechange=elm.onload=elm=null),callback()}function error(){"undefined"!=typeof console&&console.log&&console.log("Failed to load: "+url)}id=dom.uniqueId(),tinymce.isIE6&&(uri=new tinymce.util.URI(url),loc=location,uri.host==loc.hostname&&uri.port==loc.port&&uri.protocol+":"==loc.protocol&&"file"!=uri.protocol.toLowerCase())?tinymce.util.XHR.send({url:tinymce._addVer(uri.getURI()),success:function(content){var script=dom.create("script",{type:"text/javascript"});script.text=content,document.getElementsByTagName("head")[0].appendChild(script),dom.remove(script),done()},error:error}):(elm=dom.create("script",{id:id,type:"text/javascript",src:tinymce._addVer(url)}),tinymce.isIE||(elm.onload=done),elm.onerror=error,tinymce.isOpera||(elm.onreadystatechange=function(){var state=elm.readyState;"complete"!=state&&"loaded"!=state||done()}),(document.getElementsByTagName("head")[0]||document.body).appendChild(elm))}(url,function(){states[url]=2,loading--,execScriptLoadedCallbacks(url),_loadScripts()})):execScriptLoadedCallbacks(url)}),loading||(tinymce.each(queueLoadedCallbacks,function(callback){callback.func.call(callback.scope)}),queueLoadedCallbacks.length=0)})()}},tinymce.ScriptLoader=new tinymce.dom.ScriptLoader}(tinymce),tinymce.dom.TreeWalker=function(start_node,root_node){var node=start_node;function findSibling(node,start_name,sibling_name,shallow){var sibling,parent;if(node){if(!shallow&&node[start_name])return node[start_name];if(node!=root_node){if(sibling=node[sibling_name])return sibling;for(parent=node.parentNode;parent&&parent!=root_node;parent=parent.parentNode)if(sibling=parent[sibling_name])return sibling}}}this.current=function(){return node},this.next=function(shallow){return node=findSibling(node,"firstChild","nextSibling",shallow)},this.prev=function(shallow){return node=findSibling(node,"lastChild","previousSibling",shallow)}},function(tinymce){tinymce.dom.RangeUtils=function(dom){this.walk=function(rng,callback){var ancestor,startPoint,endPoint,node,parent,siblings,nodes,startContainer=rng.startContainer,startOffset=rng.startOffset,endContainer=rng.endContainer,endOffset=rng.endOffset;if((nodes=dom.select("td.mceSelected,th.mceSelected")).length>0)tinymce.each(nodes,function(node){callback([node])});else{if(1==startContainer.nodeType&&startContainer.hasChildNodes()&&(startContainer=startContainer.childNodes[startOffset]),1==endContainer.nodeType&&endContainer.hasChildNodes()&&(endContainer=endContainer.childNodes[Math.min(endOffset-1,endContainer.childNodes.length-1)]),ancestor=dom.findCommonAncestor(startContainer,endContainer),startContainer==endContainer)return callback([startContainer]);for(node=startContainer;node;node=node.parentNode){if(node==endContainer)return walkBoundary(startContainer,ancestor,!0);if(node==ancestor)break}for(node=endContainer;node;node=node.parentNode){if(node==startContainer)return walkBoundary(endContainer,ancestor);if(node==ancestor)break}startPoint=findEndPoint(startContainer,ancestor)||startContainer,endPoint=findEndPoint(endContainer,ancestor)||endContainer,walkBoundary(startContainer,startPoint,!0),(siblings=collectSiblings(startPoint==startContainer?startPoint:startPoint.nextSibling,"nextSibling",endPoint==endContainer?endPoint.nextSibling:endPoint)).length&&callback(siblings),walkBoundary(endContainer,endPoint)}function collectSiblings(node,name,end_node){for(var siblings=[];node&&node!=end_node;node=node[name])siblings.push(node);return siblings}function findEndPoint(node,root){do{if(node.parentNode==root)return node;node=node.parentNode}while(node)}function walkBoundary(start_node,end_node,next){var siblingName=next?"nextSibling":"previousSibling";for(parent=(node=start_node).parentNode;node&&node!=end_node;node=parent)parent=node.parentNode,(siblings=collectSiblings(node==start_node?node:node[siblingName],siblingName)).length&&(next||siblings.reverse(),callback(siblings))}}},tinymce.dom.RangeUtils.compareRanges=function(rng1,rng2){if(rng1&&rng2){if(!rng1.item&&!rng1.duplicate)return rng1.startContainer==rng2.startContainer&&rng1.startOffset==rng2.startOffset;if(rng1.item&&rng2.item&&rng1.item(0)===rng2.item(0))return!0;if(rng1.isEqual&&rng2.isEqual&&rng2.isEqual(rng1))return!0}return!1}}(tinymce),function(tinymce){var Event=tinymce.dom.Event,each=tinymce.each;tinymce.create("tinymce.ui.KeyboardNavigation",{KeyboardNavigation:function(settings,dom){var itemFocussed,itemBlurred,rootKeydown,rootFocussed,focussedId,t=this,root=settings.root,items=settings.items,enableUpDown=settings.enableUpDown,enableLeftRight=settings.enableLeftRight||!settings.enableUpDown,excludeFromTabOrder=settings.excludeFromTabOrder;dom=dom||tinymce.DOM,itemFocussed=function(evt){focussedId=evt.target.id},itemBlurred=function(evt){dom.setAttrib(evt.target.id,"tabindex","-1")},rootFocussed=function(evt){var item=dom.get(focussedId);dom.setAttrib(item,"tabindex","0"),item.focus()},t.focus=function(){dom.get(focussedId).focus()},t.destroy=function(){each(items,function(item){dom.unbind(dom.get(item.id),"focus",itemFocussed),dom.unbind(dom.get(item.id),"blur",itemBlurred)}),dom.unbind(dom.get(root),"focus",rootFocussed),dom.unbind(dom.get(root),"keydown",rootKeydown),items=dom=root=t.focus=itemFocussed=itemBlurred=rootKeydown=rootFocussed=null,t.destroy=function(){}},t.moveFocus=function(dir,evt){var newFocus,idx=-1;t.controls;focussedId&&(each(items,function(item,index){if(item.id===focussedId)return idx=index,!1}),(idx+=dir)<0?idx=items.length-1:idx>=items.length&&(idx=0),newFocus=items[idx],dom.setAttrib(focussedId,"tabindex","-1"),dom.setAttrib(newFocus.id,"tabindex","0"),dom.get(newFocus.id).focus(),settings.actOnFocus&&settings.onAction(newFocus.id),evt&&Event.cancel(evt))},rootKeydown=function(evt){switch(evt.keyCode){case 37:enableLeftRight&&t.moveFocus(-1);break;case 39:enableLeftRight&&t.moveFocus(1);break;case 38:enableUpDown&&t.moveFocus(-1);break;case 40:enableUpDown&&t.moveFocus(1);break;case 27:settings.onCancel&&(settings.onCancel(),Event.cancel(evt));break;case 14:case 13:case 32:settings.onAction&&(settings.onAction(focussedId),Event.cancel(evt))}},each(items,function(item,idx){var tabindex;item.id||(item.id=dom.uniqueId("_mce_item_")),excludeFromTabOrder?(dom.bind(item.id,"blur",itemBlurred),tabindex="-1"):tabindex=0===idx?"0":"-1",dom.setAttrib(item.id,"tabindex",tabindex),dom.bind(dom.get(item.id),"focus",itemFocussed)}),items[0]&&(focussedId=items[0].id),dom.setAttrib(root,"tabindex","-1"),dom.bind(dom.get(root),"focus",rootFocussed),dom.bind(dom.get(root),"keydown",rootKeydown)}})}(tinymce),function(tinymce){var DOM=tinymce.DOM,is=tinymce.is;tinymce.create("tinymce.ui.Control",{Control:function(id,s,editor){this.id=id,this.settings=s=s||{},this.rendered=!1,this.onRender=new tinymce.util.Dispatcher(this),this.classPrefix="",this.scope=s.scope||this,this.disabled=0,this.active=0,this.editor=editor},setAriaProperty:function(property,value){var element=DOM.get(this.id+"_aria")||DOM.get(this.id);element&&DOM.setAttrib(element,"aria-"+property,!!value)},focus:function(){DOM.get(this.id).focus()},setDisabled:function(s){s!=this.disabled&&(this.setAriaProperty("disabled",s),this.setState("Disabled",s),this.setState("Enabled",!s),this.disabled=s)},isDisabled:function(){return this.disabled},setActive:function(s){s!=this.active&&(this.setState("Active",s),this.active=s,this.setAriaProperty("pressed",s))},isActive:function(){return this.active},setState:function(c,s){var n=DOM.get(this.id);c=this.classPrefix+c,s?DOM.addClass(n,c):DOM.removeClass(n,c)},isRendered:function(){return this.rendered},renderHTML:function(){},renderTo:function(n){DOM.setHTML(n,this.renderHTML())},postRender:function(){var b,t=this;is(t.disabled)&&(b=t.disabled,t.disabled=-1,t.setDisabled(b)),is(t.active)&&(b=t.active,t.active=-1,t.setActive(b))},remove:function(){DOM.remove(this.id),this.destroy()},destroy:function(){tinymce.dom.Event.clear(this.id)}})}(tinymce),tinymce.create("tinymce.ui.Container:tinymce.ui.Control",{Container:function(id,s,editor){this.parent(id,s,editor),this.controls=[],this.lookup={}},add:function(c){return this.lookup[c.id]=c,this.controls.push(c),c},get:function(n){return this.lookup[n]}}),tinymce.create("tinymce.ui.Separator:tinymce.ui.Control",{Separator:function(id,s){this.parent(id,s),this.classPrefix="mceSeparator",this.setDisabled(!0)},renderHTML:function(){return tinymce.DOM.createHTML("span",{class:this.classPrefix,role:"separator","aria-orientation":"vertical",tabindex:"-1"})}}),function(tinymce){var is=tinymce.is;tinymce.DOM,tinymce.each,tinymce.walk;tinymce.create("tinymce.ui.MenuItem:tinymce.ui.Control",{MenuItem:function(id,s){this.parent(id,s),this.classPrefix="mceMenuItem"},setSelected:function(s){this.setState("Selected",s),this.setAriaProperty("checked",!!s),this.selected=s},isSelected:function(){return this.selected},postRender:function(){var t=this;t.parent(),is(t.selected)&&t.setSelected(t.selected)}})}(tinymce),function(tinymce){tinymce.is;var DOM=tinymce.DOM,walk=(tinymce.each,tinymce.walk);tinymce.create("tinymce.ui.Menu:tinymce.ui.MenuItem",{Menu:function(id,s){var t=this;t.parent(id,s),t.items={},t.collapsed=!1,t.menuCount=0,t.onAddItem=new tinymce.util.Dispatcher(this)},expand:function(d){var t=this;d&&walk(t,function(o){o.expand&&o.expand()},"items",t),t.collapsed=!1},collapse:function(d){var t=this;d&&walk(t,function(o){o.collapse&&o.collapse()},"items",t),t.collapsed=!0},isCollapsed:function(){return this.collapsed},add:function(o){return o.settings||(o=new tinymce.ui.MenuItem(o.id||DOM.uniqueId(),o)),this.onAddItem.dispatch(this,o),this.items[o.id]=o},addSeparator:function(){return this.add({separator:!0})},addMenu:function(o){return o.collapse||(o=this.createMenu(o)),this.menuCount++,this.add(o)},hasMenus:function(){return 0!==this.menuCount},remove:function(o){delete this.items[o.id]},removeAll:function(){var t=this;walk(t,function(o){o.removeAll?o.removeAll():o.remove(),o.destroy()},"items",t),t.items={}},createMenu:function(o){var m=new tinymce.ui.Menu(o.id||DOM.uniqueId(),o);return m.onAddItem.add(this.onAddItem.dispatch,this.onAddItem),m}})}(tinymce),function(tinymce){var is=tinymce.is,DOM=tinymce.DOM,each=tinymce.each,Event=tinymce.dom.Event,Element=tinymce.dom.Element;tinymce.create("tinymce.ui.DropMenu:tinymce.ui.Menu",{DropMenu:function(id,s){(s=s||{}).container=s.container||DOM.doc.body,s.offset_x=s.offset_x||0,s.offset_y=s.offset_y||0,s.vp_offset_x=s.vp_offset_x||0,s.vp_offset_y=s.vp_offset_y||0,is(s.icons)&&!s.icons&&(s.class+=" mceNoIcons"),this.parent(id,s),this.onShowMenu=new tinymce.util.Dispatcher(this),this.onHideMenu=new tinymce.util.Dispatcher(this),this.classPrefix="mceMenu"},createMenu:function(s){var m,t=this,cs=t.settings;return s.container=s.container||cs.container,s.parent=t,s.constrain=s.constrain||cs.constrain,s.class=s.class||cs.class,s.vp_offset_x=s.vp_offset_x||cs.vp_offset_x,s.vp_offset_y=s.vp_offset_y||cs.vp_offset_y,s.keyboard_focus=cs.keyboard_focus,(m=new tinymce.ui.DropMenu(s.id||DOM.uniqueId(),s)).onAddItem.add(t.onAddItem.dispatch,t.onAddItem),m},focus:function(){this.keyboardNav&&this.keyboardNav.focus()},update:function(){var tw,th,t=this,s=t.settings,tb=DOM.get("menu_"+t.id+"_tbl"),co=DOM.get("menu_"+t.id+"_co");tw=s.max_width?Math.min(tb.clientWidth,s.max_width):tb.clientWidth,th=s.max_height?Math.min(tb.clientHeight,s.max_height):tb.clientHeight,DOM.boxModel?t.element.setStyles({width:tw,height:th}):t.element.setStyles({width:tw+2,height:th+2}),s.max_width&&DOM.setStyle(co,"width",tw),s.max_height&&(DOM.setStyle(co,"height",th),tb.clientHeight<s.max_height&&DOM.setStyle(co,"overflow","hidden"))},showMenu:function(x,y,px){var co,w,h,mx,my,dm,t=this,s=t.settings,vp=DOM.getViewPort(),cp=t.classPrefix;t.collapse(1),t.isMenuVisible||(t.rendered?co=DOM.get("menu_"+t.id):(co=DOM.add(t.settings.container,t.renderNode()),each(t.items,function(o){o.postRender()}),t.element=new Element("menu_"+t.id,{blocker:1,container:s.container})),tinymce.isOpera||DOM.setStyles(co,{left:-65535,top:-65535}),DOM.show(co),t.update(),x+=s.offset_x||0,y+=s.offset_y||0,vp.w-=4,vp.h-=4,s.constrain&&(w=co.clientWidth-2,h=co.clientHeight-2,mx=vp.x+vp.w,my=vp.y+vp.h,x+s.vp_offset_x+w>mx&&(x=px?px-w:Math.max(0,mx-s.vp_offset_x-w)),y+s.vp_offset_y+h>my&&(y=Math.max(0,my-s.vp_offset_y-h))),DOM.setStyles(co,{left:x,top:y}),t.element.update(),t.isMenuVisible=1,t.mouseClickFunc=Event.add(co,"click",function(e){var m;if((e=e.target)&&(e=DOM.getParent(e,"tr"))&&!DOM.hasClass(e,cp+"ItemSub")){if((m=t.items[e.id]).isDisabled())return;for(dm=t;dm;)dm.hideMenu&&dm.hideMenu(),dm=dm.settings.parent;return m.settings.onclick&&m.settings.onclick(e),Event.cancel(e)}}),t.hasMenus()&&(t.mouseOverFunc=Event.add(co,"mouseover",function(e){var m,r;if((e=e.target)&&(e=DOM.getParent(e,"tr"))){if(m=t.items[e.id],t.lastMenu&&t.lastMenu.collapse(1),m.isDisabled())return;e&&DOM.hasClass(e,cp+"ItemSub")&&(r=DOM.getRect(e),m.showMenu(r.x+r.w-2,r.y-2,r.x),t.lastMenu=m,DOM.addClass(DOM.get(m.id).firstChild,cp+"ItemActive"))}})),Event.add(co,"keydown",t._keyHandler,t),t.onShowMenu.dispatch(t),s.keyboard_focus&&t._setupKeyboardNav())},hideMenu:function(c){var e,t=this,co=DOM.get("menu_"+t.id);t.isMenuVisible&&(t.keyboardNav&&t.keyboardNav.destroy(),Event.remove(co,"mouseover",t.mouseOverFunc),Event.remove(co,"click",t.mouseClickFunc),Event.remove(co,"keydown",t._keyHandler),DOM.hide(co),t.isMenuVisible=0,c||t.collapse(1),t.element&&t.element.hide(),(e=DOM.get(t.id))&&DOM.removeClass(e.firstChild,t.classPrefix+"ItemActive"),t.onHideMenu.dispatch(t))},add:function(o){var co,t=this;return o=t.parent(o),t.isRendered&&(co=DOM.get("menu_"+t.id))&&t._add(DOM.select("tbody",co)[0],o),o},collapse:function(d){this.parent(d),this.hideMenu(1)},remove:function(o){return DOM.remove(o.id),this.destroy(),this.parent(o)},destroy:function(){var t=this,co=DOM.get("menu_"+t.id);t.keyboardNav&&t.keyboardNav.destroy(),Event.remove(co,"mouseover",t.mouseOverFunc),Event.remove(DOM.select("a",co),"focus",t.mouseOverFunc),Event.remove(co,"click",t.mouseClickFunc),Event.remove(co,"keydown",t._keyHandler),t.element&&t.element.remove(),DOM.remove(co)},renderNode:function(){var n,tb,co,w,t=this,s=t.settings;return w=DOM.create("div",{role:"listbox",id:"menu_"+t.id,class:s.class,style:"position:absolute;left:0;top:0;z-index:200000;outline:0"}),t.settings.parent&&DOM.setAttrib(w,"aria-parent","menu_"+t.settings.parent.id),co=DOM.add(w,"div",{role:"presentation",id:"menu_"+t.id+"_co",class:t.classPrefix+(s.class?" "+s.class:"")}),t.element=new Element("menu_"+t.id,{blocker:1,container:s.container}),s.menu_line&&DOM.add(co,"span",{class:t.classPrefix+"Line"}),n=DOM.add(co,"table",{role:"presentation",id:"menu_"+t.id+"_tbl",border:0,cellPadding:0,cellSpacing:0}),tb=DOM.add(n,"tbody"),each(t.items,function(o){t._add(tb,o)}),t.rendered=!0,w},_setupKeyboardNav:function(){var contextMenu,menuItems,t=this;contextMenu=DOM.select("#menu_"+t.id)[0],(menuItems=DOM.select("a[role=option]","menu_"+t.id)).splice(0,0,contextMenu),t.keyboardNav=new tinymce.ui.KeyboardNavigation({root:"menu_"+t.id,items:menuItems,onCancel:function(){t.hideMenu()},enableUpDown:!0}),contextMenu.focus()},_keyHandler:function(evt){var t=this;switch(evt.keyCode){case 37:t.settings.parent&&(t.hideMenu(),t.settings.parent.focus(),Event.cancel(evt));break;case 39:t.mouseOverFunc&&t.mouseOverFunc(evt)}},_add:function(tb,o){var n,a,ro,it,ic,s=o.settings,cp=this.classPrefix;if(s.separator)return ro=DOM.add(tb,"tr",{id:o.id,class:cp+"ItemSeparator"}),DOM.add(ro,"td",{class:cp+"ItemSeparator"}),void((n=ro.previousSibling)&&DOM.addClass(n,"mceLast"));n=ro=DOM.add(tb,"tr",{id:o.id,class:cp+"Item "+cp+"ItemEnabled"}),n=it=DOM.add(n,s.titleItem?"th":"td"),n=a=DOM.add(n,"a",{id:o.id+"_aria",role:s.titleItem?"presentation":"option",href:"javascript:;",onclick:"return false;",onmousedown:"return false;"}),s.parent&&(DOM.setAttrib(a,"aria-haspopup","true"),DOM.setAttrib(a,"aria-owns","menu_"+o.id)),DOM.addClass(it,s.class),ic=DOM.add(n,"span",{class:"mceIcon"+(s.icon?" mce_"+s.icon:"")}),s.icon_src&&DOM.add(ic,"img",{src:s.icon_src}),n=DOM.add(n,s.element||"span",{class:"mceText",title:o.settings.title},o.settings.title),o.settings.style&&DOM.setAttrib(n,"style",o.settings.style),1==tb.childNodes.length&&DOM.addClass(ro,"mceFirst"),(n=ro.previousSibling)&&DOM.hasClass(n,cp+"ItemSeparator")&&DOM.addClass(ro,"mceFirst"),o.collapse&&DOM.addClass(ro,cp+"ItemSub"),(n=ro.previousSibling)&&DOM.removeClass(n,"mceLast"),DOM.addClass(ro,"mceLast")}})}(tinymce),function(tinymce){var DOM=tinymce.DOM;tinymce.create("tinymce.ui.Button:tinymce.ui.Control",{Button:function(id,s,ed){this.parent(id,s,ed),this.classPrefix="mceButton"},renderHTML:function(){var h,l,cp=this.classPrefix,s=this.settings;return l=DOM.encode(s.label||""),h='<a role="button" id="'+this.id+'" href="javascript:;" class="'+cp+" "+cp+"Enabled "+s.class+(l?" "+cp+"Labeled":"")+'" onmousedown="return false;" onclick="return false;" aria-labelledby="'+this.id+'_voice" title="'+DOM.encode(s.title)+'">',!s.image||this.editor&&this.editor.forcedHighContrastMode?h+='<span class="mceIcon '+s.class+'"></span>'+(l?'<span class="'+cp+'Label">'+l+"</span>":""):h+='<img class="mceIcon" src="'+s.image+'" alt="'+DOM.encode(s.title)+'" />'+l,h+='<span class="mceVoiceLabel mceIconOnly" style="display: none;" id="'+this.id+'_voice">'+s.title+"</span>",h+="</a>"},postRender:function(){var t=this,s=t.settings;tinymce.dom.Event.add(t.id,"click",function(e){if(!t.isDisabled())return s.onclick.call(s.scope,e)})}})}(tinymce),function(tinymce){var DOM=tinymce.DOM,Event=tinymce.dom.Event,each=tinymce.each,Dispatcher=tinymce.util.Dispatcher;tinymce.create("tinymce.ui.ListBox:tinymce.ui.Control",{ListBox:function(id,s,ed){var t=this;t.parent(id,s,ed),t.items=[],t.onChange=new Dispatcher(t),t.onPostRender=new Dispatcher(t),t.onAdd=new Dispatcher(t),t.onRenderMenu=new tinymce.util.Dispatcher(this),t.classPrefix="mceListBox"},select:function(va){var fv,f,t=this;if(void 0==va)return t.selectByIndex(-1);f=va&&va.call?va:function(v){return v==va},va!=t.selectedValue&&(each(t.items,function(o,i){if(f(o.value))return fv=1,t.selectByIndex(i),!1}),fv||t.selectByIndex(-1))},selectByIndex:function(idx){var e,o,t=this;idx!=t.selectedIndex&&(e=DOM.get(t.id+"_text"),(o=t.items[idx])?(t.selectedValue=o.value,t.selectedIndex=idx,DOM.setHTML(e,DOM.encode(o.title)),DOM.removeClass(e,"mceTitle"),DOM.setAttrib(t.id,"aria-valuenow",o.title)):(DOM.setHTML(e,DOM.encode(t.settings.title)),DOM.addClass(e,"mceTitle"),t.selectedValue=t.selectedIndex=null,DOM.setAttrib(t.id,"aria-valuenow",t.settings.title)),e=0)},add:function(n,v,o){var t=this;o=o||{},o=tinymce.extend(o,{title:n,value:v}),t.items.push(o),t.onAdd.dispatch(t,o)},getLength:function(){return this.items.length},renderHTML:function(){var h="",t=this,s=t.settings,cp=t.classPrefix;return h='<span role="button" aria-haspopup="true" aria-labelledby="'+t.id+'_text" aria-describedby="'+t.id+'_voiceDesc"><table role="presentation" tabindex="0" id="'+t.id+'" cellpadding="0" cellspacing="0" class="'+cp+" "+cp+"Enabled"+(s.class?" "+s.class:"")+'"><tbody><tr>',h+="<td>"+DOM.createHTML("span",{id:t.id+"_voiceDesc",class:"voiceLabel",style:"display:none;"},t.settings.title),h+=DOM.createHTML("a",{id:t.id+"_text",tabindex:-1,href:"javascript:;",class:"mceText",onclick:"return false;",onmousedown:"return false;"},DOM.encode(t.settings.title))+"</td>",h+="<td>"+DOM.createHTML("a",{id:t.id+"_open",tabindex:-1,href:"javascript:;",class:"mceOpen",onclick:"return false;",onmousedown:"return false;"},'<span><span style="display:none;" class="mceIconOnly" aria-hidden="true">▼</span></span>')+"</td>",h+="</tr></tbody></table></span>"},showMenu:function(){var p2,m,t=this,e=DOM.get(this.id);if(!t.isDisabled()&&0!=t.items.length){if(t.menu&&t.menu.isMenuVisible)return t.hideMenu();t.isMenuRendered||(t.renderMenu(),t.isMenuRendered=!0),p2=DOM.getPos(e),(m=t.menu).settings.offset_x=p2.x,m.settings.offset_y=p2.y,m.settings.keyboard_focus=!tinymce.isOpera,t.oldID&&m.items[t.oldID].setSelected(0),each(t.items,function(o){o.value===t.selectedValue&&(m.items[o.id].setSelected(1),t.oldID=o.id)}),m.showMenu(0,e.clientHeight),Event.add(DOM.doc,"mousedown",t.hideMenu,t),DOM.addClass(t.id,t.classPrefix+"Selected")}},hideMenu:function(e){var t=this;if(t.menu&&t.menu.isMenuVisible){if(DOM.removeClass(t.id,t.classPrefix+"Selected"),e&&"mousedown"==e.type&&(e.target.id==t.id+"_text"||e.target.id==t.id+"_open"))return;e&&DOM.getParent(e.target,".mceMenu")||(DOM.removeClass(t.id,t.classPrefix+"Selected"),Event.remove(DOM.doc,"mousedown",t.hideMenu,t),t.menu.hideMenu())}},renderMenu:function(){var m,t=this;(m=t.settings.control_manager.createDropMenu(t.id+"_menu",{menu_line:1,class:t.classPrefix+"Menu mceNoIcons",max_width:150,max_height:150})).onHideMenu.add(function(){t.hideMenu(),t.focus()}),m.add({title:t.settings.title,class:"mceMenuItemTitle",onclick:function(){!1!==t.settings.onselect("")&&t.select("")}}),each(t.items,function(o){void 0===o.value?m.add({title:o.title,class:"mceMenuItemTitle",onclick:function(){!1!==t.settings.onselect("")&&t.select("")}}):(o.id=DOM.uniqueId(),o.onclick=function(){!1!==t.settings.onselect(o.value)&&t.select(o.value)},m.add(o))}),t.onRenderMenu.dispatch(t,m),t.menu=m},postRender:function(){var t=this,cp=t.classPrefix;Event.add(t.id,"click",t.showMenu,t),Event.add(t.id,"keydown",function(evt){32==evt.keyCode&&(t.showMenu(evt),Event.cancel(evt))}),Event.add(t.id,"focus",function(){t._focused||(t.keyDownHandler=Event.add(t.id,"keydown",function(e){40==e.keyCode&&(t.showMenu(),Event.cancel(e))}),t.keyPressHandler=Event.add(t.id,"keypress",function(e){var v;13==e.keyCode&&(v=t.selectedValue,t.selectedValue=null,Event.cancel(e),t.settings.onselect(v))})),t._focused=1}),Event.add(t.id,"blur",function(){Event.remove(t.id,"keydown",t.keyDownHandler),Event.remove(t.id,"keypress",t.keyPressHandler),t._focused=0}),!tinymce.isIE6&&DOM.boxModel||(Event.add(t.id,"mouseover",function(){DOM.hasClass(t.id,cp+"Disabled")||DOM.addClass(t.id,cp+"Hover")}),Event.add(t.id,"mouseout",function(){DOM.hasClass(t.id,cp+"Disabled")||DOM.removeClass(t.id,cp+"Hover")})),t.onPostRender.dispatch(t,DOM.get(t.id))},destroy:function(){this.parent(),Event.clear(this.id+"_text"),Event.clear(this.id+"_open")}})}(tinymce),function(tinymce){var DOM=tinymce.DOM,Event=tinymce.dom.Event,each=tinymce.each;tinymce.util.Dispatcher;tinymce.create("tinymce.ui.NativeListBox:tinymce.ui.ListBox",{NativeListBox:function(id,s){this.parent(id,s),this.classPrefix="mceNativeListBox"},setDisabled:function(s){DOM.get(this.id).disabled=s,this.setAriaProperty("disabled",s)},isDisabled:function(){return DOM.get(this.id).disabled},select:function(va){var fv,f,t=this;if(void 0==va)return t.selectByIndex(-1);f=va&&va.call?va:function(v){return v==va},va!=t.selectedValue&&(each(t.items,function(o,i){if(f(o.value))return fv=1,t.selectByIndex(i),!1}),fv||t.selectByIndex(-1))},selectByIndex:function(idx){DOM.get(this.id).selectedIndex=idx+1,this.selectedValue=this.items[idx]?this.items[idx].value:null},add:function(n,v,a){var o,t=this;(a=a||{}).value=v,t.isRendered()&&DOM.add(DOM.get(this.id),"option",a,n),o={title:n,value:v,attribs:a},t.items.push(o),t.onAdd.dispatch(t,o)},getLength:function(){return this.items.length},renderHTML:function(){var h,t=this;return h=DOM.createHTML("option",{value:""},"-- "+t.settings.title+" --"),each(t.items,function(it){h+=DOM.createHTML("option",{value:it.value},it.title)}),h=DOM.createHTML("select",{id:t.id,class:"mceNativeListBox","aria-labelledby":t.id+"_aria"},h),h+=DOM.createHTML("span",{id:t.id+"_aria",style:"display: none"},t.settings.title)},postRender:function(){var t=this,changeListenerAdded=!0;function onChange(e){var v=t.items[e.target.selectedIndex-1];v&&(v=v.value)&&(t.onChange.dispatch(t,v),t.settings.onselect&&t.settings.onselect(v))}t.rendered=!0,Event.add(t.id,"change",onChange),Event.add(t.id,"keydown",function(e){var bf;if(Event.remove(t.id,"change",void 0),changeListenerAdded=!1,bf=Event.add(t.id,"blur",function(){changeListenerAdded||(changeListenerAdded=!0,Event.add(t.id,"change",onChange),Event.remove(t.id,"blur",bf))}),13==e.keyCode||32==e.keyCode)return onChange(e),Event.cancel(e)}),t.onPostRender.dispatch(t,DOM.get(t.id))}})}(tinymce),function(tinymce){var DOM=tinymce.DOM,Event=tinymce.dom.Event;tinymce.each;tinymce.create("tinymce.ui.MenuButton:tinymce.ui.Button",{MenuButton:function(id,s,ed){this.parent(id,s,ed),this.onRenderMenu=new tinymce.util.Dispatcher(this),s.menu_container=s.menu_container||DOM.doc.body},showMenu:function(){var p2,m,t=this,e=DOM.get(t.id);if(!t.isDisabled()){if(t.isMenuRendered||(t.renderMenu(),t.isMenuRendered=!0),t.isMenuVisible)return t.hideMenu();DOM.getPos(t.settings.menu_container),p2=DOM.getPos(e),(m=t.menu).settings.offset_x=p2.x,m.settings.offset_y=p2.y,m.settings.vp_offset_x=p2.x,m.settings.vp_offset_y=p2.y,m.settings.keyboard_focus=t._focused,m.showMenu(0,e.clientHeight),Event.add(DOM.doc,"mousedown",t.hideMenu,t),t.setState("Selected",1),t.isMenuVisible=1}},renderMenu:function(){var m,t=this;(m=t.settings.control_manager.createDropMenu(t.id+"_menu",{menu_line:1,class:this.classPrefix+"Menu",icons:t.settings.icons})).onHideMenu.add(function(){t.hideMenu(),t.focus()}),t.onRenderMenu.dispatch(t,m),t.menu=m},hideMenu:function(e){var t=this;e&&"mousedown"==e.type&&DOM.getParent(e.target,function(e){return e.id===t.id||e.id===t.id+"_open"})||(e&&DOM.getParent(e.target,".mceMenu")||(t.setState("Selected",0),Event.remove(DOM.doc,"mousedown",t.hideMenu,t),t.menu&&t.menu.hideMenu()),t.isMenuVisible=0)},postRender:function(){var t=this,s=t.settings;Event.add(t.id,"click",function(){t.isDisabled()||(s.onclick&&s.onclick(t.value),t.showMenu())})}})}(tinymce),function(tinymce){var DOM=tinymce.DOM,Event=tinymce.dom.Event;tinymce.each;tinymce.create("tinymce.ui.SplitButton:tinymce.ui.MenuButton",{SplitButton:function(id,s,ed){this.parent(id,s,ed),this.classPrefix="mceSplitButton"},renderHTML:function(){var h,h1,t=this,s=t.settings;return h="<tbody><tr>",h1=s.image?DOM.createHTML("img ",{src:s.image,role:"presentation",class:"mceAction "+s.class}):DOM.createHTML("span",{class:"mceAction "+s.class},""),h1+=DOM.createHTML("span",{class:"mceVoiceLabel mceIconOnly",id:t.id+"_voice",style:"display:none;"},s.title),h+="<td >"+DOM.createHTML("a",{role:"button",id:t.id+"_action",tabindex:"-1",href:"javascript:;",class:"mceAction "+s.class,onclick:"return false;",onmousedown:"return false;",title:s.title},h1)+"</td>",h1=DOM.createHTML("span",{class:"mceOpen "+s.class},'<span style="display:none;" class="mceIconOnly" aria-hidden="true">▼</span>'),h+="<td >"+DOM.createHTML("a",{role:"button",id:t.id+"_open",tabindex:"-1",href:"javascript:;",class:"mceOpen "+s.class,onclick:"return false;",onmousedown:"return false;",title:s.title},h1)+"</td>",h+="</tr></tbody>",h=DOM.createHTML("table",{id:t.id,role:"presentation",tabindex:"0",class:"mceSplitButton mceSplitButtonEnabled "+s.class,cellpadding:"0",cellspacing:"0",title:s.title},h),DOM.createHTML("span",{role:"button","aria-labelledby":t.id+"_voice","aria-haspopup":"true"},h)},postRender:function(){var activate,t=this,s=t.settings;s.onclick&&(activate=function(evt){t.isDisabled()||(s.onclick(t.value),Event.cancel(evt))},Event.add(t.id+"_action","click",activate),Event.add(t.id,["click","keydown"],function(evt){32!==evt.keyCode&&13!==evt.keyCode&&14!==evt.keyCode||evt.altKey||evt.ctrlKey||evt.metaKey?"click"!==evt.type&&40!==evt.keyCode||(t.showMenu(),Event.cancel(evt)):(activate(),Event.cancel(evt))})),Event.add(t.id+"_open","click",function(evt){t.showMenu(),Event.cancel(evt)}),Event.add([t.id,t.id+"_open"],"focus",function(){t._focused=1}),Event.add([t.id,t.id+"_open"],"blur",function(){t._focused=0}),!tinymce.isIE6&&DOM.boxModel||(Event.add(t.id,"mouseover",function(){DOM.hasClass(t.id,"mceSplitButtonDisabled")||DOM.addClass(t.id,"mceSplitButtonHover")}),Event.add(t.id,"mouseout",function(){DOM.hasClass(t.id,"mceSplitButtonDisabled")||DOM.removeClass(t.id,"mceSplitButtonHover")}))},destroy:function(){this.parent(),Event.clear(this.id+"_action"),Event.clear(this.id+"_open"),Event.clear(this.id)}})}(tinymce),function(tinymce){var DOM=tinymce.DOM,Event=tinymce.dom.Event,is=tinymce.is,each=tinymce.each;tinymce.create("tinymce.ui.ColorSplitButton:tinymce.ui.SplitButton",{ColorSplitButton:function(id,s,ed){var t=this;t.parent(id,s,ed),t.settings=s=tinymce.extend({colors:"000000,993300,333300,003300,003366,000080,333399,333333,800000,FF6600,808000,008000,008080,0000FF,666699,808080,FF0000,FF9900,99CC00,339966,33CCCC,3366FF,800080,999999,FF00FF,FFCC00,FFFF00,00FF00,00FFFF,00CCFF,993366,C0C0C0,FF99CC,FFCC99,FFFF99,CCFFCC,CCFFFF,99CCFF,CC99FF,FFFFFF",grid_width:8,default_color:"#888888"},t.settings),t.onShowMenu=new tinymce.util.Dispatcher(t),t.onHideMenu=new tinymce.util.Dispatcher(t),t.value=s.default_color},showMenu:function(){var e,p2,t=this;if(!t.isDisabled()){if(t.isMenuRendered||(t.renderMenu(),t.isMenuRendered=!0),t.isMenuVisible)return t.hideMenu();e=DOM.get(t.id),DOM.show(t.id+"_menu"),DOM.addClass(e,"mceSplitButtonSelected"),p2=DOM.getPos(e),DOM.setStyles(t.id+"_menu",{left:p2.x,top:p2.y+e.clientHeight,zIndex:2e5}),e=0,Event.add(DOM.doc,"mousedown",t.hideMenu,t),t.onShowMenu.dispatch(t),t._focused&&(t._keyHandler=Event.add(t.id+"_menu","keydown",function(e){27==e.keyCode&&t.hideMenu()}),DOM.select("a",t.id+"_menu")[0].focus()),t.isMenuVisible=1}},hideMenu:function(e){var t=this;if(t.isMenuVisible){if(e&&"mousedown"==e.type&&DOM.getParent(e.target,function(e){return e.id===t.id+"_open"}))return;e&&DOM.getParent(e.target,".mceSplitButtonMenu")||(DOM.removeClass(t.id,"mceSplitButtonSelected"),Event.remove(DOM.doc,"mousedown",t.hideMenu,t),Event.remove(t.id+"_menu","keydown",t._keyHandler),DOM.hide(t.id+"_menu")),t.isMenuVisible=0}},renderMenu:function(){var m,n,tb,tr,w,context,t=this,i=0,s=t.settings;return w=DOM.add(s.menu_container,"div",{role:"listbox",id:t.id+"_menu",class:s.menu_class+" "+s.class,style:"position:absolute;left:0;top:-1000px;"}),m=DOM.add(w,"div",{class:s.class+" mceSplitButtonMenu"}),DOM.add(m,"span",{class:"mceMenuLine"}),n=DOM.add(m,"table",{role:"presentation",class:"mceColorSplitMenu"}),tb=DOM.add(n,"tbody"),i=0,each(is(s.colors,"array")?s.colors:s.colors.split(","),function(c){c=c.replace(/^#/,""),i--||(tr=DOM.add(tb,"tr"),i=s.grid_width-1),n=DOM.add(tr,"td"),n=DOM.add(n,"a",{role:"option",href:"javascript:;",style:{backgroundColor:"#"+c},title:t.editor.getLang("colors."+c,c),"data-mce-color":"#"+c}),t.editor.forcedHighContrastMode&&((n=DOM.add(n,"canvas",{width:16,height:16,"aria-hidden":"true"})).getContext&&(context=n.getContext("2d"))?(context.fillStyle="#"+c,context.fillRect(0,0,16,16)):DOM.remove(n))}),s.more_colors_func&&(n=DOM.add(tb,"tr"),n=DOM.add(n,"td",{colspan:s.grid_width,class:"mceMoreColors"}),n=DOM.add(n,"a",{role:"option",id:t.id+"_more",href:"javascript:;",onclick:"return false;",class:"mceMoreColors"},s.more_colors_title),Event.add(n,"click",function(e){return s.more_colors_func.call(s.more_colors_scope||this),Event.cancel(e)})),DOM.addClass(m,"mceColorSplitMenu"),new tinymce.ui.KeyboardNavigation({root:t.id+"_menu",items:DOM.select("a",t.id+"_menu"),onCancel:function(){t.hideMenu(),t.focus()}}),Event.add(t.id+"_menu","mousedown",function(e){return Event.cancel(e)}),Event.add(t.id+"_menu","click",function(e){var c;return(e=DOM.getParent(e.target,"a",tb))&&"a"==e.nodeName.toLowerCase()&&(c=e.getAttribute("data-mce-color"))&&t.setColor(c),Event.cancel(e)}),w},setColor:function(c){this.displayColor(c),this.hideMenu(),this.settings.onselect(c)},displayColor:function(c){DOM.setStyle(this.id+"_preview","backgroundColor",c),this.value=c},postRender:function(){var t=this,id=t.id;t.parent(),DOM.add(id+"_action","div",{id:id+"_preview",class:"mceColorPreview"}),DOM.setStyle(t.id+"_preview","backgroundColor",t.value)},destroy:function(){this.parent(),Event.clear(this.id+"_menu"),Event.clear(this.id+"_more"),DOM.remove(this.id+"_menu")}})}(tinymce),function(tinymce){var dom=tinymce.DOM,each=tinymce.each,Event=tinymce.dom.Event;tinymce.create("tinymce.ui.ToolbarGroup:tinymce.ui.Container",{renderHTML:function(){var t=this,h=[],controls=t.controls,each=tinymce.each,settings=t.settings;return h.push('<div id="'+t.id+'" role="group" aria-labelledby="'+t.id+'_voice">'),h.push("<span role='application'>"),h.push('<span id="'+t.id+'_voice" class="mceVoiceLabel" style="display:none;">'+dom.encode(settings.name)+"</span>"),each(controls,function(toolbar){h.push(toolbar.renderHTML())}),h.push("</span>"),h.push("</div>"),h.join("")},focus:function(){this.keyNav.focus()},postRender:function(){var t=this,items=[];each(t.controls,function(toolbar){each(toolbar.controls,function(control){control.id&&items.push(control)})}),t.keyNav=new tinymce.ui.KeyboardNavigation({root:t.id,items:items,onCancel:function(){t.editor.focus()},excludeFromTabOrder:!t.settings.tab_focus_toolbar})},destroy:function(){this.parent(),this.keyNav.destroy(),Event.clear(this.id)}})}(tinymce),function(tinymce){var dom=tinymce.DOM;tinymce.each;tinymce.create("tinymce.ui.Toolbar:tinymce.ui.Container",{renderHTML:function(){var c,co,i,pr,nx,cl,t=this,h="",s=t.settings;for(cl=t.controls,i=0;i<cl.length;i++)co=cl[i],pr=cl[i-1],nx=cl[i+1],0===i&&(c="mceToolbarStart",co.Button?c+=" mceToolbarStartButton":co.SplitButton?c+=" mceToolbarStartSplitButton":co.ListBox&&(c+=" mceToolbarStartListBox"),h+=dom.createHTML("td",{class:c},dom.createHTML("span",null,"\x3c!-- IE --\x3e"))),pr&&co.ListBox&&(pr.Button||pr.SplitButton)&&(h+=dom.createHTML("td",{class:"mceToolbarEnd"},dom.createHTML("span",null,"\x3c!-- IE --\x3e"))),dom.stdMode?h+='<td style="position: relative">'+co.renderHTML()+"</td>":h+="<td>"+co.renderHTML()+"</td>",nx&&co.ListBox&&(nx.Button||nx.SplitButton)&&(h+=dom.createHTML("td",{class:"mceToolbarStart"},dom.createHTML("span",null,"\x3c!-- IE --\x3e")));return c="mceToolbarEnd",co.Button?c+=" mceToolbarEndButton":co.SplitButton?c+=" mceToolbarEndSplitButton":co.ListBox&&(c+=" mceToolbarEndListBox"),h+=dom.createHTML("td",{class:c},dom.createHTML("span",null,"\x3c!-- IE --\x3e")),dom.createHTML("table",{id:t.id,class:"mceToolbar"+(s.class?" "+s.class:""),cellpadding:"0",cellspacing:"0",align:t.settings.align||"",role:"presentation",tabindex:"-1"},"<tbody><tr>"+h+"</tr></tbody>")}})}(tinymce),function(tinymce){var Dispatcher=tinymce.util.Dispatcher;tinymce.each;tinymce.create("tinymce.AddOnManager",{AddOnManager:function(){this.items=[],this.urls={},this.lookup={},this.onAdd=new Dispatcher(this)},get:function(n){return this.lookup[n]?this.lookup[n].instance:void 0},dependencies:function(n){var result;return this.lookup[n]&&(result=this.lookup[n].dependencies),result||[]},requireLangPack:function(n){var s=tinymce.settings;s&&s.language&&!1!==s.language_load&&tinymce.ScriptLoader.add(this.urls[n]+"/langs/"+s.language+".js")},add:function(id,o,dependencies){return this.items.push(o),this.lookup[id]={instance:o,dependencies:dependencies},this.onAdd.dispatch(this,id,o),o},createUrl:function(baseUrl,dep){return"object"===(void 0===dep?"undefined":_typeof(dep))?dep:{prefix:baseUrl.prefix,resource:dep,suffix:baseUrl.suffix}},addComponents:function(pluginName,scripts){var pluginUrl=this.urls[pluginName];tinymce.each(scripts,function(script){tinymce.ScriptLoader.add(pluginUrl+"/"+script)})},load:function(n,u,cb,s){var t=this,url=u;function loadDependencies(){var dependencies=t.dependencies(n);tinymce.each(dependencies,function(dep){var newUrl=t.createUrl(u,dep);t.load(newUrl.resource,newUrl,void 0,void 0)}),cb&&(s?cb.call(s):cb.call(tinymce.ScriptLoader))}t.urls[n]||("object"===(void 0===u?"undefined":_typeof(u))&&(url=u.prefix+u.resource+u.suffix),0!=url.indexOf("/")&&-1==url.indexOf("://")&&(url=tinymce.baseURL+"/"+url),t.urls[n]=url.substring(0,url.lastIndexOf("/")),t.lookup[n]?loadDependencies():tinymce.ScriptLoader.add(url,loadDependencies,s))}}),tinymce.PluginManager=new tinymce.AddOnManager,tinymce.ThemeManager=new tinymce.AddOnManager}(tinymce),function(tinymce){var each=tinymce.each,extend=tinymce.extend,DOM=tinymce.DOM,Event=tinymce.dom.Event,explode=(tinymce.ThemeManager,tinymce.PluginManager,tinymce.explode),Dispatcher=tinymce.util.Dispatcher,instanceCounter=0;tinymce.documentBaseURL=window.location.href.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(tinymce.documentBaseURL)||(tinymce.documentBaseURL+="/"),tinymce.baseURL=new tinymce.util.URI(tinymce.documentBaseURL).toAbsolute(tinymce.baseURL),tinymce.baseURI=new tinymce.util.URI(tinymce.baseURL),tinymce.onBeforeUnload=new Dispatcher(tinymce),Event.add(window,"beforeunload",function(e){tinymce.onBeforeUnload.dispatch(tinymce,e)}),tinymce.onAddEditor=new Dispatcher(tinymce),tinymce.onRemoveEditor=new Dispatcher(tinymce),tinymce.EditorManager=extend(tinymce,{editors:[],i18n:{},activeEditor:null,init:function(s){var e,ed,t=this,el=(tinymce.ScriptLoader,[]);function execCallback(se,n,s){var f=se[n];if(f)return tinymce.is(f,"string")&&(s=(s=f.replace(/\.\w+$/,""))?tinymce.resolve(s):0,f=tinymce.resolve(f)),f.apply(s||this,Array.prototype.slice.call(arguments,2))}s=extend({theme:"simple",language:"en"},s),t.settings=s,Event.add(document,"init",function(){var l,co;switch(execCallback(s,"onpageload"),s.mode){case"exact":(l=s.elements||"").length>0&&each(explode(l),function(v){DOM.get(v)?(ed=new tinymce.Editor(v,s),el.push(ed),ed.render(1)):each(document.forms,function(f){each(f.elements,function(e){e.name===v&&(v="mce_editor_"+instanceCounter++,DOM.setAttrib(e,"id",v),ed=new tinymce.Editor(v,s),el.push(ed),ed.render(1))})})});break;case"textareas":case"specific_textareas":var hasClass=function(n,c){return c.constructor===RegExp?c.test(n.className):DOM.hasClass(n,c)};each(DOM.select("textarea"),function(v){s.editor_deselector&&hasClass(v,s.editor_deselector)||s.editor_selector&&!hasClass(v,s.editor_selector)||(e=DOM.get(v.name),v.id||e||(v.id=v.name),v.id&&!t.get(v.id)||(v.id=DOM.uniqueId()),ed=new tinymce.Editor(v.id,s),el.push(ed),ed.render(1))})}s.oninit&&(l=co=0,each(el,function(ed){co++,ed.initialized?l++:ed.onInit.add(function(){++l==co&&execCallback(s,"oninit")}),l==co&&execCallback(s,"oninit")}))})},get:function(id){return void 0===id?this.editors:this.editors[id]},getInstanceById:function(id){return this.get(id)},add:function(editor){var editors=this.editors;return editors[editor.id]=editor,editors.push(editor),this._setActive(editor),this.onAddEditor.dispatch(this,editor),tinymce.adapter&&tinymce.adapter.patchEditor(editor),editor},remove:function(editor){var i,t=this,editors=t.editors;if(!editors[editor.id])return null;for(delete editors[editor.id],i=0;i<editors.length;i++)if(editors[i]==editor){editors.splice(i,1);break}return t.activeEditor==editor&&t._setActive(editors[0]),editor.destroy(),t.onRemoveEditor.dispatch(t,editor),editor},execCommand:function(c,u,v){var w,t=this,ed=t.get(v);switch(c){case"mceFocus":return ed.focus(),!0;case"mceAddEditor":case"mceAddControl":return t.get(v)||new tinymce.Editor(v,t.settings).render(),!0;case"mceAddFrameControl":if((w=v.window).tinyMCE=tinyMCE,w.tinymce=tinymce,tinymce.DOM.doc=w.document,tinymce.DOM.win=w,(ed=new tinymce.Editor(v.element_id,v)).render(),tinymce.isIE){w.attachEvent("onunload",function clr(){ed.destroy(),w.detachEvent("onunload",clr),w=w.tinyMCE=w.tinymce=null})}return v.page_window=null,!0;case"mceRemoveEditor":case"mceRemoveControl":return ed&&ed.remove(),!0;case"mceToggleEditor":return ed?(ed.isHidden()?ed.show():ed.hide(),!0):(t.execCommand("mceAddControl",0,v),!0)}return!!t.activeEditor&&t.activeEditor.execCommand(c,u,v)},execInstanceCommand:function(id,c,u,v){var ed=this.get(id);return!!ed&&ed.execCommand(c,u,v)},triggerSave:function(){each(this.editors,function(e){e.save()})},addI18n:function(p,o){var i18n=this.i18n;tinymce.is(p,"string")?each(o,function(o,k){i18n[p+"."+k]=o}):each(p,function(o,lc){each(o,function(o,g){each(o,function(o,k){"common"===g?i18n[lc+"."+k]=o:i18n[lc+"."+g+"."+k]=o})})})},_setActive:function(editor){this.selectedInstance=this.activeEditor=editor}})}(tinymce),function(tinymce){var DOM=tinymce.DOM,Event=tinymce.dom.Event,extend=tinymce.extend,Dispatcher=tinymce.util.Dispatcher,each=tinymce.each,isGecko=tinymce.isGecko,isIE=tinymce.isIE,is=(tinymce.isWebKit,tinymce.is),ThemeManager=tinymce.ThemeManager,PluginManager=tinymce.PluginManager,explode=(tinymce.inArray,tinymce.grep,tinymce.explode);tinymce.create("tinymce.Editor",{Editor:function(id,s){var t=this;t.id=t.editorId=id,t.execCommands={},t.queryStateCommands={},t.queryValueCommands={},t.isNotDirty=!1,t.plugins={},each(["onPreInit","onBeforeRenderUI","onPostRender","onInit","onRemove","onActivate","onDeactivate","onClick","onEvent","onMouseUp","onMouseDown","onDblClick","onKeyDown","onKeyUp","onKeyPress","onContextMenu","onSubmit","onReset","onPaste","onPreProcess","onPostProcess","onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent","onLoadContent","onSaveContent","onNodeChange","onChange","onBeforeExecCommand","onExecCommand","onUndo","onRedo","onVisualAid","onSetProgressState"],function(e){t[e]=new Dispatcher(t)}),t.settings=s=extend({id:id,language:"en",docs_language:"en",theme:"simple",skin:"default",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:tinymce.documentBaseURL,add_form_submit_trigger:1,submit_patch:1,add_unload_trigger:1,convert_urls:1,relative_urls:1,remove_script_host:1,table_inline_editing:0,object_resizing:1,cleanup:1,accessibility_focus:1,custom_shortcuts:1,custom_undo_redo_keyboard_shortcuts:1,custom_undo_redo_restore_selection:1,custom_undo_redo:1,doctype:tinymce.isIE6?'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">':"<!DOCTYPE>",visual_table_class:"mceItemTable",visual:1,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",apply_source_formatting:1,directionality:"ltr",forced_root_block:"p",hidden_input:1,padd_empty_editor:1,render_ui:1,init_theme:1,force_p_newlines:1,indentation:"30px",keep_styles:1,fix_table_elements:1,inline_styles:1,convert_fonts_to_spans:!0,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr",validate:!0,entity_encoding:"named",url_converter:t.convertURL,url_converter_scope:t,ie7_compat:!0},s),t.documentBaseURI=new tinymce.util.URI(s.document_base_url||tinymce.documentBaseURL,{base_uri:tinyMCE.baseURI}),t.baseURI=tinymce.baseURI,t.contentCSS=[],t.execCallback("setup",t)},render:function(nst){var t=this,s=t.settings,id=t.id,sl=tinymce.ScriptLoader;Event.domLoaded?(tinyMCE.settings=s,t.getElement()&&(tinymce.isIDevice&&!tinymce.isIOS5||(!/TEXTAREA|INPUT/i.test(t.getElement().nodeName)&&s.hidden_input&&DOM.getParent(id,"form")&&DOM.insertAfter(DOM.create("input",{type:"hidden",name:id}),id),tinymce.WindowManager&&(t.windowManager=new tinymce.WindowManager(t)),"xml"==s.encoding&&t.onGetContent.add(function(ed,o){o.save&&(o.content=DOM.encode(o.content))}),s.add_form_submit_trigger&&t.onSubmit.addToTop(function(){t.initialized&&(t.save(),t.isNotDirty=1)}),s.add_unload_trigger&&(t._beforeUnload=tinyMCE.onBeforeUnload.add(function(){!t.initialized||t.destroyed||t.isHidden()||t.save({format:"raw",no_events:!0})})),tinymce.addUnload(t.destroy,t),s.submit_patch&&t.onBeforeRenderUI.add(function(){var n=t.getElement().form;n&&(n._mceOldSubmit||(n.submit.nodeType||n.submit.length||(t.formElement=n,n._mceOldSubmit=n.submit,n.submit=function(){return tinymce.triggerSave(),t.isNotDirty=1,t.formElement._mceOldSubmit(t.formElement)}),n=null))}),s.language&&!1!==s.language_load&&sl.add(tinymce.baseURL+"/langs/"+s.language+".js"),s.theme&&"-"!=s.theme.charAt(0)&&!ThemeManager.urls[s.theme]&&ThemeManager.load(s.theme,"themes/"+s.theme+"/editor_template"+tinymce.suffix+".js"),each(explode(s.plugins),function(p){if(p&&!PluginManager.urls[p])if("-"==p.charAt(0)){p=p.substr(1,p.length);var dependencies=PluginManager.dependencies(p);each(dependencies,function(dep){var defaultSettings={prefix:"plugins/",resource:dep,suffix:"/editor_plugin"+tinymce.suffix+".js"};dep=PluginManager.createUrl(defaultSettings,dep),PluginManager.load(dep.resource,dep)})}else{if("safari"==p)return;PluginManager.load(p,{prefix:"plugins/",resource:p,suffix:"/editor_plugin"+tinymce.suffix+".js"})}}),sl.loadQueue(function(){t.removed||t.init()})))):Event.add(document,"init",function(){t.render()})},init:function(){var w,h,o,u,bi,bc,re,i,t=this,s=t.settings,e=t.getElement(),initializedPlugins=[];if(tinymce.add(t),s.aria_label=s.aria_label||DOM.getAttrib(e,"aria-label",t.getLang("aria.rich_text_area")),s.theme&&(s.theme=s.theme.replace(/-/,""),o=ThemeManager.get(s.theme),t.theme=new o,t.theme.init&&s.init_theme&&t.theme.init(t,ThemeManager.urls[s.theme]||tinymce.documentBaseURL.replace(/\/$/,""))),each(explode(s.plugins.replace(/\-/g,"")),function initPlugin(p){var po,c=PluginManager.get(p),u=PluginManager.urls[p]||tinymce.documentBaseURL.replace(/\/$/,"");c&&-1===tinymce.inArray(initializedPlugins,p)&&(each(PluginManager.dependencies(p),function(dep){initPlugin(dep)}),po=new c(t,u),t.plugins[p]=po,po.init&&(po.init(t,u),initializedPlugins.push(p)))}),!1!==s.popup_css&&(s.popup_css?s.popup_css=t.documentBaseURI.toAbsolute(s.popup_css):s.popup_css=t.baseURI.toAbsolute("themes/"+s.theme+"/skins/"+s.skin+"/dialog.css")),s.popup_css_add&&(s.popup_css+=","+t.documentBaseURI.toAbsolute(s.popup_css_add)),t.controlManager=new tinymce.ControlManager(t),s.custom_undo_redo&&(t.onBeforeExecCommand.add(function(ed,cmd,ui,val,a){"Undo"==cmd||"Redo"==cmd||"mceRepaint"==cmd||a&&a.skip_undo||t.undoManager.beforeChange()}),t.onExecCommand.add(function(ed,cmd,ui,val,a){"Undo"==cmd||"Redo"==cmd||"mceRepaint"==cmd||a&&a.skip_undo||t.undoManager.add()})),t.onExecCommand.add(function(ed,c){/^(FontName|FontSize)$/.test(c)||t.nodeChanged()}),isGecko){var repaint=function(a,o){o&&o.initial||t.execCommand("mceRepaint")};t.onUndo.add(repaint),t.onRedo.add(repaint),t.onSetContent.add(repaint)}if(t.onBeforeRenderUI.dispatch(t,t.controlManager),s.render_ui&&(w=s.width||e.style.width||e.offsetWidth,h=s.height||e.style.height||e.offsetHeight,t.orgDisplay=e.style.display,(re=/^[0-9\.]+(|px)$/i).test(""+w)&&(w=Math.max(parseInt(w)+(o.deltaWidth||0),100)),re.test(""+h)&&(h=Math.max(parseInt(h)+(o.deltaHeight||0),100)),o=t.theme.renderUI({targetNode:e,width:w,height:h,deltaWidth:s.delta_width,deltaHeight:s.delta_height}),t.editorContainer=o.editorContainer),document.domain&&location.hostname!=document.domain&&(tinymce.relaxedDomain=document.domain),DOM.setStyles(o.sizeContainer||o.editorContainer,{width:w,height:h}),s.content_css&&tinymce.each(explode(s.content_css),function(u){t.contentCSS.push(t.documentBaseURI.toAbsolute(u))}),(h=(o.iframeHeight||h)+("number"==typeof h?o.deltaHeight||0:""))<100&&(h=100),t.iframeHTML=s.doctype+'<html><head xmlns="http://www.w3.org/1999/xhtml">',s.document_base_url!=tinymce.documentBaseURL&&(t.iframeHTML+='<base href="'+t.documentBaseURI.getURI()+'" />'),s.ie7_compat?t.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=7" />':t.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=edge" />',t.iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />',!isGecko||!/Firefox\/2/.test(navigator.userAgent)){for(i=0;i<t.contentCSS.length;i++)t.iframeHTML+='<link type="text/css" rel="stylesheet" href="'+t.contentCSS[i]+'" />';t.contentCSS=[]}-1!=(bi=s.body_id||"tinymce").indexOf("=")&&(bi=(bi=t.getParam("body_id","","hash"))[t.id]||bi),-1!=(bc=s.body_class||"").indexOf("=")&&(bc=(bc=t.getParam("body_class","","hash"))[t.id]||""),t.iframeHTML+='</head><body id="'+bi+'" class="mceContentBody '+bc+'"></body></html>',tinymce.relaxedDomain&&(isIE||tinymce.isOpera&&parseFloat(opera.version())<11)&&(u='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinyMCE.get("'+t.id+'");document.write(ed.iframeHTML);document.close();ed.setupIframe();})()'),DOM.add(o.iframeContainer,"iframe",{id:t.id+"_ifr",src:u||'javascript:""',frameBorder:"0",allowTransparency:"true",title:s.aria_label,style:{width:"100%",height:h}}),t.contentAreaContainer=o.iframeContainer,DOM.get(o.editorContainer).style.display=t.orgDisplay,DOM.get(t.id).style.display="none",DOM.setAttrib(t.id,"aria-hidden",!0),tinymce.relaxedDomain&&u||t.setupIframe(),e=o=null},setupIframe:function(filled){var b,t=this,s=t.settings,d=(DOM.get(t.id),t.getDoc());if(isIE&&tinymce.relaxedDomain||filled||(isGecko&&!s.readonly&&(t.getWin().onload=function(){window.setTimeout(function(){var b=t.getBody();b.innerHTML="<br>",void 0!==b.contentEditable?(b.contentEditable=!1,b.contentEditable=!0,t.onMouseDown.add(function(ed,e){"HTML"===e.target.nodeName&&(d.designMode="on",window.setTimeout(function(){d.designMode="off",t.getBody().focus()},1))})):d.designMode="on",t.setupIframe(!0)},1)}),d.open(),d.write(t.iframeHTML),d.close(),tinymce.relaxedDomain&&(d.domain=tinymce.relaxedDomain),!isGecko||s.readonly)){if((b=t.getBody()).disabled=!0,isGecko||s.readonly||(b.contentEditable=!0),b.disabled=!1,t.schema=new tinymce.html.Schema(s),t.dom=new tinymce.dom.DOMUtils(t.getDoc(),{keep_values:!0,url_converter:t.convertURL,url_converter_scope:t,hex_colors:s.force_hex_style_colors,class_filter:s.class_filter,update_styles:1,fix_ie_paragraphs:1,schema:t.schema}),t.parser=new tinymce.html.DomParser(s,t.schema),t.settings.allow_html_in_named_anchor||t.parser.addAttributeFilter("name",function(nodes,name){for(var sibling,prevSibling,parent,node,i=nodes.length;i--;)if("a"===(node=nodes[i]).name&&node.firstChild){parent=node.parent,sibling=node.lastChild;do{prevSibling=sibling.prev,parent.insert(sibling,node),sibling=prevSibling}while(sibling)}}),t.parser.addAttributeFilter("src,href,style",function(nodes,name){for(var node,value,internalName,i=nodes.length,dom=t.dom;i--;)value=(node=nodes[i]).attr(name),internalName="data-mce-"+name,node.attributes.map[internalName]||("style"===name?node.attr(internalName,dom.serializeStyle(dom.parseStyle(value),node.name)):node.attr(internalName,t.convertURL(value,name,node.name)))}),t.parser.addNodeFilter("script",function(nodes,name){for(var i=nodes.length;i--;)nodes[i].attr("type","mce-text/javascript")}),t.parser.addNodeFilter("#cdata",function(nodes,name){for(var node,i=nodes.length;i--;)(node=nodes[i]).type=8,node.name="#comment",node.value="[CDATA["+node.value+"]]"}),t.parser.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(nodes,name){for(var node,i=nodes.length,nonEmptyElements=t.schema.getNonEmptyElements();i--;)(node=nodes[i]).isEmpty(nonEmptyElements)&&(node.empty().append(new tinymce.html.Node("br",1)).shortEnded=!0)}),t.serializer=new tinymce.dom.Serializer(s,t.dom,t.schema),t.selection=new tinymce.dom.Selection(t.dom,t.getWin(),t.serializer),t.formatter=new tinymce.Formatter(this),t.formatter.register({alignleft:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"left"}},{selector:"img,table",collapsed:!1,styles:{float:"left"}}],aligncenter:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"center"}},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"}},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"}}],alignright:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"right"}},{selector:"img,table",collapsed:!1,styles:{float:"right"}}],alignfull:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"justify"}}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},wrap_links:!1},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},wrap_links:!1},fontname:{inline:"span",styles:{fontFamily:"%value"}},fontsize:{inline:"span",styles:{fontSize:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},removeformat:[{selector:"b,strong,em,i,font,u,strike",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]}),each("p h1 h2 h3 h4 h5 h6 div address pre div code dt dd samp".split(/\s/),function(name){t.formatter.register(name,{block:name,remove:"all"})}),t.formatter.register(t.settings.formats),t.undoManager=new tinymce.UndoManager(t),t.undoManager.onAdd.add(function(um,l){if(um.hasUndo())return t.onChange.dispatch(t,l,um)}),t.undoManager.onUndo.add(function(um,l){return t.onUndo.dispatch(t,l,um)}),t.undoManager.onRedo.add(function(um,l){return t.onRedo.dispatch(t,l,um)}),t.forceBlocks=new tinymce.ForceBlocks(t,{forced_root_block:s.forced_root_block}),t.editorCommands=new tinymce.EditorCommands(t),t.serializer.onPreProcess.add(function(se,o){return t.onPreProcess.dispatch(t,o,se)}),t.serializer.onPostProcess.add(function(se,o){return t.onPostProcess.dispatch(t,o,se)}),t.onPreInit.dispatch(t),s.gecko_spellcheck||(t.getBody().spellcheck=0),s.readonly||t._addEvents(),t.controlManager.onPostRender.dispatch(t,t.controlManager),t.onPostRender.dispatch(t),s.directionality&&(t.getBody().dir=s.directionality),s.nowrap&&(t.getBody().style.whiteSpace="nowrap"),s.handle_node_change_callback&&t.onNodeChange.add(function(ed,cm,n){t.execCallback("handle_node_change_callback",t.id,n,-1,-1,!0,t.selection.isCollapsed())}),s.save_callback&&t.onSaveContent.add(function(ed,o){var h=t.execCallback("save_callback",t.id,o.content,t.getBody());h&&(o.content=h)}),s.onchange_callback&&t.onChange.add(function(ed,l){t.execCallback("onchange_callback",t,l)}),s.protect&&t.onBeforeSetContent.add(function(ed,o){s.protect&&each(s.protect,function(pattern){o.content=o.content.replace(pattern,function(str){return"\x3c!--mce:protected "+escape(str)+"--\x3e"})})}),s.convert_newlines_to_brs&&t.onBeforeSetContent.add(function(ed,o){o.initial&&(o.content=o.content.replace(/\r?\n/g,"<br />"))}),s.preformatted&&t.onPostProcess.add(function(ed,o){o.content=o.content.replace(/^\s*<pre.*?>/,""),o.content=o.content.replace(/<\/pre>\s*$/,""),o.set&&(o.content='<pre class="mceItemHidden">'+o.content+"</pre>")}),s.verify_css_classes&&(t.serializer.attribValueFilter=function(n,v){var s,cl;return"class"==n?(t.classesRE||(cl=t.dom.getClasses()).length>0&&(s="",each(cl,function(o){s+=(s?"|":"")+o.class}),t.classesRE=new RegExp("("+s+")","gi")),!t.classesRE||/(\bmceItem\w+\b|\bmceTemp\w+\b)/g.test(v)||t.classesRE.test(v)?v:""):v}),s.cleanup_callback&&(t.onBeforeSetContent.add(function(ed,o){o.content=t.execCallback("cleanup_callback","insert_to_editor",o.content,o)}),t.onPreProcess.add(function(ed,o){o.set&&t.execCallback("cleanup_callback","insert_to_editor_dom",o.node,o),o.get&&t.execCallback("cleanup_callback","get_from_editor_dom",o.node,o)}),t.onPostProcess.add(function(ed,o){o.set&&(o.content=t.execCallback("cleanup_callback","insert_to_editor",o.content,o)),o.get&&(o.content=t.execCallback("cleanup_callback","get_from_editor",o.content,o))})),s.save_callback&&t.onGetContent.add(function(ed,o){o.save&&(o.content=t.execCallback("save_callback",t.id,o.content,t.getBody()))}),s.handle_event_callback&&t.onEvent.add(function(ed,e,o){!1===t.execCallback("handle_event_callback",e,ed,o)&&Event.cancel(e)}),t.onSetContent.add(function(){t.addVisual(t.getBody())}),s.padd_empty_editor&&t.onPostProcess.add(function(ed,o){o.content=o.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")}),isGecko){var fixLinks=function(ed,o){each(ed.dom.select("a"),function(n){var pn=n.parentNode;ed.dom.isBlock(pn)&&pn.lastChild===n&&ed.dom.add(pn,"br",{"data-mce-bogus":1})})};t.onExecCommand.add(function(ed,cmd){"CreateLink"===cmd&&fixLinks(ed)}),t.onSetContent.add(t.selection.onSetContent.add(fixLinks))}t.load({initial:!0,format:"html"}),t.startContent=t.getContent({format:"raw"}),t.undoManager.add(),t.initialized=!0,t.onInit.dispatch(t),t.execCallback("setupcontent_callback",t.id,t.getBody(),t.getDoc()),t.execCallback("init_instance_callback",t),t.focus(!0),t.nodeChanged({initial:1}),each(t.contentCSS,function(u){t.dom.loadCSS(u)}),s.auto_focus&&setTimeout(function(){var ed=tinymce.get(s.auto_focus);ed.selection.select(ed.getBody(),1),ed.selection.collapse(1),ed.getBody().focus(),ed.getWin().focus()},100),null}},focus:function(sf){var oed,ieRng,controlElm,t=this,ce=t.settings.content_editable,doc=t.getDoc();sf||((ieRng=t.selection.getRng()).item&&(controlElm=ieRng.item(0)),ce||t.getWin().focus(),controlElm&&controlElm.ownerDocument==doc&&((ieRng=doc.body.createControlRange()).addElement(controlElm),ieRng.select())),tinymce.activeEditor!=t&&(null!=(oed=tinymce.activeEditor)&&oed.onDeactivate.dispatch(oed,t),t.onActivate.dispatch(t,oed)),tinymce._setActive(t)},execCallback:function(n){var s,t=this,f=t.settings[n];if(f)return t.callbackLookup&&(s=t.callbackLookup[n])&&(f=s.func,s=s.scope),is(f,"string")&&(s=(s=f.replace(/\.\w+$/,""))?tinymce.resolve(s):0,f=tinymce.resolve(f),t.callbackLookup=t.callbackLookup||{},t.callbackLookup[n]={func:f,scope:s}),f.apply(s||t,Array.prototype.slice.call(arguments,1))},translate:function(s){var c=this.settings.language||"en",i18n=tinymce.i18n;return s?i18n[c+"."+s]||s.replace(/{\#([^}]+)\}/g,function(a,b){return i18n[c+"."+b]||"{#"+b+"}"}):""},getLang:function(n,dv){return tinymce.i18n[(this.settings.language||"en")+"."+n]||(is(dv)?dv:"{#"+n+"}")},getParam:function(n,dv,ty){var o,tr=tinymce.trim,v=is(this.settings[n])?this.settings[n]:dv;return"hash"===ty?(o={},is(v,"string")?each(v.indexOf("=")>0?v.split(/[;,](?![^=;,]*(?:[;,]|$))/):v.split(","),function(v){(v=v.split("=")).length>1?o[tr(v[0])]=tr(v[1]):o[tr(v[0])]=tr(v)}):o=v,o):v},nodeChanged:function(o){var t=this,s=t.selection,n=s.getStart()||t.getBody();t.initialized&&(o=o||{},n=isIE&&n.ownerDocument!=t.getDoc()?t.getBody():n,o.parents=[],t.dom.getParent(n,function(node){if("BODY"==node.nodeName)return!0;o.parents.push(node)}),t.onNodeChange.dispatch(t,o&&o.controlManager||t.controlManager,n,s.isCollapsed(),o))},addButton:function(n,s){var t=this;t.buttons=t.buttons||{},t.buttons[n]=s},addCommand:function(name,callback,scope){this.execCommands[name]={func:callback,scope:scope||this}},addQueryStateHandler:function(name,callback,scope){this.queryStateCommands[name]={func:callback,scope:scope||this}},addQueryValueHandler:function(name,callback,scope){this.queryValueCommands[name]={func:callback,scope:scope||this}},addShortcut:function(pa,desc,cmd_func,sc){var c,t=this;return!!t.settings.custom_shortcuts&&(t.shortcuts=t.shortcuts||{},is(cmd_func,"string")&&(c=cmd_func,cmd_func=function(){t.execCommand(c,!1,null)}),is(cmd_func,"object")&&(c=cmd_func,cmd_func=function(){t.execCommand(c[0],c[1],c[2])}),each(explode(pa),function(pa){var o={func:cmd_func,scope:sc||this,desc:desc,alt:!1,ctrl:!1,shift:!1};each(explode(pa,"+"),function(v){switch(v){case"alt":case"ctrl":case"shift":o[v]=!0;break;default:o.charCode=v.charCodeAt(0),o.keyCode=v.toUpperCase().charCodeAt(0)}}),t.shortcuts[(o.ctrl?"ctrl":"")+","+(o.alt?"alt":"")+","+(o.shift?"shift":"")+","+o.keyCode]=o}),!0)},execCommand:function(cmd,ui,val,a){var o,st,t=this,s=0;return/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint|SelectAll)$/.test(cmd)||a&&a.skip_focus||t.focus(),o={},t.onBeforeExecCommand.dispatch(t,cmd,ui,val,o),!o.terminate&&(t.execCallback("execcommand_callback",t.id,t.selection.getNode(),cmd,ui,val)?(t.onExecCommand.dispatch(t,cmd,ui,val,a),!0):(o=t.execCommands[cmd])&&!0!==(st=o.func.call(o.scope,ui,val))?(t.onExecCommand.dispatch(t,cmd,ui,val,a),st):(each(t.plugins,function(p){if(p.execCommand&&p.execCommand(cmd,ui,val))return t.onExecCommand.dispatch(t,cmd,ui,val,a),s=1,!1}),!!s||(t.theme&&t.theme.execCommand&&t.theme.execCommand(cmd,ui,val)?(t.onExecCommand.dispatch(t,cmd,ui,val,a),!0):t.editorCommands.execCommand(cmd,ui,val)?(t.onExecCommand.dispatch(t,cmd,ui,val,a),!0):(t.getDoc().execCommand(cmd,ui,val),void t.onExecCommand.dispatch(t,cmd,ui,val,a)))))},queryCommandState:function(cmd){var o,s,t=this;if(!t._isHidden()){if((o=t.queryStateCommands[cmd])&&!0!==(s=o.func.call(o.scope)))return s;if(-1!==(o=t.editorCommands.queryCommandState(cmd)))return o;try{return this.getDoc().queryCommandState(cmd)}catch(ex){}}},queryCommandValue:function(c){var o,s,t=this;if(!t._isHidden()){if((o=t.queryValueCommands[c])&&!0!==(s=o.func.call(o.scope)))return s;if(o=t.editorCommands.queryCommandValue(c),is(o))return o;try{return this.getDoc().queryCommandValue(c)}catch(ex){}}},show:function(){var t=this;DOM.show(t.getContainer()),DOM.hide(t.id),t.load()},hide:function(){var t=this,d=t.getDoc();isIE&&d&&d.execCommand("SelectAll"),t.save(),DOM.hide(t.getContainer()),DOM.setStyle(t.id,"display",t.orgDisplay)},isHidden:function(){return!DOM.isHidden(this.id)},setProgressState:function(b,ti,o){return this.onSetProgressState.dispatch(this,b,ti,o),b},load:function(o){var h,t=this,e=t.getElement();if(e)return(o=o||{}).load=!0,h=t.setContent(is(e.value)?e.value:e.innerHTML,o),o.element=e,o.no_events||t.onLoadContent.dispatch(t,o),o.element=e=null,h},save:function(o){var h,f,t=this,e=t.getElement();if(e&&t.initialized)return(o=o||{}).save=!0,o.no_events||(t.undoManager.typing=!1,t.undoManager.add()),o.element=e,o.content=t.getContent(o),o.no_events||t.onSaveContent.dispatch(t,o),h=o.content,/TEXTAREA|INPUT/i.test(e.nodeName)?e.value=h:(e.innerHTML=h,(f=DOM.getParent(t.id,"form"))&&each(f.elements,function(e){if(e.name==t.id)return e.value=h,!1})),o.element=e=null,h},setContent:function(content,args){var forcedRootBlockName,body=this.getBody();return(args=args||{}).format=args.format||"html",args.set=!0,args.content=content,args.no_events||this.onBeforeSetContent.dispatch(this,args),content=args.content,tinymce.isIE||0!==content.length&&!/^\s+$/.test(content)?("raw"!==args.format&&(content=new tinymce.html.Serializer({},this.schema).serialize(this.parser.parse(content))),args.content=tinymce.trim(content),this.dom.setHTML(body,args.content),args.no_events||this.onSetContent.dispatch(this,args),args.content):(content=(forcedRootBlockName=this.settings.forced_root_block)?"<"+forcedRootBlockName+'><br data-mce-bogus="1"></'+forcedRootBlockName+">":'<br data-mce-bogus="1">',body.innerHTML=content,this.selection.select(body,!0),void this.selection.collapse(!0))},getContent:function(args){var content;return(args=args||{}).format=args.format||"html",args.get=!0,args.no_events||this.onBeforeGetContent.dispatch(this,args),content="raw"==args.format?this.getBody().innerHTML:this.serializer.serialize(this.getBody(),args),args.content=tinymce.trim(content),args.no_events||this.onGetContent.dispatch(this,args),args.content},isDirty:function(){return tinymce.trim(this.startContent)!=tinymce.trim(this.getContent({format:"raw",no_events:1}))&&!this.isNotDirty},getContainer:function(){var t=this;return t.container||(t.container=DOM.get(t.editorContainer||t.id+"_parent")),t.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return DOM.get(this.settings.content_element||this.id)},getWin:function(){var e,t=this;return t.contentWindow||(e=DOM.get(t.id+"_ifr"))&&(t.contentWindow=e.contentWindow),t.contentWindow},getDoc:function(){var w,t=this;return t.contentDocument||(w=t.getWin())&&(t.contentDocument=w.document),t.contentDocument},getBody:function(){return this.bodyElement||this.getDoc().body},convertURL:function(u,n,e){var t=this,s=t.settings;return s.urlconverter_callback?t.execCallback("urlconverter_callback",u,e,!0,n):!s.convert_urls||e&&"LINK"==e.nodeName||0===u.indexOf("file:")?u:s.relative_urls?t.documentBaseURI.toRelative(u):u=t.documentBaseURI.toAbsolute(u,s.remove_script_host)},addVisual:function(e){var t=this,s=t.settings;e=e||t.getBody(),is(t.hasVisual)||(t.hasVisual=s.visual),each(t.dom.select("table,a",e),function(e){var v;switch(e.nodeName){case"TABLE":return void((v=t.dom.getAttrib(e,"border"))&&"0"!=v||(t.hasVisual?t.dom.addClass(e,s.visual_table_class):t.dom.removeClass(e,s.visual_table_class)));case"A":return void((v=t.dom.getAttrib(e,"name"))&&(t.hasVisual?t.dom.addClass(e,"mceItemAnchor"):t.dom.removeClass(e,"mceItemAnchor")))}}),t.onVisualAid.dispatch(t,e,t.hasVisual)},remove:function(){var t=this,e=t.getContainer();t.removed=1,t.hide(),t.execCallback("remove_instance_callback",t),t.onRemove.dispatch(t),t.onExecCommand.listeners=[],tinymce.remove(t),DOM.remove(e)},destroy:function(s){var t=this;t.destroyed||(s||(tinymce.removeUnload(t.destroy),tinyMCE.onBeforeUnload.remove(t._beforeUnload),t.theme&&t.theme.destroy&&t.theme.destroy(),t.controlManager.destroy(),t.selection.destroy(),t.dom.destroy(),t.settings.content_editable||(Event.clear(t.getWin()),Event.clear(t.getDoc())),Event.clear(t.getBody()),Event.clear(t.formElement)),t.formElement&&(t.formElement.submit=t.formElement._mceOldSubmit,t.formElement._mceOldSubmit=null),t.contentAreaContainer=t.formElement=t.container=t.settings.content_element=t.bodyElement=t.contentDocument=t.contentWindow=null,t.selection&&(t.selection=t.selection.win=t.selection.dom=t.selection.dom.doc=null),t.destroyed=1)},_addEvents:function(){var i,t=this,s=t.settings,dom=t.dom,lo={mouseup:"onMouseUp",mousedown:"onMouseDown",click:"onClick",keyup:"onKeyUp",keydown:"onKeyDown",keypress:"onKeyPress",submit:"onSubmit",reset:"onReset",contextmenu:"onContextMenu",dblclick:"onDblClick",paste:"onPaste"};function eventHandler(e,o){e.type;t.removed||!1!==t.onEvent.dispatch(t,e,o)&&t[lo[e.fakeType||e.type]].dispatch(t,e,o)}if(each(lo,function(v,k){switch(k){case"contextmenu":dom.bind(t.getDoc(),k,eventHandler);break;case"paste":dom.bind(t.getBody(),k,function(e){eventHandler(e)});break;case"submit":case"reset":dom.bind(t.getElement().form||DOM.getParent(t.id,"form"),k,eventHandler);break;default:dom.bind(s.content_editable?t.getBody():t.getDoc(),k,eventHandler)}}),dom.bind(s.content_editable?t.getBody():isGecko?t.getDoc():t.getWin(),"focus",function(e){t.focus(!0)}),tinymce.isGecko&&dom.bind(t.getDoc(),"DOMNodeInserted",function(e){var v;1===(e=e.target).nodeType&&"IMG"===e.nodeName&&(v=e.getAttribute("data-mce-src"))&&(e.src=t.documentBaseURI.toAbsolute(v))}),isGecko){var setOpts=function(){var t=this,d=t.getDoc(),s=t.settings;if(isGecko&&!s.readonly){if(t._isHidden())try{s.content_editable||(d.body.contentEditable=!1,d.body.contentEditable=!0)}catch(ex){}try{d.execCommand("styleWithCSS",0,!1)}catch(ex){if(!t._isHidden())try{d.execCommand("useCSS",0,!0)}catch(ex){}}if(!s.table_inline_editing)try{d.execCommand("enableInlineTableEditing",!1,!1)}catch(ex){}if(!s.object_resizing)try{d.execCommand("enableObjectResizing",!1,!1)}catch(ex){}}};t.onBeforeExecCommand.add(setOpts),t.onMouseDown.add(setOpts)}if(t.onClick.add(function(ed,e){e=e.target,tinymce.isWebKit&&"IMG"==e.nodeName&&t.selection.getSel().setBaseAndExtent(e,0,e,1),"A"==e.nodeName&&dom.hasClass(e,"mceItemAnchor")&&t.selection.select(e),t.nodeChanged()}),t.onMouseUp.add(t.nodeChanged),t.onKeyUp.add(function(ed,e){var c=e.keyCode;(c>=33&&c<=36||c>=37&&c<=40||13==c||45==c||46==c||8==c||tinymce.isMac&&(91==c||93==c)||e.ctrlKey)&&t.nodeChanged()}),t.onReset.add(function(){t.setContent(t.startContent,{format:"raw"})}),s.custom_shortcuts){var find=function(e){var v=null;return e.altKey||e.ctrlKey||e.metaKey?(each(t.shortcuts,function(o){if((!tinymce.isMac||o.ctrl==e.metaKey)&&(tinymce.isMac||o.ctrl==e.ctrlKey)&&o.alt==e.altKey&&o.shift==e.shiftKey)return e.keyCode==o.keyCode||e.charCode&&e.charCode==o.charCode?(v=o,!1):void 0}),v):v};for(s.custom_undo_redo_keyboard_shortcuts&&(t.addShortcut("ctrl+z",t.getLang("undo_desc"),"Undo"),t.addShortcut("ctrl+y",t.getLang("redo_desc"),"Redo")),t.addShortcut("ctrl+b",t.getLang("bold_desc"),"Bold"),t.addShortcut("ctrl+i",t.getLang("italic_desc"),"Italic"),t.addShortcut("ctrl+u",t.getLang("underline_desc"),"Underline"),i=1;i<=6;i++)t.addShortcut("ctrl+"+i,"",["FormatBlock",!1,"h"+i]);t.addShortcut("ctrl+7","",["FormatBlock",!1,"<p>"]),t.addShortcut("ctrl+8","",["FormatBlock",!1,"<div>"]),t.addShortcut("ctrl+9","",["FormatBlock",!1,"<address>"]),t.onKeyUp.add(function(ed,e){if(find(e))return Event.cancel(e)}),t.onKeyPress.add(function(ed,e){if(find(e))return Event.cancel(e)}),t.onKeyDown.add(function(ed,e){var o=find(e);if(o)return o.func.call(o.scope),Event.cancel(e)})}if(tinymce.isIE&&dom.bind(t.getDoc(),"controlselect",function(e){var cb,re=t.resizeInfo;"IMG"===(e=e.target).nodeName&&(re&&dom.unbind(re.node,re.ev,re.cb),dom.hasClass(e,"mceItemNoResize")?(ev="resizestart",cb=dom.bind(e,"resizestart",Event.cancel,Event)):(ev="resizeend",cb=dom.bind(e,ev,function(e){var v;e=e.target,(v=dom.getStyle(e,"width"))&&(dom.setAttrib(e,"width",v.replace(/[^0-9%]+/g,"")),dom.setStyle(e,"width","")),(v=dom.getStyle(e,"height"))&&(dom.setAttrib(e,"height",v.replace(/[^0-9%]+/g,"")),dom.setStyle(e,"height",""))})),re=t.resizeInfo={node:e,ev:ev,cb:cb})}),tinymce.isOpera&&t.onClick.add(function(ed,e){Event.prevent(e)}),s.custom_undo_redo){var addUndo=function(){t.undoManager.typing=!1,t.undoManager.add()};dom.bind(t.getDoc(),"focusout",function(e){!t.removed&&t.undoManager.typing&&addUndo()}),t.dom.bind(t.dom.getRoot(),"dragend",function(e){addUndo()}),t.onKeyUp.add(function(ed,e){var keyCode=e.keyCode;(keyCode>=33&&keyCode<=36||keyCode>=37&&keyCode<=40||13==keyCode||45==keyCode||e.ctrlKey)&&addUndo()}),t.onKeyDown.add(function(ed,e){var sel,keyCode=e.keyCode;return 8==keyCode&&(sel=t.getDoc().selection)&&sel.createRange&&sel.createRange().item?(t.undoManager.beforeChange(),ed.dom.remove(sel.createRange().item(0)),addUndo(),Event.cancel(e)):keyCode>=33&&keyCode<=36||keyCode>=37&&keyCode<=40||13==keyCode||45==keyCode?(tinymce.isIE&&13==keyCode&&t.undoManager.beforeChange(),void(t.undoManager.typing&&addUndo())):void((keyCode<16||keyCode>20)&&224!=keyCode&&91!=keyCode&&!t.undoManager.typing&&(t.undoManager.beforeChange(),t.undoManager.typing=!0,t.undoManager.add()))}),t.onMouseDown.add(function(){t.undoManager.typing&&addUndo()})}if(tinymce.isGecko){var getAttributeApplyFunction=function(){var template=t.dom.getAttribs(t.selection.getStart().cloneNode(!1));return function(){var target=t.selection.getStart();t.dom.removeAllAttribs(target),each(template,function(attr){target.setAttributeNode(attr.cloneNode(!0))})}},isSelectionAcrossElements=function(){var s=t.selection;return!s.isCollapsed()&&s.getStart()!=s.getEnd()};t.onKeyPress.add(function(ed,e){var applyAttributes;if((8==e.keyCode||46==e.keyCode)&&isSelectionAcrossElements())return applyAttributes=getAttributeApplyFunction(),t.getDoc().execCommand("delete",!1,null),applyAttributes(),Event.cancel(e)}),t.dom.bind(t.getDoc(),"cut",function(e){var applyAttributes;isSelectionAcrossElements()&&(applyAttributes=getAttributeApplyFunction(),t.onKeyUp.addToTop(Event.cancel,Event),setTimeout(function(){applyAttributes(),t.onKeyUp.remove(Event.cancel,Event)},0))})}},_isHidden:function(){var s;return isGecko?!(s=this.selection.getSel())||!s.rangeCount||0==s.rangeCount:0}})}(tinymce),function(tinymce){var undefined,each=tinymce.each,TRUE=!0,FALSE=!1;tinymce.EditorCommands=function(editor){var bookmark,dom=editor.dom,selection=editor.selection,commands={state:{},exec:{},value:{}},settings=editor.settings;function execCommand(command,ui,value){var func;return command=command.toLowerCase(),(func=commands.exec[command])?(func(command,ui,value),TRUE):FALSE}function queryCommandState(command){var func;return command=command.toLowerCase(),(func=commands.state[command])?func(command):-1}function addCommands(command_list,type){type=type||"exec",each(command_list,function(callback,command){each(command.toLowerCase().split(","),function(command){commands[type][command]=callback})})}function execNativeCommand(command,ui,value){return ui===undefined&&(ui=FALSE),value===undefined&&(value=null),editor.getDoc().execCommand(command,ui,value)}function isFormatMatch(name){return editor.formatter.match(name)}function toggleFormat(name,value){editor.formatter.toggle(name,value?{value:value}:undefined)}function storeSelection(type){bookmark=selection.getBookmark(type)}function restoreSelection(){selection.moveToBookmark(bookmark)}tinymce.extend(this,{execCommand:execCommand,queryCommandState:queryCommandState,queryCommandValue:function(command){var func;return command=command.toLowerCase(),(func=commands.value[command])?func(command):FALSE},addCommands:addCommands}),addCommands({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){editor.undoManager.add()},"Cut,Copy,Paste":function(command){var failed,doc=editor.getDoc();try{execNativeCommand(command)}catch(ex){failed=TRUE}!failed&&doc.queryCommandSupported(command)||(tinymce.isGecko?editor.windowManager.confirm(editor.getLang("clipboard_msg"),function(state){state&&open("http://www.mozilla.org/editor/midasdemo/securityprefs.html","_blank")}):editor.windowManager.alert(editor.getLang("clipboard_no_support")))},unlink:function(command){selection.isCollapsed()&&selection.select(selection.getNode()),execNativeCommand(command),selection.collapse(FALSE)},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(command){var align=command.substring(7);each("left,center,right,full".split(","),function(name){align!=name&&editor.formatter.remove("align"+name)}),toggleFormat("align"+align),execCommand("mceRepaint")},"InsertUnorderedList,InsertOrderedList":function(command){var listElm,listParent;execNativeCommand(command),(listElm=dom.getParent(selection.getNode(),"ol,ul"))&&(listParent=listElm.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(listParent.nodeName)&&(storeSelection(),dom.split(listParent,listElm),restoreSelection()))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(command){toggleFormat(command)},"ForeColor,HiliteColor,FontName":function(command,ui,value){toggleFormat(command,value)},FontSize:function(command,ui,value){var fontClasses,fontSizes;value>=1&&value<=7&&(fontSizes=tinymce.explode(settings.font_size_style_values),value=(fontClasses=tinymce.explode(settings.font_size_classes))?fontClasses[value-1]||value:fontSizes[value-1]||value),toggleFormat(command,value)},RemoveFormat:function(command){editor.formatter.remove(command)},mceBlockQuote:function(command){toggleFormat("blockquote")},FormatBlock:function(command,ui,value){return toggleFormat(value||"p")},mceCleanup:function(){var bookmark=selection.getBookmark();editor.setContent(editor.getContent({cleanup:TRUE}),{cleanup:TRUE}),selection.moveToBookmark(bookmark)},mceRemoveNode:function(command,ui,value){var node=value||selection.getNode();node!=editor.getBody()&&(storeSelection(),editor.dom.remove(node,TRUE),restoreSelection())},mceSelectNodeDepth:function(command,ui,value){var counter=0;dom.getParent(selection.getNode(),function(node){if(1==node.nodeType&&counter++==value)return selection.select(node),FALSE},editor.getBody())},mceSelectNode:function(command,ui,value){selection.select(value)},mceInsertContent:function(command,ui,value){var parser,serializer,parentNode,rootNode,fragment,args,marker,nodeRect,viewPortRect,rng,node,node2,bookmarkHtml,viewportBodyElement;if(parser=editor.parser,serializer=new tinymce.html.Serializer({},editor.schema),bookmarkHtml='<span id="mce_marker" data-mce-type="bookmark">\ufeff</span>',args={content:value,format:"html"},selection.onBeforeSetContent.dispatch(selection,args),-1==(value=args.content).indexOf("{$caret}")&&(value+="{$caret}"),value=value.replace(/\{\$caret\}/,bookmarkHtml),selection.isCollapsed()||editor.getDoc().execCommand("Delete",!1,null),args={context:(parentNode=selection.getNode()).nodeName.toLowerCase()},"mce_marker"==(node=(fragment=parser.parse(value,args)).lastChild).attr("id"))for(marker=node,node=node.prev;node;node=node.walk(!0))if(3==node.type||!dom.isBlock(node.name)){node.parent.insert(marker,node,"br"===node.name);break}if(args.invalid){for(selection.setContent(bookmarkHtml),parentNode=editor.selection.getNode(),rootNode=editor.getBody(),9==parentNode.nodeType?parentNode=node=rootNode:node=parentNode;node!==rootNode;)parentNode=node,node=node.parentNode;value=parentNode==rootNode?rootNode.innerHTML:dom.getOuterHTML(parentNode),value=serializer.serialize(parser.parse(value.replace(/<span (id="mce_marker"|id=mce_marker).+<\/span>/i,function(){return serializer.serialize(fragment)}))),parentNode==rootNode?dom.setHTML(rootNode,value):dom.setOuterHTML(parentNode,value)}else value=serializer.serialize(fragment),node=parentNode.firstChild,node2=parentNode.lastChild,!node||node===node2&&"BR"===node.nodeName?dom.setHTML(parentNode,value):selection.setContent(value);marker=dom.get("mce_marker"),nodeRect=dom.getRect(marker),viewPortRect=dom.getViewPort(editor.getWin()),(nodeRect.y+nodeRect.h>viewPortRect.y+viewPortRect.h||nodeRect.y<viewPortRect.y||nodeRect.x>viewPortRect.x+viewPortRect.w||nodeRect.x<viewPortRect.x)&&((viewportBodyElement=tinymce.isIE?editor.getDoc().documentElement:editor.getBody()).scrollLeft=nodeRect.x,viewportBodyElement.scrollTop=nodeRect.y-viewPortRect.h+25),rng=dom.createRng(),(node=marker.previousSibling)&&3==node.nodeType?rng.setStart(node,node.nodeValue.length):(rng.setStartBefore(marker),rng.setEndBefore(marker)),dom.remove(marker),selection.setRng(rng),selection.onSetContent.dispatch(selection,args),editor.addVisual()},mceInsertRawHTML:function(command,ui,value){selection.setContent("tiny_mce_marker"),editor.setContent(editor.getContent().replace(/tiny_mce_marker/g,function(){return value}))},mceSetContent:function(command,ui,value){editor.setContent(value)},"Indent,Outdent":function(command){var intentValue,indentUnit,value;intentValue=settings.indentation,indentUnit=/[a-z%]+$/i.exec(intentValue),intentValue=parseInt(intentValue),queryCommandState("InsertUnorderedList")||queryCommandState("InsertOrderedList")?execNativeCommand(command):each(selection.getSelectedBlocks(),function(element){"outdent"==command?(value=Math.max(0,parseInt(element.style.paddingLeft||0)-intentValue),dom.setStyle(element,"paddingLeft",value?value+indentUnit:"")):dom.setStyle(element,"paddingLeft",parseInt(element.style.paddingLeft||0)+intentValue+indentUnit)})},mceRepaint:function(){if(tinymce.isGecko)try{storeSelection(TRUE),selection.getSel()&&selection.getSel().selectAllChildren(editor.getBody()),selection.collapse(TRUE),restoreSelection()}catch(ex){}},mceToggleFormat:function(command,ui,value){editor.formatter.toggle(value)},InsertHorizontalRule:function(){editor.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){editor.hasVisual=!editor.hasVisual,editor.addVisual()},mceReplaceContent:function(command,ui,value){editor.execCommand("mceInsertContent",!1,value.replace(/\{\$selection\}/g,selection.getContent({format:"text"})))},mceInsertLink:function(command,ui,value){var img,style,cls,link=dom.getParent(selection.getNode(),"a");tinymce.is(value,"string")&&(value={href:value}),value.href=value.href.replace(" ","%20"),link?value.href?dom.setAttribs(link,value):editor.dom.remove(link,TRUE):(tinymce.isWebKit&&(img=dom.getParent(selection.getNode(),"img"))&&(style=img.style.cssText,cls=img.className,img.style.cssText=null,img.className=null),execNativeCommand("CreateLink",FALSE,"javascript:mctmp(0);"),style&&(img.style.cssText=style),cls&&(img.className=cls),each(dom.select("a[href='javascript:mctmp(0);']"),function(link){dom.setAttribs(link,value)}))},selectAll:function(){var root=dom.getRoot(),rng=dom.createRng();rng.setStart(root,0),rng.setEnd(root,root.childNodes.length),editor.selection.setRng(rng)}}),addCommands({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(command){return isFormatMatch("align"+command.substring(7))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(command){return isFormatMatch(command)},mceBlockQuote:function(){return isFormatMatch("blockquote")},Outdent:function(){var node;if(settings.inline_styles){if((node=dom.getParent(selection.getStart(),dom.isBlock))&&parseInt(node.style.paddingLeft)>0)return TRUE;if((node=dom.getParent(selection.getEnd(),dom.isBlock))&&parseInt(node.style.paddingLeft)>0)return TRUE}return queryCommandState("InsertUnorderedList")||queryCommandState("InsertOrderedList")||!settings.inline_styles&&!!dom.getParent(selection.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(command){return dom.getParent(selection.getNode(),"insertunorderedlist"==command?"UL":"OL")}},"state"),addCommands({"FontSize,FontName":function(command){var parent,value=0;return(parent=dom.getParent(selection.getNode(),"span"))&&(value="fontsize"==command?parent.style.fontSize:parent.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase()),value}},"value"),settings.custom_undo_redo&&addCommands({Undo:function(){editor.undoManager.undo()},Redo:function(){editor.undoManager.redo()}})}}(tinymce),function(tinymce){var Dispatcher=tinymce.util.Dispatcher;tinymce.UndoManager=function(editor){var self,beforeBookmark,index=0,data=[];return self={typing:!1,onAdd:new Dispatcher(self),onUndo:new Dispatcher(self),onRedo:new Dispatcher(self),beforeChange:function(){beforeBookmark=editor.selection.getBookmark(2,!0)},add:function(level){var i,lastLevel,settings=editor.settings;if((level=level||{}).content=tinymce.trim(editor.getContent({format:"raw",no_events:1})),(lastLevel=data[index])&&lastLevel.content==level.content)return null;if(data[index]&&(data[index].beforeBookmark=beforeBookmark),settings.custom_undo_redo_levels&&data.length>settings.custom_undo_redo_levels){for(i=0;i<data.length-1;i++)data[i]=data[i+1];data.length--,index=data.length}return level.bookmark=editor.selection.getBookmark(2,!0),index<data.length-1&&(data.length=index+1),data.push(level),index=data.length-1,self.onAdd.dispatch(self,level),editor.isNotDirty=0,level},undo:function(){var level;return self.typing&&(self.add(),self.typing=!1),index>0&&(level=data[--index],editor.setContent(level.content,{format:"raw"}),editor.selection.moveToBookmark(level.beforeBookmark),self.onUndo.dispatch(self,level)),level},redo:function(){var level;return index<data.length-1&&(level=data[++index],editor.setContent(level.content,{format:"raw"}),editor.selection.moveToBookmark(level.bookmark),self.onRedo.dispatch(self,level)),level},clear:function(){data=[],index=0,self.typing=!1},hasUndo:function(){return index>0||this.typing},hasRedo:function(){return index<data.length-1&&!this.typing}}}}(tinymce),function(tinymce){var Event=tinymce.dom.Event,isIE=tinymce.isIE,isGecko=tinymce.isGecko,isOpera=tinymce.isOpera,TRUE=(tinymce.each,tinymce.extend,!0),FALSE=!1;tinymce.create("tinymce.ForceBlocks",{ForceBlocks:function(ed){var elm,t=this,s=ed.settings;t.editor=ed,t.dom=ed.dom,elm=(s.forced_root_block||"p").toLowerCase(),s.element=elm.toUpperCase(),ed.onPreInit.add(t.setup,t)},setup:function(){var t=this,ed=t.editor,s=ed.settings,dom=ed.dom,selection=ed.selection,blockElements=ed.schema.getBlockElements();if(s.forced_root_block){var addRootBlocks=function(){var rng,startContainer,startOffset,endContainer,endOffset,rootBlockNode,tempNode,node=selection.getStart(),rootNode=ed.getBody();if(node&&1===node.nodeType){for(;node!=rootNode;){if(blockElements[node.nodeName])return;node=node.parentNode}for((rng=selection.getRng()).setStart?(startContainer=rng.startContainer,startOffset=rng.startOffset,endContainer=rng.endContainer,endOffset=rng.endOffset):(rng.item&&(rng=ed.getDoc().body.createTextRange()).moveToElementText(rng.item(0)),tmpRng=rng.duplicate(),tmpRng.collapse(!0),startOffset=-1*tmpRng.move("character",-16777215),tmpRng.collapsed||(tmpRng=rng.duplicate(),tmpRng.collapse(!1),endOffset=-1*tmpRng.move("character",-16777215)-startOffset)),node=rootNode.firstChild;node;node)3===node.nodeType||1==node.nodeType&&!blockElements[node.nodeName]?(rootBlockNode||(rootBlockNode=dom.create(s.forced_root_block),node.parentNode.insertBefore(rootBlockNode,node)),tempNode=node,node=node.nextSibling,rootBlockNode.appendChild(tempNode)):(rootBlockNode=null,node=node.nextSibling);if(rng.setStart)rng.setStart(startContainer,startOffset),rng.setEnd(endContainer,endOffset),selection.setRng(rng);else try{(rng=ed.getDoc().body.createTextRange()).moveToElementText(rootNode),rng.collapse(!0),rng.moveStart("character",startOffset),endOffset>0&&rng.moveEnd("character",endOffset),rng.select()}catch(ex){}ed.nodeChanged()}};ed.onKeyUp.add(addRootBlocks),ed.onClick.add(addRootBlocks)}if(s.force_br_newlines&&isIE&&ed.onKeyPress.add(function(ed,e){var n;if(13==e.keyCode&&"LI"!=selection.getNode().nodeName)return selection.setContent('<br id="__" /> ',{format:"raw"}),(n=dom.get("__")).removeAttribute("id"),selection.select(n),selection.collapse(),Event.cancel(e)}),s.force_p_newlines&&(isIE?(tinymce.addUnload(function(){t._previousFormats=0}),ed.onKeyPress.add(function(ed,e){t._previousFormats=0,13==e.keyCode&&!e.shiftKey&&ed.selection.isCollapsed()&&s.keep_styles&&(t._previousFormats=function(node){var clone,temp,inner;do{/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(node.nodeName)&&(clone?((temp=node.cloneNode(!1)).appendChild(clone),clone=temp):clone=inner=node.cloneNode(!1),clone.removeAttribute("id"))}while(node=node.parentNode);if(clone)return{wrapper:clone,inner:inner}}(ed.selection.getStart()))}),ed.onKeyUp.add(function(ed,e){if(13==e.keyCode&&!e.shiftKey){var parent=ed.selection.getStart(),fmt=t._previousFormats;!parent.hasChildNodes()&&fmt&&(parent=dom.getParent(parent,dom.isBlock))&&"LI"!=parent.nodeName&&(parent.innerHTML="",t._previousFormats?(parent.appendChild(fmt.wrapper),fmt.inner.innerHTML="\ufeff"):parent.innerHTML="\ufeff",selection.select(parent,1),selection.collapse(!0),ed.getDoc().execCommand("Delete",!1,null),t._previousFormats=0)}})):ed.onKeyPress.add(function(ed,e){13!=e.keyCode||e.shiftKey||t.insertPara(e)||Event.cancel(e)}),isGecko&&ed.onKeyDown.add(function(ed,e){8!=e.keyCode&&46!=e.keyCode||e.shiftKey||t.backspaceDelete(e,8==e.keyCode)})),tinymce.isWebKit){ed.onKeyPress.add(function(ed,e){13==e.keyCode&&(e.shiftKey||s.force_br_newlines&&!dom.getParent(selection.getNode(),"h1,h2,h3,h4,h5,h6,ol,ul"))&&(!function(ed){var br,divYPos,rng=selection.getRng(),div=dom.create("div",null," "),vpHeight=dom.getViewPort(ed.getWin()).h;rng.insertNode(br=dom.create("br")),rng.setStartAfter(br),rng.setEndAfter(br),selection.setRng(rng),selection.getSel().focusNode==br.previousSibling&&(selection.select(dom.insertAfter(dom.doc.createTextNode(" "),br)),selection.collapse(TRUE)),dom.insertAfter(div,br),divYPos=dom.getPos(div).y,dom.remove(div),divYPos>vpHeight&&ed.getWin().scrollTo(0,divYPos)}(ed),Event.cancel(e))})}isIE&&"P"!=s.element&&(ed.onKeyPress.add(function(ed,e){t.lastElm=selection.getNode().nodeName}),ed.onKeyUp.add(function(ed,e){var bl,n=selection.getNode();1===ed.getBody().childNodes.length&&"P"==n.nodeName?(n=dom.rename(n,s.element),selection.select(n),selection.collapse(),ed.nodeChanged()):13!=e.keyCode||e.shiftKey||"P"==t.lastElm||(bl=dom.getParent(n,"p"))&&(dom.rename(bl,s.element),ed.nodeChanged())}))},getParentBlock:function(n){var d=this.dom;return d.getParent(n,d.isBlock)},insertPara:function(e){var rb,ra,dir,sn,so,en,eo,sb,eb,bn,bef,aft,sc,ec,n,y,rng,par,rng2,t=this,ed=t.editor,dom=ed.dom,d=ed.getDoc(),se=ed.settings,s=ed.selection.getSel(),r=s.getRangeAt(0),b=d.body,vp=dom.getViewPort(ed.getWin());if(ed.undoManager.beforeChange(),(rb=d.createRange()).setStart(s.anchorNode,s.anchorOffset),rb.collapse(TRUE),(ra=d.createRange()).setStart(s.focusNode,s.focusOffset),ra.collapse(TRUE),sn=(dir=rb.compareBoundaryPoints(rb.START_TO_END,ra)<0)?s.anchorNode:s.focusNode,so=dir?s.anchorOffset:s.focusOffset,en=dir?s.focusNode:s.anchorNode,eo=dir?s.focusOffset:s.anchorOffset,sn===en&&/^(TD|TH)$/.test(sn.nodeName))return"BR"==sn.firstChild.nodeName&&dom.remove(sn.firstChild),0==sn.childNodes.length?(ed.dom.add(sn,se.element,null,"<br />"),aft=ed.dom.add(sn,se.element,null,"<br />")):(n=sn.innerHTML,sn.innerHTML="",ed.dom.add(sn,se.element,null,n),aft=ed.dom.add(sn,se.element,null,"<br />")),(r=d.createRange()).selectNodeContents(aft),r.collapse(1),ed.selection.setRng(r),FALSE;if(sn==b&&en==b&&b.firstChild&&ed.dom.isBlock(b.firstChild)&&(sn=en=sn.firstChild,so=eo=0,(rb=d.createRange()).setStart(sn,0),(ra=d.createRange()).setStart(en,0)),sn="BODY"==(sn="HTML"==sn.nodeName?d.body:sn).nodeName?sn.firstChild:sn,en="BODY"==(en="HTML"==en.nodeName?d.body:en).nodeName?en.firstChild:en,sb=t.getParentBlock(sn),eb=t.getParentBlock(en),bn=sb?sb.nodeName:se.element,n=t.dom.getParent(sb,"li,pre"))return"LI"==n.nodeName?function(selection,dom,li){var listBlock,block;return dom.isEmpty(li)?(listBlock=dom.getParent(li,"ul,ol"),dom.getParent(listBlock.parentNode,"ul,ol")||(dom.split(listBlock,li),block=dom.create("p",0,'<br data-mce-bogus="1" />'),dom.replace(block,li),selection.select(block,1)),FALSE):TRUE}(ed.selection,t.dom,n):TRUE;sb&&("CAPTION"==sb.nodeName||/absolute|relative|fixed/gi.test(dom.getStyle(sb,"position",1)))&&(bn=se.element,sb=null),eb&&("CAPTION"==eb.nodeName||/absolute|relative|fixed/gi.test(dom.getStyle(sb,"position",1)))&&(bn=se.element,eb=null),(/(TD|TABLE|TH|CAPTION)/.test(bn)||sb&&"DIV"==bn&&/left|right/gi.test(dom.getStyle(sb,"float",1)))&&(bn=se.element,sb=eb=null),bef=sb&&sb.nodeName==bn?sb.cloneNode(0):ed.dom.create(bn),(aft=eb&&eb.nodeName==bn?eb.cloneNode(0):ed.dom.create(bn)).removeAttribute("id"),/^(H[1-6])$/.test(bn)&&(rng=r,(rng2=(par=sb).ownerDocument.createRange()).setStart(rng.endContainer,rng.endOffset),rng2.setEndAfter(par),0==rng2.cloneContents().textContent.length)&&(aft=ed.dom.create(se.element)),n=sc=sn;do{if(n==b||9==n.nodeType||t.dom.isBlock(n)||/(TD|TABLE|TH|CAPTION)/.test(n.nodeName))break;sc=n}while(n=n.previousSibling?n.previousSibling:n.parentNode);n=ec=en;do{if(n==b||9==n.nodeType||t.dom.isBlock(n)||/(TD|TABLE|TH|CAPTION)/.test(n.nodeName))break;ec=n}while(n=n.nextSibling?n.nextSibling:n.parentNode);sc.nodeName==bn?rb.setStart(sc,0):rb.setStartBefore(sc),rb.setEnd(sn,so),bef.appendChild(rb.cloneContents()||d.createTextNode(""));try{ra.setEndAfter(ec)}catch(ex){}function appendStyles(e,en){var nn,n,i,nl=[];if(e.innerHTML="",se.keep_styles){n=en;do{/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(n.nodeName)&&(nn=n.cloneNode(FALSE),dom.setAttrib(nn,"id",""),nl.push(nn))}while(n=n.parentNode)}if(nl.length>0){for(i=nl.length-1,nn=e;i>=0;i--)nn=nn.appendChild(nl[i]);return nl[0].innerHTML=isOpera?" ":"<br />",nl[0]}e.innerHTML=isOpera?" ":"<br />"}return ra.setStart(en,eo),aft.appendChild(ra.cloneContents()||d.createTextNode("")),r=d.createRange(),sc.previousSibling||sc.parentNode.nodeName!=bn?rb.startContainer.nodeName==bn&&0==rb.startOffset?r.setStartBefore(rb.startContainer):r.setStart(rb.startContainer,rb.startOffset):r.setStartBefore(sc.parentNode),ec.nextSibling||ec.parentNode.nodeName!=bn?r.setEnd(ra.endContainer,ra.endOffset):r.setEndAfter(ec.parentNode),r.deleteContents(),isOpera&&ed.getWin().scrollTo(0,vp.y),bef.firstChild&&bef.firstChild.nodeName==bn&&(bef.innerHTML=bef.firstChild.innerHTML),aft.firstChild&&aft.firstChild.nodeName==bn&&(aft.innerHTML=aft.firstChild.innerHTML),dom.isEmpty(bef)&&appendStyles(bef,sn),dom.isEmpty(aft)&&appendStyles(aft,en),isOpera&&parseFloat(opera.version())<9.5?(r.insertNode(bef),r.insertNode(aft)):(r.insertNode(aft),r.insertNode(bef)),aft.normalize(),bef.normalize(),ed.selection.select(aft,!0),ed.selection.collapse(!0),((y=ed.dom.getPos(aft).y)<vp.y||y+25>vp.y+vp.h)&&ed.getWin().scrollTo(0,y<vp.y?y:y-vp.h+25),ed.undoManager.add(),FALSE},backspaceDelete:function(e,bs){var n,w,tn,walker,ed=this.editor,b=ed.getBody(),se=(ed.dom,ed.selection),r=se.getRng(),sc=r.startContainer;if(!bs&&r.collapsed&&1==sc.nodeType&&r.startOffset==sc.childNodes.length)for(walker=new tinymce.dom.TreeWalker(sc.lastChild,sc),n=sc.lastChild;n;n=walker.prev())if(3==n.nodeType)return r.setStart(n,n.nodeValue.length),r.collapse(!0),void se.setRng(r);if(sc&&ed.dom.isBlock(sc)&&!/^(TD|TH)$/.test(sc.nodeName)&&bs&&(0==sc.childNodes.length||1==sc.childNodes.length&&"BR"==sc.firstChild.nodeName)){for(n=sc;(n=n.previousSibling)&&!ed.dom.isBlock(n););if(n){if(sc!=b.firstChild){for(w=ed.dom.doc.createTreeWalker(n,NodeFilter.SHOW_TEXT,null,FALSE);tn=w.nextNode();)n=tn;(r=ed.getDoc().createRange()).setStart(n,n.nodeValue?n.nodeValue.length:0),r.setEnd(n,n.nodeValue?n.nodeValue.length:0),se.setRng(r),ed.dom.remove(sc)}return Event.cancel(e)}}}})}(tinymce),function(tinymce){tinymce.DOM;var Event=tinymce.dom.Event,each=tinymce.each,extend=tinymce.extend;tinymce.create("tinymce.ControlManager",{ControlManager:function(ed,s){var t=this;s=s||{},t.editor=ed,t.controls={},t.onAdd=new tinymce.util.Dispatcher(t),t.onPostRender=new tinymce.util.Dispatcher(t),t.prefix=s.prefix||ed.id+"_",t._cls={},t.onPostRender.add(function(){each(t.controls,function(c){c.postRender()})})},get:function(id){return this.controls[this.prefix+id]||this.controls[id]},setActive:function(id,s){var c=null;return(c=this.get(id))&&c.setActive(s),c},setDisabled:function(id,s){var c=null;return(c=this.get(id))&&c.setDisabled(s),c},add:function(c){var t=this;return c&&(t.controls[c.id]=c,t.onAdd.dispatch(c,t)),c},createControl:function(n){var c,t=this,ed=t.editor;switch(each(ed.plugins,function(p){if(p.createControl&&(c=p.createControl(n,t)))return!1}),n){case"|":case"separator":return t.createSeparator()}return!c&&ed.buttons&&(c=ed.buttons[n])?t.createButton(n,c):t.add(c)},createDropMenu:function(id,s,cc){var c,bm,v,cls,t=this,ed=t.editor;return(s=extend({class:"mceDropDown",constrain:ed.settings.constrain_menus},s)).class=s.class+" "+ed.getParam("skin")+"Skin",(v=ed.getParam("skin_variant"))&&(s.class+=" "+ed.getParam("skin")+"Skin"+v.substring(0,1).toUpperCase()+v.substring(1)),id=t.prefix+id,cls=cc||t._cls.dropmenu||tinymce.ui.DropMenu,(c=t.controls[id]=new cls(id,s)).onAddItem.add(function(c,o){var s=o.settings;s.title=ed.getLang(s.title,s.title),s.onclick||(s.onclick=function(v){s.cmd&&ed.execCommand(s.cmd,s.ui||!1,s.value)})}),ed.onRemove.add(function(){c.destroy()}),tinymce.isIE&&(c.onShowMenu.add(function(){ed.focus(),bm=ed.selection.getBookmark(1)}),c.onHideMenu.add(function(){bm&&(ed.selection.moveToBookmark(bm),bm=0)})),t.add(c)},createListBox:function(id,s,cc){var c,t=this,ed=t.editor;return t.get(id)?null:(s.title=ed.translate(s.title),s.scope=s.scope||ed,s.onselect||(s.onselect=function(v){ed.execCommand(s.cmd,s.ui||!1,v||s.value)}),s=extend({title:s.title,class:"mce_"+id,scope:s.scope,control_manager:t},s),id=t.prefix+id,c=ed.settings.use_native_selects?new tinymce.ui.NativeListBox(id,s):new(cc||t._cls.listbox||tinymce.ui.ListBox)(id,s,ed),t.controls[id]=c,tinymce.isWebKit&&c.onPostRender.add(function(c,n){Event.add(n,"mousedown",function(){ed.bookmark=ed.selection.getBookmark(1)}),Event.add(n,"focus",function(){ed.selection.moveToBookmark(ed.bookmark),ed.bookmark=null})}),c.hideMenu&&ed.onMouseDown.add(c.hideMenu,c),t.add(c))},createButton:function(id,s,cc){var c,t=this,ed=t.editor;return t.get(id)?null:(s.title=ed.translate(s.title),s.label=ed.translate(s.label),s.scope=s.scope||ed,s.onclick||s.menu_button||(s.onclick=function(){ed.execCommand(s.cmd,s.ui||!1,s.value)}),s=extend({title:s.title,class:"mce_"+id,unavailable_prefix:ed.getLang("unavailable",""),scope:s.scope,control_manager:t},s),id=t.prefix+id,s.menu_button?(c=new(cc||t._cls.menubutton||tinymce.ui.MenuButton)(id,s,ed),ed.onMouseDown.add(c.hideMenu,c)):c=new(t._cls.button||tinymce.ui.Button)(id,s,ed),t.add(c))},createMenuButton:function(id,s,cc){return(s=s||{}).menu_button=1,this.createButton(id,s,cc)},createSplitButton:function(id,s,cc){var c,cls,t=this,ed=t.editor;return t.get(id)?null:(s.title=ed.translate(s.title),s.scope=s.scope||ed,s.onclick||(s.onclick=function(v){ed.execCommand(s.cmd,s.ui||!1,v||s.value)}),s.onselect||(s.onselect=function(v){ed.execCommand(s.cmd,s.ui||!1,v||s.value)}),s=extend({title:s.title,class:"mce_"+id,scope:s.scope,control_manager:t},s),id=t.prefix+id,cls=cc||t._cls.splitbutton||tinymce.ui.SplitButton,c=t.add(new cls(id,s,ed)),ed.onMouseDown.add(c.hideMenu,c),c)},createColorSplitButton:function(id,s,cc){var c,cls,bm,t=this,ed=t.editor;return t.get(id)?null:(s.title=ed.translate(s.title),s.scope=s.scope||ed,s.onclick||(s.onclick=function(v){tinymce.isIE&&(bm=ed.selection.getBookmark(1)),ed.execCommand(s.cmd,s.ui||!1,v||s.value)}),s.onselect||(s.onselect=function(v){ed.execCommand(s.cmd,s.ui||!1,v||s.value)}),s=extend({title:s.title,class:"mce_"+id,menu_class:ed.getParam("skin")+"Skin",scope:s.scope,more_colors_title:ed.getLang("more_colors")},s),id=t.prefix+id,cls=cc||t._cls.colorsplitbutton||tinymce.ui.ColorSplitButton,c=new cls(id,s,ed),ed.onMouseDown.add(c.hideMenu,c),ed.onRemove.add(function(){c.destroy()}),tinymce.isIE&&(c.onShowMenu.add(function(){ed.focus(),bm=ed.selection.getBookmark(1)}),c.onHideMenu.add(function(){bm&&(ed.selection.moveToBookmark(bm),bm=0)})),t.add(c))},createToolbar:function(id,s,cc){var c,t=this;return id=t.prefix+id,c=new(cc||t._cls.toolbar||tinymce.ui.Toolbar)(id,s,t.editor),t.get(id)?null:t.add(c)},createToolbarGroup:function(id,s,cc){var c,t=this;return id=t.prefix+id,c=new(cc||this._cls.toolbarGroup||tinymce.ui.ToolbarGroup)(id,s,t.editor),t.get(id)?null:t.add(c)},createSeparator:function(cc){return new(cc||this._cls.separator||tinymce.ui.Separator)},setControlType:function(n,c){return this._cls[n.toLowerCase()]=c},destroy:function(){each(this.controls,function(c){c.destroy()}),this.controls=null}})}(tinymce),function(tinymce){var Dispatcher=tinymce.util.Dispatcher,each=tinymce.each,isIE=tinymce.isIE,isOpera=tinymce.isOpera;tinymce.create("tinymce.WindowManager",{WindowManager:function(ed){var t=this;t.editor=ed,t.onOpen=new Dispatcher(t),t.onClose=new Dispatcher(t),t.params={},t.features={}},open:function(s,p){var w,sw,sh,u,t=this,f="",mo="modal"==t.editor.settings.dialog_type,vp=tinymce.DOM.getViewPort();s=s||{},p=p||{},sw=isOpera?vp.w:screen.width,sh=isOpera?vp.h:screen.height,s.name=s.name||"mc_"+(new Date).getTime(),s.width=parseInt(s.width||320),s.height=parseInt(s.height||240),s.resizable=!0,s.left=s.left||parseInt(sw/2)-s.width/2,s.top=s.top||parseInt(sh/2)-s.height/2,p.inline=!1,p.mce_width=s.width,p.mce_height=s.height,p.mce_auto_focus=s.auto_focus,mo&&isIE&&(s.center=!0,s.help=!1,s.dialogWidth=s.width+"px",s.dialogHeight=s.height+"px",s.scroll=s.scrollbars||!1),each(s,function(v,k){tinymce.is(v,"boolean")&&(v=v?"yes":"no"),/^(name|url)$/.test(k)||(f+=isIE&&mo?(f?";":"")+k+":"+v:(f?",":"")+k+"="+v)}),t.features=s,t.params=p,t.onOpen.dispatch(t,s,p),u=s.url||s.file,u=tinymce._addVer(u);try{isIE&&mo?(w=1,window.showModalDialog(u,window,f)):w=window.open(u,s.name,f)}catch(ex){}w||alert(t.editor.getLang("popup_blocked"))},close:function(w){w.close(),this.onClose.dispatch(this)},createInstance:function(cl,a,b,c,d,e){return new(tinymce.resolve(cl))(a,b,c,d,e)},confirm:function(t,cb,s,w){w=w||window,cb.call(s||this,w.confirm(this._decode(this.editor.getLang(t,t))))},alert:function(tx,cb,s,w){var t=this;(w=w||window).alert(t._decode(t.editor.getLang(tx,tx))),cb&&cb.call(s||t)},resizeBy:function(dw,dh,win){win.resizeBy(dw,dh)},_decode:function(s){return tinymce.DOM.decode(s).replace(/\\n/g,"\n")}})}(tinymce),function(tinymce){tinymce.Formatter=function(ed){var undefined,formats={},each=tinymce.each,dom=ed.dom,selection=ed.selection,TreeWalker=tinymce.dom.TreeWalker,rangeUtils=new tinymce.dom.RangeUtils(dom),isValid=ed.schema.isValidChild,isBlock=dom.isBlock,forcedRootBlock=ed.settings.forced_root_block,nodeIndex=dom.nodeIndex,INVISIBLE_CHAR="\ufeff",MCE_ATTR_RE=/^(src|href|style)$/,FALSE=!1,TRUE=!0,pendingFormats={apply:[],remove:[]};function getParents(node,selector){return dom.getParents(node,selector,dom.getRoot())}function isCaretNode(node){return 1===node.nodeType&&("mceinline"===node.face||"mceinline"===node.style.fontFamily)}function get(name){return name?formats[name]:formats}var getTextDecoration=function(node){var decoration;return ed.dom.getParent(node,function(n){return(decoration=ed.dom.getStyle(n,"text-decoration"))&&"none"!==decoration}),decoration},processUnderlineAndColor=function(node){var textDecoration;1===node.nodeType&&node.parentNode&&1===node.parentNode.nodeType&&(textDecoration=getTextDecoration(node.parentNode),ed.dom.getStyle(node,"color")&&textDecoration?ed.dom.setStyle(node,"text-decoration",textDecoration):ed.dom.getStyle(node,"textdecoration")===textDecoration&&ed.dom.setStyle(node,"text-decoration",null))};function apply(name,vars,node){var bookmark,rng,formatList=get(name),format=formatList[0],isCollapsed=selection.isCollapsed();function setElementFormat(elm,fmt){fmt=fmt||format,elm&&(each(fmt.styles,function(value,name){dom.setStyle(elm,name,replaceVars(value,vars))}),each(fmt.attributes,function(value,name){dom.setAttrib(elm,name,replaceVars(value,vars))}),each(fmt.classes,function(value){value=replaceVars(value,vars),dom.hasClass(elm,value)||dom.addClass(elm,value)}))}function applyRngStyle(rng){var wrapName,wrapElm,newWrappers=[];wrapName=format.inline||format.block,setElementFormat(wrapElm=dom.create(wrapName)),rangeUtils.walk(rng,function(nodes){var currentWrapElm;each(nodes,function process(node){var found,nodeName=node.nodeName.toLowerCase(),parentName=node.parentNode.nodeName.toLowerCase();return isEq(nodeName,"br")?(currentWrapElm=0,void(format.block&&dom.remove(node))):format.wrapper&&matchNode(node,name,vars)?void(currentWrapElm=0):format.block&&!format.wrapper&&function(name){return/^(h[1-6]|p|div|pre|address|dl|dt|dd)$/.test(name)}(nodeName)?(setElementFormat(node=dom.rename(node,wrapName)),newWrappers.push(node),void(currentWrapElm=0)):void(format.selector&&(each(formatList,function(format){"collapsed"in format&&format.collapsed!==isCollapsed||dom.is(node,format.selector)&&!isCaretNode(node)&&(setElementFormat(node,format),found=!0)}),!format.inline||found)?currentWrapElm=0:isValid(wrapName,nodeName)&&isValid(parentName,wrapName)&&(3!==node.nodeType||1!==node.nodeValue.length||65279!==node.nodeValue.charCodeAt(0))?(currentWrapElm||(currentWrapElm=wrapElm.cloneNode(FALSE),node.parentNode.insertBefore(currentWrapElm,node),newWrappers.push(currentWrapElm)),currentWrapElm.appendChild(node)):"li"==nodeName?(currentWrapElm||(liTextNode=node.ownerDocument.createTextNode(""),each(tinymce.grep(node.childNodes),function(n){3==n.nodeType&&(liTextNode.nodeValue+=n.nodeValue,n.parentNode.removeChild(n))}),currentWrapElm=wrapElm.cloneNode(FALSE),node.insertBefore(currentWrapElm,node.firstChild),newWrappers.push(currentWrapElm)),currentWrapElm.appendChild(liTextNode)):(currentWrapElm=0,each(tinymce.grep(node.childNodes),process),currentWrapElm=0))})}),!1===format.wrap_links&&each(newWrappers,function(node){!function process(node){var i,currentWrapElm,children;if("A"===node.nodeName){for(currentWrapElm=wrapElm.cloneNode(FALSE),newWrappers.push(currentWrapElm),children=tinymce.grep(node.childNodes),i=0;i<children.length;i++)currentWrapElm.appendChild(children[i]);node.appendChild(currentWrapElm)}each(tinymce.grep(node.childNodes),process)}(node)}),each(newWrappers,function(node){var childCount;if(childCount=function(node){var count=0;return each(node.childNodes,function(node){isWhiteSpaceNode(node)||isBookmarkNode(node)||count++}),count}(node),!(newWrappers.length>1)&&isBlock(node)||0!==childCount){if(format.inline||format.wrapper){if(format.exact||1!==childCount||(node=function(node){var child,clone;return each(node.childNodes,function(node){if(1==node.nodeType&&!isBookmarkNode(node)&&!isCaretNode(node))return child=node,FALSE}),child&&matchName(child,format)&&(setElementFormat(clone=child.cloneNode(FALSE)),dom.replace(clone,node,TRUE),dom.remove(child,1)),clone||node}(node)),each(formatList,function(format){each(dom.select(format.inline,node),function(child){var parent;if(!1===format.wrap_links){parent=child.parentNode;do{if("A"===parent.nodeName)return}while(parent=parent.parentNode)}removeFormat(format,vars,child,format.exact?child:null)})}),matchNode(node.parentNode,name,vars))return dom.remove(node,1),node=0,TRUE;format.merge_with_parents&&dom.getParent(node.parentNode,function(parent){if(matchNode(parent,name,vars))return dom.remove(node,1),node=0,TRUE}),node&&(node=mergeSiblings(node=mergeSiblings(getNonWhiteSpaceSibling(node),node),getNonWhiteSpaceSibling(node,TRUE)))}}else dom.remove(node,1)})}if(format)if(node)(rng=dom.createRng()).setStartBefore(node),rng.setEndAfter(node),applyRngStyle(expandRng(rng,formatList));else if(isCollapsed&&format.inline&&!dom.select("td.mceSelected,th.mceSelected").length)performCaretAction("apply",name,vars);else{var curSelNode=ed.selection.getNode();bookmark=selection.getBookmark(),applyRngStyle(expandRng(selection.getRng(TRUE),formatList)),format.styles&&(format.styles.color||format.styles.textDecoration)&&(tinymce.walk(curSelNode,processUnderlineAndColor,"childNodes"),processUnderlineAndColor(curSelNode)),selection.moveToBookmark(bookmark),selection.setRng(function(rng){var walker,node,container=rng.startContainer,offset=rng.startOffset;if((1==container.nodeType||""===container.nodeValue)&&(container=1==container.nodeType?container.childNodes[offset]:container))for(node=(walker=new TreeWalker(container,container.parentNode)).current();node;node=walker.next())if(3==node.nodeType&&!isWhiteSpaceNode(node)){rng.setStart(node,0);break}return rng}(selection.getRng(TRUE))),ed.nodeChanged()}}function remove(name,vars,node){var bookmark,rng,formatList=get(name),format=formatList[0];function splitToFormatRoot(container){return function(format_root,container,target,split){var parent,clone,lastClone,firstClone,i,formatRootParent;if(format_root){for(formatRootParent=format_root.parentNode,parent=container.parentNode;parent&&parent!=formatRootParent;parent=parent.parentNode){for(clone=parent.cloneNode(FALSE),i=0;i<formatList.length;i++)if(removeFormat(formatList[i],vars,clone,clone)){clone=0;break}clone&&(lastClone&&clone.appendChild(lastClone),firstClone||(firstClone=clone),lastClone=clone)}!split||format.mixed&&isBlock(format_root)||(container=dom.split(format_root,container)),lastClone&&(target.parentNode.insertBefore(lastClone,target),firstClone.appendChild(target))}return container}(function(container){var formatRoot;return each(getParents(container.parentNode).reverse(),function(parent){var format;formatRoot||"_start"==parent.id||"_end"==parent.id||(format=matchNode(parent,name,vars))&&!1!==format.split&&(formatRoot=parent)}),formatRoot}(container),container,container,!0)}function unwrap(start){var node=dom.get(start?"_start":"_end"),out=node[start?"firstChild":"lastChild"];return isBookmarkNode(out)&&(out=out[start?"firstChild":"lastChild"]),dom.remove(node,!0),out}function removeRngStyle(rng){var startContainer,endContainer;rng=expandRng(rng,formatList,TRUE),format.split&&((startContainer=getContainer(rng,TRUE))!=(endContainer=getContainer(rng))?(startContainer=wrap(startContainer,"span",{id:"_start","data-mce-type":"bookmark"}),endContainer=wrap(endContainer,"span",{id:"_end","data-mce-type":"bookmark"}),splitToFormatRoot(startContainer),splitToFormatRoot(endContainer),startContainer=unwrap(TRUE),endContainer=unwrap()):startContainer=endContainer=splitToFormatRoot(startContainer),rng.startContainer=startContainer.parentNode,rng.startOffset=nodeIndex(startContainer),rng.endContainer=endContainer.parentNode,rng.endOffset=nodeIndex(endContainer)+1),rangeUtils.walk(rng,function(nodes){each(nodes,function(node){!function process(node){var children,i,l;for(children=tinymce.grep(node.childNodes),i=0,l=formatList.length;i<l&&!removeFormat(formatList[i],vars,node,node);i++);if(format.deep)for(i=0,l=children.length;i<l;i++)process(children[i])}(node),1===node.nodeType&&"underline"===ed.dom.getStyle(node,"text-decoration")&&node.parentNode&&"underline"===getTextDecoration(node.parentNode)&&removeFormat({deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},null,node)})})}if(node)return(rng=dom.createRng()).setStartBefore(node),rng.setEndAfter(node),void removeRngStyle(rng);selection.isCollapsed()&&format.inline&&!dom.select("td.mceSelected,th.mceSelected").length?performCaretAction("remove",name,vars):(bookmark=selection.getBookmark(),removeRngStyle(selection.getRng(TRUE)),selection.moveToBookmark(bookmark),match(name,vars,selection.getStart())&&function(rng){var walker,node,nodes,tmpNode,container=rng.startContainer,offset=rng.startOffset;if(3==container.nodeType&&offset>=container.nodeValue.length-1&&(container=container.parentNode,offset=nodeIndex(container)+1),1==container.nodeType)for(container=(nodes=container.childNodes)[Math.min(offset,nodes.length-1)],walker=new TreeWalker(container),offset>nodes.length-1&&walker.next(),node=walker.current();node;node=walker.next())if(3==node.nodeType&&!isWhiteSpaceNode(node))return tmpNode=dom.create("a",null,INVISIBLE_CHAR),node.parentNode.insertBefore(tmpNode,node),rng.setStart(node,0),selection.setRng(rng),void dom.remove(tmpNode)}(selection.getRng(!0)),ed.nodeChanged())}function matchNode(node,name,vars,similar){var format,i,classes,formatList=get(name);function matchItems(node,format,item_name){var key,value,i,items=format[item_name];if(items)if(items.length===undefined){for(key in items)if(items.hasOwnProperty(key)){if(value="attributes"===item_name?dom.getAttrib(node,key):getStyle(node,key),similar&&!value&&!format.exact)return;if((!similar||format.exact)&&!isEq(value,replaceVars(items[key],vars)))return}}else for(i=0;i<items.length;i++)if("attributes"===item_name?dom.getAttrib(node,items[i]):getStyle(node,items[i]))return format;return format}if(formatList&&node)for(i=0;i<formatList.length;i++)if(matchName(node,format=formatList[i])&&matchItems(node,format,"attributes")&&matchItems(node,format,"styles")){if(classes=format.classes)for(i=0;i<classes.length;i++)if(!dom.hasClass(node,classes[i]))return;return format}}function match(name,vars,node){var startNode,i;function matchParents(node){return matchNode(node=dom.getParent(node,function(node){return!!matchNode(node,name,vars,!0)}),name,vars)}if(node)return matchParents(node);if(selection.isCollapsed()){for(i=pendingFormats.apply.length-1;i>=0;i--)if(pendingFormats.apply[i].name==name)return!0;for(i=pendingFormats.remove.length-1;i>=0;i--)if(pendingFormats.remove[i].name==name)return!1;return matchParents(selection.getNode())}return matchParents(node=selection.getNode())?TRUE:(startNode=selection.getStart())!=node&&matchParents(startNode)?TRUE:FALSE}function matchName(node,format){return isEq(node,format.inline)?TRUE:isEq(node,format.block)?TRUE:format.selector?dom.is(node,format.selector):void 0}function isEq(str1,str2){return str1=str1||"",str2=str2||"",str1=""+(str1.nodeName||str1),str2=""+(str2.nodeName||str2),str1.toLowerCase()==str2.toLowerCase()}function getStyle(node,name){var styleVal=dom.getStyle(node,name);return"color"!=name&&"backgroundColor"!=name||(styleVal=dom.toHex(styleVal)),"fontWeight"==name&&700==styleVal&&(styleVal="bold"),""+styleVal}function replaceVars(value,vars){return"string"!=typeof value?value=value(vars):vars&&(value=value.replace(/%(\w+)/g,function(str,name){return vars[name]||str})),value}function isWhiteSpaceNode(node){return node&&3===node.nodeType&&/^([\s\r\n]+|)$/.test(node.nodeValue)}function wrap(node,name,attrs){var wrapper=dom.create(name,attrs);return node.parentNode.insertBefore(wrapper,node),wrapper.appendChild(node),wrapper}function expandRng(rng,format,remove){var sibling,lastIdx,leaf,startContainer=rng.startContainer,startOffset=rng.startOffset,endContainer=rng.endContainer,endOffset=rng.endOffset;function findParentContainer(container,child_name,sibling_name,root){var parent;for(root=root||dom.getRoot();;){if((parent=container.parentNode)==root||!format[0].block_expand&&isBlock(parent))return container;for(sibling=parent[child_name];sibling&&sibling!=container;sibling=sibling[sibling_name]){if(1==sibling.nodeType&&!isBookmarkNode(sibling))return container;if(3==sibling.nodeType&&!isWhiteSpaceNode(sibling))return container}container=container.parentNode}return container}function findLeaf(node,offset){for(offset===undefined&&(offset=3===node.nodeType?node.length:node.childNodes.length);node&&node.hasChildNodes();)(node=node.childNodes[offset])&&(offset=3===node.nodeType?node.length:node.childNodes.length);return{node:node,offset:offset}}if(1==startContainer.nodeType&&startContainer.hasChildNodes()&&(lastIdx=startContainer.childNodes.length-1,3==(startContainer=startContainer.childNodes[startOffset>lastIdx?lastIdx:startOffset]).nodeType&&(startOffset=0)),1==endContainer.nodeType&&endContainer.hasChildNodes()&&(lastIdx=endContainer.childNodes.length-1,3==(endContainer=endContainer.childNodes[endOffset>lastIdx?lastIdx:endOffset-1]).nodeType&&(endOffset=endContainer.nodeValue.length)),isBookmarkNode(startContainer.parentNode)&&(startContainer=startContainer.parentNode),isBookmarkNode(startContainer)&&(startContainer=startContainer.nextSibling||startContainer),isBookmarkNode(endContainer.parentNode)&&(endOffset=dom.nodeIndex(endContainer),endContainer=endContainer.parentNode),isBookmarkNode(endContainer)&&endContainer.previousSibling&&(endOffset=(endContainer=endContainer.previousSibling).length),format[0].inline&&(leaf=findLeaf(endContainer,endOffset)).node){for(;leaf.node&&0===leaf.offset&&leaf.node.previousSibling;)leaf=findLeaf(leaf.node.previousSibling);leaf.node&&leaf.offset>0&&3===leaf.node.nodeType&&" "===leaf.node.nodeValue.charAt(leaf.offset-1)&&(leaf.offset>1?(endContainer=leaf.node).splitText(leaf.offset-1):leaf.node.previousSibling&&(endContainer=leaf.node.previousSibling))}if((format[0].inline||format[0].block_expand)&&(startContainer=findParentContainer(startContainer,"firstChild","nextSibling"),endContainer=findParentContainer(endContainer,"lastChild","previousSibling")),format[0].selector&&format[0].expand!==FALSE&&!format[0].inline){var findSelectorEndPoint=function(container,sibling_name){var parents,i,y,curFormat;for(3==container.nodeType&&0==container.nodeValue.length&&container[sibling_name]&&(container=container[sibling_name]),parents=getParents(container),i=0;i<parents.length;i++)for(y=0;y<format.length;y++)if(!("collapsed"in(curFormat=format[y])&&curFormat.collapsed!==rng.collapsed)&&dom.is(parents[i],curFormat.selector))return parents[i];return container};startContainer=findSelectorEndPoint(startContainer,"previousSibling"),endContainer=findSelectorEndPoint(endContainer,"nextSibling")}if(format[0].block||format[0].selector){var findBlockEndPoint=function(container,sibling_name,sibling_name2){var node;if(format[0].wrapper||(node=dom.getParent(container,format[0].block)),node||(node=dom.getParent(3==container.nodeType?container.parentNode:container,isBlock)),node&&format[0].wrapper&&(node=getParents(node,"ul,ol").reverse()[0]||node),!node)for(node=container;node[sibling_name]&&!isBlock(node[sibling_name])&&!isEq(node=node[sibling_name],"br"););return node||container};startContainer=findBlockEndPoint(startContainer,"previousSibling"),endContainer=findBlockEndPoint(endContainer,"nextSibling"),format[0].block&&(isBlock(startContainer)||(startContainer=findParentContainer(startContainer,"firstChild","nextSibling")),isBlock(endContainer)||(endContainer=findParentContainer(endContainer,"lastChild","previousSibling")))}return 1==startContainer.nodeType&&(startOffset=nodeIndex(startContainer),startContainer=startContainer.parentNode),1==endContainer.nodeType&&(endOffset=nodeIndex(endContainer)+1,endContainer=endContainer.parentNode),{startContainer:startContainer,startOffset:startOffset,endContainer:endContainer,endOffset:endOffset}}function removeFormat(format,vars,node,compare_node){var i,attrs,stylesModified;if(!matchName(node,format))return FALSE;if("all"!=format.remove)for(each(format.styles,function(value,name){value=replaceVars(value,vars),"number"==typeof name&&(name=value,compare_node=0),compare_node&&!isEq(getStyle(compare_node,name),value)||dom.setStyle(node,name,""),stylesModified=1}),stylesModified&&""==dom.getAttrib(node,"style")&&(node.removeAttribute("style"),node.removeAttribute("data-mce-style")),each(format.attributes,function(value,name){var valueOut;if(value=replaceVars(value,vars),"number"==typeof name&&(name=value,compare_node=0),!compare_node||isEq(dom.getAttrib(compare_node,name),value)){if("class"==name&&(value=dom.getAttrib(node,name))&&(valueOut="",each(value.split(/\s+/),function(cls){/mce\w+/.test(cls)&&(valueOut+=(valueOut?" ":"")+cls)}),valueOut))return void dom.setAttrib(node,name,valueOut);"class"==name&&node.removeAttribute("className"),MCE_ATTR_RE.test(name)&&node.removeAttribute("data-mce-"+name),node.removeAttribute(name)}}),each(format.classes,function(value){value=replaceVars(value,vars),compare_node&&!dom.hasClass(compare_node,value)||dom.removeClass(node,value)}),attrs=dom.getAttribs(node),i=0;i<attrs.length;i++)if(0!==attrs[i].nodeName.indexOf("_"))return FALSE;return"none"!=format.remove?(function(node,format){var rootBlockElm,parentNode=node.parentNode;if(format.block)if(forcedRootBlock)parentNode==dom.getRoot()&&(format.list_block&&isEq(node,format.list_block)||each(tinymce.grep(node.childNodes),function(node){isValid(forcedRootBlock,node.nodeName.toLowerCase())?rootBlockElm?rootBlockElm.appendChild(node):rootBlockElm=wrap(node,forcedRootBlock):rootBlockElm=0}));else{var find=function(node,next,inc){return!(node=getNonWhiteSpaceSibling(node,next,inc))||"BR"==node.nodeName||isBlock(node)};isBlock(node)&&!isBlock(parentNode)&&(find(node,FALSE)||find(node.firstChild,TRUE,1)||node.insertBefore(dom.create("br"),node.firstChild),find(node,TRUE)||find(node.lastChild,FALSE,1)||node.appendChild(dom.create("br")))}if(format.selector&&format.inline&&!isEq(format.inline,node))return;dom.remove(node,1)}(node,format),TRUE):void 0}function getNonWhiteSpaceSibling(node,next,inc){if(node)for(next=next?"nextSibling":"previousSibling",node=inc?node:node[next];node;node=node[next])if(1==node.nodeType||!isWhiteSpaceNode(node))return node}function isBookmarkNode(node){return node&&1==node.nodeType&&"bookmark"==node.getAttribute("data-mce-type")}function mergeSiblings(prev,next){var sibling,tmpSibling;if(prev&&next){var findElementSibling=function(node,sibling_name){for(sibling=node;sibling;sibling=sibling[sibling_name]){if(3==sibling.nodeType&&0!==sibling.nodeValue.length)return node;if(1==sibling.nodeType&&!isBookmarkNode(sibling))return sibling}return node};if(prev=findElementSibling(prev,"previousSibling"),next=findElementSibling(next,"nextSibling"),function(node1,node2){if(node1.nodeName!=node2.nodeName)return FALSE;function getAttribs(node){var attribs={};return each(dom.getAttribs(node),function(attr){var name=attr.nodeName.toLowerCase();0!==name.indexOf("_")&&"style"!==name&&(attribs[name]=dom.getAttrib(node,name))}),attribs}function compareObjects(obj1,obj2){var value,name;for(name in obj1)if(obj1.hasOwnProperty(name)){if((value=obj2[name])===undefined)return FALSE;if(obj1[name]!=value)return FALSE;delete obj2[name]}for(name in obj2)if(obj2.hasOwnProperty(name))return FALSE;return TRUE}return compareObjects(getAttribs(node1),getAttribs(node2))&&compareObjects(dom.parseStyle(dom.getAttrib(node1,"style")),dom.parseStyle(dom.getAttrib(node2,"style")))?TRUE:FALSE}(prev,next)){for(sibling=prev.nextSibling;sibling&&sibling!=next;)tmpSibling=sibling,sibling=sibling.nextSibling,prev.appendChild(tmpSibling);return dom.remove(next),each(tinymce.grep(next.childNodes),function(node){prev.appendChild(node)}),prev}}return next}function getContainer(rng,start){var container,offset,lastIdx;return container=rng[start?"startContainer":"endContainer"],offset=rng[start?"startOffset":"endOffset"],1==container.nodeType&&(lastIdx=container.childNodes.length-1,!start&&offset&&offset--,container=container.childNodes[offset>lastIdx?lastIdx:offset]),container}function performCaretAction(type,name,vars){var i,currentPendingFormats=pendingFormats[type],otherPendingFormats=pendingFormats["apply"==type?"remove":"apply"];function hasPending(){return pendingFormats.apply.length||pendingFormats.remove.length}function resetPending(){pendingFormats.apply=[],pendingFormats.remove=[]}function perform(caret_node){each(pendingFormats.apply.reverse(),function(item){apply(item.name,item.vars,caret_node),"forecolor"===item.name&&item.vars.value&&processUnderlineAndColor(caret_node.parentNode)}),each(pendingFormats.remove.reverse(),function(item){remove(item.name,item.vars,caret_node)}),dom.remove(caret_node,1),resetPending()}for(i=currentPendingFormats.length-1;i>=0;i--)if(currentPendingFormats[i].name==name)return;for(currentPendingFormats.push({name:name,vars:vars}),i=otherPendingFormats.length-1;i>=0;i--)otherPendingFormats[i].name==name&&otherPendingFormats.splice(i,1);hasPending()&&(ed.getDoc().execCommand("FontName",!1,"mceinline"),pendingFormats.lastRng=selection.getRng(),each(dom.select("font,span"),function(node){var bookmark;isCaretNode(node)&&(bookmark=selection.getBookmark(),perform(node),selection.moveToBookmark(bookmark),ed.nodeChanged())}),!pendingFormats.isListening&&hasPending()&&(pendingFormats.isListening=!0,each("onKeyDown,onKeyUp,onKeyPress,onMouseUp".split(","),function(event){ed[event].addToTop(function(ed,e){hasPending()&&!tinymce.dom.RangeUtils.compareRanges(pendingFormats.lastRng,selection.getRng())&&(each(dom.select("font,span"),function(node){var textNode,rng;if(isCaretNode(node)){for(textNode=node.firstChild;textNode&&3!=textNode.nodeType;)textNode=textNode.firstChild;textNode?(perform(node),(rng=dom.createRng()).setStart(textNode,textNode.nodeValue.length),rng.setEnd(textNode,textNode.nodeValue.length),selection.setRng(rng),ed.nodeChanged()):dom.remove(node)}}),"keyup"!=e.type&&"mouseup"!=e.type||resetPending())})})))}tinymce.extend(this,{get:get,register:function register(name,format){name&&("string"!=typeof name?each(name,function(format,name){register(name,format)}):(format=format.length?format:[format],each(format,function(format){format.deep===undefined&&(format.deep=!format.selector),format.split===undefined&&(format.split=!format.selector||format.inline),format.remove===undefined&&format.selector&&!format.inline&&(format.remove="none"),format.selector&&format.inline&&(format.mixed=!0,format.block_expand=!0),"string"==typeof format.classes&&(format.classes=format.classes.split(/\s+/))}),formats[name]=format))},apply:apply,remove:remove,toggle:function(name,vars,node){var fmt=get(name);!match(name,vars,node)||"toggle"in fmt[0]&&!fmt[0].toggle?apply(name,vars,node):remove(name,vars,node)},match:match,matchAll:function(names,vars){var startElement,i,ni,name,matchedFormatNames=[],checkedMap={};if(selection.isCollapsed()){for(ni=0;ni<names.length;ni++)for(i=pendingFormats.remove.length-1;i>=0;i--)if(name=names[ni],pendingFormats.remove[i].name==name){checkedMap[name]=!0;break}for(i=pendingFormats.apply.length-1;i>=0;i--)for(ni=0;ni<names.length;ni++)name=names[ni],checkedMap[name]||pendingFormats.apply[i].name!=name||(checkedMap[name]=!0,matchedFormatNames.push(name))}return startElement=selection.getStart(),dom.getParent(startElement,function(node){var i,name;for(i=0;i<names.length;i++)name=names[i],!checkedMap[name]&&matchNode(node,name,vars)&&(checkedMap[name]=!0,matchedFormatNames.push(name))}),matchedFormatNames},matchNode:matchNode,canApply:function(name){var parents,i,x,selector,formatList=get(name);if(formatList)for(parents=getParents(selection.getStart()),x=formatList.length-1;x>=0;x--){if(!(selector=formatList[x].selector))return TRUE;for(i=parents.length-1;i>=0;i--)if(dom.is(parents[i],selector))return TRUE}return FALSE}})}}(tinymce),tinymce.onAddEditor.add(function(tinymce,ed){var filters,fontSizes,dom,settings=ed.settings;if(settings.inline_styles){var replaceWithSpan=function(node,styles){tinymce.each(styles,function(value,name){value&&dom.setStyle(node,name,value)}),dom.rename(node,"span")},convert=function(editor,params){dom=editor.dom,settings.convert_fonts_to_spans&&tinymce.each(dom.select("font,u,strike",params.node),function(node){filters[node.nodeName.toLowerCase()](ed.dom,node)})};fontSizes=tinymce.explode(settings.font_size_style_values),filters={font:function(dom,node){replaceWithSpan(node,{backgroundColor:node.style.backgroundColor,color:node.color,fontFamily:node.face,fontSize:fontSizes[parseInt(node.size)-1]})},u:function(dom,node){replaceWithSpan(node,{textDecoration:"underline"})},strike:function(dom,node){replaceWithSpan(node,{textDecoration:"line-through"})}},ed.onPreProcess.add(convert),ed.onSetContent.add(convert),ed.onInit.add(function(){ed.selection.onSetContent.add(convert)})}})},1673:function(module,exports,__webpack_require__){"use strict";var $,renderStars;$=jQuery,renderStars=function(editObj){editObj.$editor().find(".star").removeClass("star-on").slice(1,editObj.curValue+1).addClass("star-on")},$.blistEditor.addEditor("stars",{editorAdded:function(){this._super.apply(this,arguments);var editObj=this;editObj.flattenValue(),editObj.curValue=editObj.originalValue,editObj.$dom().click(function(){editObj.focus()}).find(".star").mousedown(function(e){e.stopPropagation()}).mouseup(function(e){e.stopPropagation()}).mouseenter(function(e){!function(editObj,event){editObj.$editor().addClass("hover").find(".star").removeClass("star-on"),$(event.currentTarget).is(".star-clear")||$(event.currentTarget).prevAll(".star:not(.star-clear)").andSelf().addClass("star-on")}(editObj,e)}).mouseleave(function(e){!function(editObj){editObj.$editor().removeClass("hover"),renderStars(editObj)}(editObj)}).click(function(e){!function(editObj,event){editObj.curValue=editObj.$editor().removeClass("hover").find(".star").index($(event.currentTarget)),editObj.changed()}(editObj,e)}).end().find(":input").keypress(function(e){32==e.keyCode&&e.stopPropagation()}).keydown(function(e){!function(editObj,event){if(32==event.keyCode)_.isNumber(editObj.curValue)||(editObj.curValue=0),event.stopPropagation(),event.shiftKey?editObj.curValue--:editObj.curValue++,editObj.curValue>editObj.range()&&(editObj.curValue=0),editObj.curValue<0&&(editObj.curValue=editObj.range()),renderStars(editObj);else if(event.keyCode>=48&&event.keyCode<=57){var num=event.keyCode-48;num<=editObj.range()&&(editObj.curValue=num,renderStars(editObj))}else 46!=event.keyCode&&8!=event.keyCode||(editObj.curValue=0,renderStars(editObj))}(editObj,e)})},$editor:function(){if(!this._$editor){this.flattenValue();for(var align=this.format.align?" align-"+this.format.align:"",edHtml='<div class="blist-table-editor type-'+this.type.name+align+'"><input class="hiddenTextField" /><span class="star star-clear" title="Clear"></span>',i=0;i<this.range();i++)edHtml+='<span class="star'+(i<this.originalValue?" star-on":"")+'"></span>';edHtml+="</div>",this._$editor=$(edHtml)}return this._$editor},range:function(){return void 0===this._range&&(this._range=parseFloat(this.format.range),(this._range<=0||isNaN(this._range))&&(this._range=5)),this._range},currentValue:function(){return 0===this.curValue?null:this.curValue},querySize:function(){return{width:this.$editor().find(".star-clear").outerWidth(!0)+this.$editor().find(".star").eq(1).outerWidth(!0)*this.range()}},focus:function(){this.$dom().find(":input").focus()}})},1674:function(module,exports,__webpack_require__){"use strict";var $;($=jQuery).blistEditor.addEditor("checkbox",{editorAdded:function(){this._super.apply(this,arguments);var editObj=this;editObj.$dom().click(function(){editObj.focus()}).find(":input").mousedown(function(e){e.stopPropagation()}).mouseup(function(e){e.stopPropagation()}).keydown(function(e){32==e.keyCode&&e.stopPropagation()}).keypress(function(e){32==e.keyCode&&e.stopPropagation()}).click(function(){editObj.changed()})},$editor:function(){if(!this._$editor){this.flattenValue();var align=this.format.align?" align-"+this.format.align:"";this._$editor=$('<div class="blist-table-editor type-'+this.type.name+align+'"><input type="checkbox"'+(!0===this.originalValue?' checked="checked"':"")+" /></div>")}return this._$editor},isValid:function(){var curVal=this.currentValue();return _.isBoolean(curVal)||_.isNull(curVal)},currentValue:function(){var val=this.$editor().find(":checkbox").value();return!1===val?_.isBoolean(this.originalValue)?null:this.originalValue:val},focus:function(){this.$dom().find(":checkbox").focus()}})},1675:function(module,exports,__webpack_require__){"use strict";var $,renderValue;$=jQuery,renderValue=function(value){var $row=$(this),$icon=$('<span class="icon-filler"></span>');value.icon&&($icon=$('<img class="icon-img" src="'+value.icon+'" />'));var $spanLabel=$('<span class="label"></span>').html($.htmlEscape(value.label));$row.empty().append($icon).append($spanLabel)},$.blistEditor.addEditor("lookupList",{editorAdded:function(){this._super.apply(this,arguments);var editObj=this;editObj._valuesList=[{id:"null",label:"(Blank)"}];var ddl=(editObj.customProperties.dropDownList||{}).values||(editObj.type.dropDownList||{}).values||[];_.each(ddl,function(v){v.deleted||$.isBlank(v.id)||editObj._valuesList.push({id:v.id,label:v.description||"",icon:v.icon})}),editObj.flattenValue(),editObj.setFullSize(),editObj.$dom().addClass("blist-combo-wrapper").addClass("combo-container"),editObj.$editor().find(".picklist-combo").combo({ddClass:"table-editor-combo",name:"picklist-combo",values:editObj._valuesList,value:editObj.originalValue?editObj.originalValue:"null",allowFreeEdit:this.allowFreeEdit(),renderFn:renderValue})},$editor:function(){return this._$editor||(this._$editor=$('<div class="blist-table-editor"><div class="picklist-combo"></div></div>')),this._$editor},getSizeElement:function(){return this.$editor().children(":first")},currentValue:function(){var val=this.$editor().find(".picklist-combo").value();return void 0===val||null===val||"null"===val?null:val},focus:function(){this.$dom().find(".picklist-combo").focus()},isValid:function(){if(this.allowFreeEdit())return!0;var curVal=this.currentValue();if(null===curVal)return!0;var found=!1;return this._valuesList&&$.each(this._valuesList,function(i,v){if(v.id==curVal)return found=!0,!1}),found},allowFreeEdit:function(){switch(this.type.name){case"dataset_link":return!0;default:return!1}}})},1676:function(module,exports,__webpack_require__){"use strict";var $,blistComboDefaults;$=jQuery,blistComboDefaults={ddClass:"",name:void 0,renderFn:null,rowRenderFn:null,values:[],value:null,keyName:"id",keyAccProp:"label",allowFreeEdit:!1,freeEditButton:!1,defaultValue:null},$.fn.extend({combo:function(options){return this.each(function(){$(this).is(".blist-combo")||function(options){var $dropdown,$scrollBindings,$this=$(this),values=options.values;$this.data("keyName",options.keyName);var renderFn=options.renderFn||function(_value){this.html(_value.label||_value)},rowRenderFn=options.rowRenderFn||renderFn,defaultValue=options.defaultValue;void 0===defaultValue&&(defaultValue=null);var value=options.value;null==value&&(value=defaultValue);var $valueText,$value=$('<div class="blist-combo-value clearfix"></div>'),$input=$('<input class="hiddenTextField" />');options.allowFreeEdit&&($valueText=$('<input type="text" class="blist-combo-text hide"/>')).attr("name",$(this).attr("id")+"_freeText");var valueManager={name:options.name,get:function(){return options.allowFreeEdit&&$this.data("freeEditOn")?$this.find(".blist-combo-text").val():value},set:function(val){null==(value=val)&&(value=defaultValue),renderValue(),$this.trigger("change")}},valueLookup={};$.each(values,function(i,v){var val=v instanceof String?v:v[options.keyAccProp];if(val){var c=val.charAt(0).toLowerCase();void 0===valueLookup[c]&&(valueLookup[c]=[]),valueLookup[c].push(i)}});var $toggle,getValueIndex=function(){var curVal=valueManager.get(),curI=-1;return $.each(values,function(i,v){if(v[$this.data("keyName")]==curVal||v==curVal)return curI=i,!1}),curI},setValueIndex=function(newI){if(newI>=0&&newI<values.length){var newVal=values[newI];void 0!==newVal&&valueManager.set(newVal[$this.data("keyName")]||newVal)}},dropdownOpen=!1,hideDropdown=function(){dropdownOpen=!1,$dropdown.scrollTop(0),$dropdown.children("li.selected").removeClass("selected"),$dropdown.slideUp(100),$dropdown.remove(),$dropdown=void 0,$this.closest(".blist-combo-wrapper").removeClass("active"),$(document).unbind(".combo"),void 0!==$scrollBindings&&$scrollBindings.unbind("scroll.combo")},showDropdown=function(){if(!$dropdown){$dropdown=$('<ul class="blist-combo-dd '+options.ddClass+'"></ul>'),$("body").append($dropdown);for(var i=0;i<values.length;i++){var $li=$("<li></li>");$dropdown.append($li),rowRenderFn.apply($li,[values[i]])}$dropdown.click(onDropdownClick).mousedown(onDropdownMouseDown).mouseover(onDropdownMouseMove).mousemove(onDropdownMouseMove)}positionDropdown(),dropdownOpen=!0,$dropdown.slideDown(100,function(){sizeDropdownHeight()}),$this.closest(".blist-combo-wrapper").addClass("active"),$(document).bind("mousedown.combo",function(event){if($(event.target).parents().index($this.closest(".blist-combo-wrapper"))<0){hideDropdown();var $inputs=$this.find(":input.hiddenTextField");$inputs.length>0&&$inputs[0].focus()}}),($scrollBindings=$this.parents().add(window)).bind("scroll.combo",function(){positionDropdown(),sizeDropdownHeight()})},positionDropdown=function(){var pos=$this.offset(),layout={left:pos.left,top:pos.top+$this.offsetParent().outerHeight(!0),width:$this.outerWidth()-2};options.adjustDropdownLayout&&options.adjustDropdownLayout(layout),$dropdown.css("left",layout.left),$dropdown.css("top",layout.top),$dropdown.css("width",layout.width)},sizeDropdownHeight=function(){if(null!==$dropdown&&void 0!==$dropdown){var ddTop=$dropdown.offset().top,ddBottom=$dropdown.height()+ddTop,$win=$(window),winHeight=$win.height()+$win.scrollTop();ddBottom>winHeight?$dropdown.css("max-height",Math.max(0,winHeight-ddTop)):$dropdown.css("max-height","")}},onDropdownClick=function(event){setValueIndex($dropdown.children("li").index($(event.target).closest("li"))),hideDropdown(),$this.find(":input.hiddenTextField")[0].focus()},onDropdownMouseDown=function(event){event.stopPropagation()},onDropdownMouseMove=function(event){$.contains($dropdown[0],event.target)&&updateSelectedItem($dropdown.children("li").index($(event.target).closest("li")))},onClick=function(){dropdownOpen?hideDropdown():showDropdown(),$this.find(":input.hiddenTextField")[0].focus(),fixCombo()},getSelectedValueObject=function(){var valueObj;if(null!=value&&""!=value)for(var i=0;i<values.length&&void 0===valueObj;i++){var id=values[i][$this.data("keyName")];void 0===id&&(id=values[i]),id===value&&(valueObj=values[i])}return valueObj},renderValue=function(){var valueObj=getSelectedValueObject();if($value.removeClass().addClass("blist-combo-value"),void 0===valueObj)return options.allowFreeEdit?($this.find(".blist-combo-text").val(value),void($this.closest("#gridSidebar").length<=0&&!$this.data("freeEditOn")?($this.removeClass("blist-combo-empty"),$this.find(".blist-combo-text").val(value),$this.find(".blist-combo-value").text(value)):($this.addClass("blist-combo-empty"),$value.html("&nbsp;")))):($this.addClass("blist-combo-empty"),void $value.html("&nbsp;"));$this.removeClass("blist-combo-empty"),renderFn.apply($value,[valueObj])},updateSelectedItem=function(i){$dropdown.children("li.selected").removeClass("selected");var $li=$dropdown.children("li").eq(i).addClass("selected");if(!($li.length<1)){var ddST=$dropdown.scrollTop(),liT=$li.position().top+ddST,liB=liT+$li.outerHeight(),ddH=$dropdown.outerHeight();liB>ddH+ddST?$dropdown.scrollTop(liB-ddH):liT<ddST&&$dropdown.scrollTop(liT)}},getNextCharItem=function(c,curI){var l=valueLookup[c.toLowerCase()];if(void 0===l)return-1;var newI=l[0];return $.each(l,function(j,i){if(i>curI)return newI=i,!1}),newI},textBlur=function(){var $textEl=$this.find(".blist-combo-text");valueManager.set($textEl.val())},fixCombo=function(){if(options.allowFreeEdit&&!($this.closest("#gridSidebar").length<=0)&&1!=$this.data("freeEditOn")){var $valEl=$this.find(".blist-combo-value");$valEl.find("span").length<=0&&$valEl.html('<SPAN class="icon-filler"></SPAN><SPAN class="label">(Blank)</SPAN>'),$this.css("backgroundPosition","")}},toggleComboText=function(){var $valEl=$this.find(".blist-combo-value"),$textEl=$this.find(".blist-combo-text"),$toggleComboText=$this.parent().find(".toggleComboText");$valEl.is(":visible")?($this.data("comboValueCopy",$this.value()),$this.data("freeEditOn",!0),$this.unbind("click"),$this.removeClass("blist-combo"),$this.closest("#gridSidebar").length<=0&&($textEl.width($textEl.parent().outerWidth()-($textEl.outerWidth()-$textEl.width())),$textEl.height($textEl.parent().outerHeight()-($textEl.outerHeight()-$textEl.height()))),$textEl.unbind("blur",textBlur),$textEl.blur(textBlur),$textEl.removeClass("hide"),"null"!=$this.data("comboValueCopy")&&$textEl.val($this.data("comboValueCopy")),$textEl.show(),$valEl.hide(),$this.css("backgroundPosition","-100px"),$toggleComboText.find("a").text("List"),$this.find("label.error").show(),$textEl.focus()):($this.value($this.data("comboValueCopy")),$this.data("freeEditOn",!1),$this.addClass("blist-combo"),$textEl.hide(),$valEl.show(),$this.closest("#gridSidebar").length<=0&&$this.css("backgroundPosition","right center"),$this.click(onClick),$toggleComboText.find("a").text("Custom"),$this.find("label.error").hide()),dropdownOpen&&hideDropdown(),fixCombo()};$this.html($value),options.allowFreeEdit&&$this.append($valueText),$this.addClass("blist-combo").valueManager(valueManager).click(onClick).append($input).focus(function(){$this.find(":input.hiddenTextField")[0].focus()}).find(":input.hiddenTextField").keydown(function(event){var i,$sel;if(dropdownOpen)switch(event.keyCode){case 27:event.stopPropagation(),hideDropdown();break;case 13:case 32:event.stopPropagation(),setValueIndex($dropdown.children("li").index($dropdown.children("li.selected"))),hideDropdown();break;case 38:event.preventDefault(),$sel=$dropdown.find("li.selected"),(i=$dropdown.children("li").index($sel))<0&&(i=values.length),--i>=0&&updateSelectedItem(i);break;case 40:event.preventDefault(),$sel=$dropdown.find("li.selected"),(i=$dropdown.children("li").index($sel)+1)<values.length&&updateSelectedItem(i);break;default:(event.keyCode>=65&&event.keyCode<=90||event.keyCode>=48&&event.keyCode<=57)&&($sel=$dropdown.find("li.selected"),i=$dropdown.children("li").index($sel),updateSelectedItem(getNextCharItem(String.fromCharCode(event.keyCode),i)))}else if(!$this.data("freeEditOn"))switch(event.keyCode){case 32:if($this.data("freeEditOn"))break;event.stopPropagation(),showDropdown();break;case 38:event.preventDefault(),(i=getValueIndex())>=0&&setValueIndex(i-1);break;case 40:event.preventDefault(),setValueIndex(getValueIndex()+1);break;default:(event.keyCode>=65&&event.keyCode<=90||event.keyCode>=48&&event.keyCode<=57)&&setValueIndex(getNextCharItem(String.fromCharCode(event.keyCode),getValueIndex()))}}).focus(function(){$this.addClass("blist-combo-focused")}).blur(function(){$this.removeClass("blist-combo-focused")}),options.allowFreeEdit&&(options.freeEditButton?(($toggle=$('<ul class="actionButtons toggleComboText" style="position:absolute;top:0px;right:-9em;"><li><a style="cursor:pointer;width:5em;text-align:center;">Custom</a></li></ul>')).find("a").click(toggleComboText),$this.parent().append($toggle)):$this.dblclick(function(event){toggleComboText(event)})),renderValue(),$this.data("comboValueObj",new function(){this.selectedValueObject=function(){return getSelectedValueObject()}})}.apply(this,[$.extend({},blistComboDefaults,options)])})},valueObjectAccessor:function(){return this.data("comboValueObj")}})},1677:function(module,exports,__webpack_require__){"use strict";!function($){var typeMapping={point:"point",multipoint:"multipoint",line:"linestring",multiline:"multilinestring",polygon:"polygon",multipolygon:"multipolygon"};function removeExcessParentheses(item){var parent,child;Array.isArray(item)&&!item.every(_.isNumber)&&item.forEach(removeExcessParentheses,item),1===this.length&&(child=item,(parent=this).splice(0),Array.prototype.push.apply(parent,child))}var wktEditor={toGeoJSON:function(wkt){var parsed=WKT.parse(wkt);return parsed&&parsed.coordinates&&/multipoint/i.test(wkt)&&removeExcessParentheses.call(parsed.coordinates,parsed.coordinates),parsed},toWKT:function(geoJSON){return WKT.stringify(geoJSON)},flattenValue:function(){$.isPlainObject(this.originalValue)&&(this.originalValue=this.toWKT(this.originalValue))},isValid:function(){var type=typeMapping[this.type.name],geoJSON=this.toGeoJSON(this.wktValue());return type&&geoJSON&&geoJSON.type.toLowerCase()===type.toLowerCase()},wktValue:function(){return this.textValue()||""},currentValue:function(){var wktValue=this.wktValue(),geoJSON=this.toGeoJSON(wktValue);return this.isValid()&&geoJSON||wktValue}};$.blistEditor.addEditor("point",wktEditor,"text"),$.blistEditor.addEditor("multipoint",wktEditor,"text"),$.blistEditor.addEditor("line",wktEditor,"text"),$.blistEditor.addEditor("multiline",wktEditor,"text"),$.blistEditor.addEditor("polygon",wktEditor,"text"),$.blistEditor.addEditor("multipolygon",wktEditor,"text")}(jQuery)},1678:function(module,exports,__webpack_require__){"use strict";var $,addressValue,streetValue,cityStateZipValue,latitudeValue,longitudeValue;$=jQuery,addressValue=function(editObj){var addr="{}";_.isString(editObj.originalValue)?addr=editObj.originalValue:$.subKeyDefined(editObj.originalValue,"human_address")&&(addr=editObj.originalValue.human_address);try{return JSON.parse(addr)}catch(e){}return""},streetValue=function(editObj){return addressValue(editObj).address||""},cityStateZipValue=function(editObj){var address=addressValue(editObj);return _.compact([_.compact([address.city,address.state]).join(", "),address.zip]).join(" ")},latitudeValue=function(editObj){return"string"==typeof editObj.originalValue&&"location"==editObj.type.name?editObj.originalValue.split(",")[0].trim():_.isArray(editObj.originalValue)?editObj.originalValue[0]||"":(editObj.originalValue||{}).latitude||""},longitudeValue=function(editObj){if("string"==typeof editObj.originalValue&&"location"==editObj.type.name){var p=editObj.originalValue.split(",");return p.length>1?p[1].trim():""}return _.isArray(editObj.originalValue)?editObj.originalValue[1]||"":(editObj.originalValue||{}).longitude||""},$.blistEditor.addEditor("location",{editorAdded:function(){this._super.apply(this,arguments);var editObj=this;editObj.setFullSize(),editObj.$dom().find(":input.street, :input.city_state_zip, :input.latitude").keydown(function(e){9!=e.keyCode||e.shiftKey||e.stopPropagation()}),editObj.$dom().find(":input.city_state_zip, :input.latitude, :input.longitude").keydown(function(e){9==e.keyCode&&e.shiftKey&&e.stopPropagation()}),editObj.$dom().find(":input.street, :input.city_state_zip").keydown(function(e){(13==e.keyCode&&!e.shiftKey||40==e.keyCode)&&(e.stopPropagation(),$(e.currentTarget).nextAll(":input:first").focus().select())}),editObj.$dom().find(":input.city_state_zip, :input.latitude").keydown(function(e){(13==e.keyCode&&e.shiftKey||38==e.keyCode)&&(e.stopPropagation(),$(e.currentTarget).prevAll(":input:first").focus().select())}),editObj.$dom().find(":input.longitude").keydown(function(e){(13==e.keyCode&&e.shiftKey||38==e.keyCode)&&(e.stopPropagation(),$(e.currentTarget).prevAll(":input.city_state_zip").focus().select())}),editObj.$dom().find(":text.lat_long").keypress(function(){setTimeout(function(){editObj.textModified()},0)})},$editor:function(){return this._$editor||(this._$editor=$('<div class="blist-table-editor type-'+this.type.name+'"><div class="labels street"><span>Street</span></div><input type="text" class="street nonInvalid" value="'+streetValue(this)+'" /><div class="labels city_state_zip"><span>City, State Zip</span></div><input type="text" class="city_state_zip nonInvalid" value="'+cityStateZipValue(this)+'" /><div class="labels lat_long"><span class="latitude">Latitude</span><span class="longitude">Longitude</span></div><input type="text" class="latitude lat_long" value="'+latitudeValue(this)+'" /><input type="text" class="longitude lat_long" value="'+longitudeValue(this)+'" /></div>')),this._$editor},textModified:function(){this.isValid()?this.$dom().removeClass("invalid"):this.$dom().addClass("invalid")},isValid:function(){var latVal=this.$dom().find(":input.latitude").val().trim(),longVal=this.$dom().find(":input.longitude").val().trim();return""===latVal&&""===longVal||!(""===latVal&&""!==longVal||""!==latVal&&""===longVal)&&(latVal=parseFloat(latVal),longVal=parseFloat(longVal),latVal>-90&&latVal<90&&longVal>-180&&longVal<180)},currentValue:function(){var newLat=this.$dom().find(":input.latitude").val().trim(),newLong=this.$dom().find(":input.longitude").val().trim(),latLongChanged=newLat!==latitudeValue(this)||newLong!==longitudeValue(this);if(!this.isValid())return newLat+", "+newLong;var newStreet=this.$dom().find(":input.street").val().trim(),newCSZ=this.$dom().find(":input.city_state_zip").val().trim(),addressChanged=newStreet!==streetValue(this)||newCSZ!==cityStateZipValue(this);if(!addressChanged&&!latLongChanged)return this.originalValue;if(""===newStreet&&""===newCSZ&&""===newLat&&""===newLong)return null;var obj={};if(""!==newLat&&(obj.latitude=parseFloat(newLat)),""!==newLong&&(obj.longitude=parseFloat(newLong)),!addressChanged)return obj.human_address=(this.originalValue||{}).human_address||null,obj;var address={};newStreet=$.htmlEscape(newStreet),newCSZ=$.htmlEscape(newCSZ),""!==newStreet&&(address.address=newStreet);var zipResult=newCSZ.match(/(?:^|\s+)(\d{5}(\-\d{4})?)\s*$/);!_.isNull(zipResult)&&zipResult.length>1&&(address.zip=zipResult[1],newCSZ=newCSZ.slice(0,newCSZ.length-zipResult[0].length));var stateResult=newCSZ.match(/,(\s+)([\w.\s]+)$/);if((_.isNull(stateResult)||stateResult.length<3)&&(stateResult=newCSZ.match(/(\s+|^)(\w{2})$/)),!_.isNull(stateResult)&&stateResult.length>1)address.state=stateResult[2].trim(),newCSZ=newCSZ.slice(0,newCSZ.length-stateResult[0].length);else{var parts=newCSZ.split(/\s+/);parts.length>1&&(address.state=parts.pop()),parts.length>1&&parts[parts.length-1].match(/new|north|south|west|rhode/i)&&(address.state=parts.pop()+" "+address.state),newCSZ=parts.join(" ")}return""!==newCSZ&&(address.city=newCSZ),obj.human_address=JSON.stringify(address),"location"==this.type.name?obj:obj[this.type.name]},querySize:function(){return{width:Math.min(300,Math.max(160,streetValue(this).visualLength(this.$editor().css("font-size")),cityStateZipValue(this).visualLength(this.$editor().css("font-size")))),height:this.$editor().find(".labels.street").outerHeight(!0)+this.$editor().find(":input.street").outerHeight(!0)+this.$editor().find(".labels.city_state_zip").outerHeight(!0)+this.$editor().find(":input.city_state_zip").outerHeight(!0)+this.$editor().find(".labels.lat_long").outerHeight(!0)+this.$editor().find(":input.lat_long").outerHeight(!0)}}})},1679:function(module,exports,__webpack_require__){"use strict";var $,renderTypeValue;$=jQuery,renderTypeValue=function(value){var $row=$(this),$spanIcon=$('<span class="icon"></span>'),$spanLabel=$('<span class="label"></span>').html(value.label);$row.addClass(value.id).empty().append($spanIcon).append($spanLabel)},$.blistEditor.addEditor("phone",{editorAdded:function(){this._super.apply(this,arguments);var typeValues=_.map(this.type.subColumns.phone_type.dropDownList.values,function(v){return{id:v.id,label:v.description}});typeValues.unshift({id:"null",label:"(Blank)"}),this.setFullSize(),this.$dom().addClass("combo-container"),this.$editor().find(".type-combo").combo({ddClass:"table-editor-combo",name:"type-combo",values:typeValues,value:function(editObj){var v=editObj.originalValue,ret="";return v instanceof Object&&(ret=v[editObj.type.subColumns.phone_type.name]),ret||""}(this)||"null",renderFn:renderTypeValue,adjustDropdownLayout:this.inContainer()?function(layout){layout.top+=4,layout.left-=2,layout.width+=4}:null}),this.$dom().find(":text.phoneNumber").keydown(function(e){9!=e.keyCode||e.shiftKey||e.stopPropagation()}),this.$dom().find(".type-combo").keydown(function(e){9==e.keyCode&&e.shiftKey&&e.stopPropagation()})},$editor:function(){if(!this._$editor){var value=$.htmlEscape(this.newValue||(v=(editObj=this).originalValue,ret=v||"",v instanceof Object&&(ret=v[editObj.type.subColumns.phone_number.name]),ret||""));this._$editor=$('<div class="blist-table-editor type-'+this.type.name+'"><input type="text" class="phoneNumber" value="'+value+'" /><div class="blist-combo-wrapper"><div class="type-combo"></div></div></div>')}var editObj,v,ret;return this._$editor},currentNumberValue:function(){var newNum=this.$editor().find(":text.phoneNumber").val();return""===newNum||void 0===newNum?null:newNum},currentValue:function(){var newNum=this.currentNumberValue(),newType=this.$editor().find(".type-combo").value();if(newType="null"==newType||void 0===newType?null:newType,null===newNum&&null===newType)return null;var ret={};return ret[this.type.subColumns.phone_number.name]=newNum,ret[this.type.subColumns.phone_type.name]=newType,ret},setSize:function(width,height){var $outer=this.$dom(),$sz=$(this.getSizeElement()),outerWidth=width+($outer.width()-$sz.width()),outerHeight=height+($outer.height()-$sz.height());$sz.css({width:width+"px",height:height+"px"}),$outer.width(outerWidth).height(outerHeight);var $input=this.$dom().find(":text.phoneNumber"),padding=$input.innerHeight()-$input.height();$input.height(height-padding)},querySize:function(){return{width:240}}})},1680:function(module,exports,__webpack_require__){"use strict";var $,hrefValue,descValue;$=jQuery,hrefValue=function(editObj){var v=editObj.originalValue,ret=v||"";return v instanceof Object&&(ret=v[editObj.type.subColumns.url.name]),ret||""},descValue=function(editObj){var v=editObj.originalValue,ret="";return v instanceof Object&&(ret=v[editObj.type.subColumns.description.name]),ret||""},$.blistEditor.addEditor("url",{editorAdded:function(){this._super.apply(this,arguments);var editObj=this;editObj.setFullSize(),editObj.$dom().find(":text.href").keydown(function(e){9!=e.keyCode||e.shiftKey||e.stopPropagation()}),editObj.$dom().find(":text.description").keydown(function(e){9==e.keyCode&&e.shiftKey&&e.stopPropagation()}),editObj.$dom().find(":text.href").keypress(function(){setTimeout(function(){editObj.textModified()},0)})},$editor:function(){if(!this._$editor){var hrefVal=$.htmlEscape(this.newValue||hrefValue(this));this._$editor=$('<div class="blist-table-editor type-'+(this.type.cls||this.type.name)+'"><div class="labels"><span class="href">URL</span><span class="description">Description</span></div><input type="text" class="href" value="'+hrefVal+'" /><input type="text" class="description" value="'+$.htmlEscape(descValue(this))+'" /></div>')}return this._$editor},textModified:function(){this.isValid()?this.$dom().removeClass("invalid"):this.$dom().addClass("invalid")},isValid:function(){var curVal=this.urlValue();return!$.isBlank(curVal)&&$.subKeyDefined(this.format,"baseUrl")&&(curVal=this.format.baseUrl+curVal),null===curVal||curVal.match(blist.util.patterns.core.urlValidator)},urlValue:function(){var newHref=this.$editor().find(":text.href:not(.prompt)").val();return""===newHref||void 0===newHref?null:newHref},currentValue:function(){var newHref=this.urlValue();if(!this.isValid())return newHref;var newDesc=this.$editor().find(":text.description:not(.prompt)").val();if(newDesc=""===newDesc||void 0===newDesc?null:newDesc,null===newHref&&null===newDesc)return null;var ret={};return _.isUndefined(this.type.subColumns)?"url"==this.type.name?ret[this.type.name]=newHref:"description"==this.type.name&&(ret[this.type.name]=newDesc):(ret[this.type.subColumns.url.name]=newHref,ret[this.type.subColumns.description.name]=newDesc),ret},querySize:function(){return{width:Math.max(120,hrefValue(this).visualLength(this.$editor().css("font-size")))+Math.max(120,descValue(this).visualLength(this.$editor().css("font-size"))),height:this.$editor().find(".labels").outerHeight(!0)+this.$editor().find(":input").outerHeight(!0)}}})},1681:function(module,exports,__webpack_require__){"use strict";jQuery.blistEditor.addEditor("email",{isValid:function(){var curVal=this.currentValue();return null===curVal||curVal.match(blist.util.patterns.core.emailValidator)}},"text")},1682:function(module,exports,__webpack_require__){"use strict";jQuery.blistEditor.addEditor("money",{currentValue:function(){var newVal=this.textValue(),adjVal=newVal&&"$"==newVal.charAt(0)?newVal.slice(1):newVal;return(adjVal=blist.util.parseHumaneNumber(adjVal))==parseFloat(adjVal)?parseFloat(adjVal):newVal}},"number")},1683:function(module,exports,__webpack_require__){"use strict";jQuery.blistEditor.addEditor("percent",{currentValue:function(){var newVal=this.textValue(),adjVal=newVal&&"%"==newVal.charAt(newVal.length-1)?newVal.slice(0,newVal.length-1):newVal;return adjVal==parseFloat(adjVal)?parseFloat(adjVal):newVal}},"number")},1684:function(module,exports,__webpack_require__){"use strict";var $;($=jQuery).blistEditor.addEditor("number",{editorAdded:function(){this._$editor&&_.isString(this.format.mask)&&this._$editor.find("input").mask(this.format.mask),this._super.apply(this,arguments)},originalTextValue:function(){var v=this._super.apply(this,arguments).toString();return $.isBlank(this.format.decimalSeparator)||"."==this.format.decimalSeparator||(v=v.replace(".",this.format.decimalSeparator)),v},textValue:function(){var v=this._super.apply(this,arguments);return $.isBlank(v)||$.isBlank(this.format.decimalSeparator)||"."==this.format.decimalSeparator||(v=(v=v.replace(/\./g,"")).replace(this.format.decimalSeparator,".")),v},numberTextValue:function(){if(this._$editor&&_.isString(this.format.mask)){var $input=this._$editor.find("input");return _.isUndefined($input.data($.mask.dataName))?this.textValue():$input.mask()}return this.textValue()},isValid:function(){var curVal=this.numberTextValue();return null===curVal||curVal==parseFloat(curVal)},currentValue:function(){var curVal=this.numberTextValue();return curVal==parseFloat(curVal)?parseFloat(curVal):curVal}},"text")},1685:function(module,exports){(function(){var $,pasteEventName,iPhone;$=jQuery,pasteEventName=($.browser.msie?"paste":"input")+".mask",iPhone=void 0!=window.orientation,$.mask={definitions:{"#":"[0-9]"},dataName:"rawMaskFn"},$.fn.extend({caret:function(begin,end){if(0!=this.length){if("number"==typeof begin)return end="number"==typeof end?end:begin,this.each(function(){if(this.setSelectionRange)this.setSelectionRange(begin,end);else if(this.createTextRange){var range=this.createTextRange();range.collapse(!0),range.moveEnd("character",end),range.moveStart("character",begin),range.select()}});if(this[0].setSelectionRange)begin=this[0].selectionStart,end=this[0].selectionEnd;else if(document.selection&&document.selection.createRange){var range=document.selection.createRange();begin=0-range.duplicate().moveStart("character",-1e5),end=begin+range.text.length}return{begin:begin,end:end}}},unmask:function(){return this.trigger("unmask")},mask:function(mask,settings){if(!mask&&this.length>0)return $(this[0]).data($.mask.dataName)();settings=$.extend({placeholder:"_",completed:null},settings);var defs=$.mask.definitions,tests=[],partialPosition=mask.length,firstNonMaskPos=null,len=mask.length;return $.each(mask.split(""),function(i,c){"?"==c?(len--,partialPosition=i):defs[c]?(tests.push(new RegExp(defs[c])),null==firstNonMaskPos&&(firstNonMaskPos=tests.length-1)):tests.push(null)}),this.trigger("unmask").each(function(){var input=$(this),buffer=$.map(mask.split(""),function(c,i){if("?"!=c)return defs[c]?settings.placeholder:c}),focusText=input.val();function seekNext(pos){for(;++pos<=len&&!tests[pos];);return pos}function shiftL(begin,end){if(!(begin<0)){for(var i=begin,j=seekNext(end);i<len;i++)if(tests[i]){if(!(j<len&&tests[i].test(buffer[j])))break;buffer[i]=buffer[j],buffer[j]=settings.placeholder,j=seekNext(j)}writeBuffer(),input.caret(Math.max(firstNonMaskPos,begin))}}function clearBuffer(start,end){for(var i=start;i<end&&i<len;i++)tests[i]&&(buffer[i]=settings.placeholder)}function writeBuffer(){return input.val(buffer.join("")).val()}function checkVal(allow){for(var test=input.val(),lastMatch=-1,i=0,pos=0;i<len;i++)if(tests[i]){for(buffer[i]=settings.placeholder;pos++<test.length;){var c=test.charAt(pos-1);if(tests[i].test(c)){buffer[i]=c,lastMatch=i;break}}if(pos>test.length)break}else buffer[i]==test.charAt(pos)&&i!=partialPosition&&(pos++,lastMatch=i);return!allow&&lastMatch+1<partialPosition?(input.val(""),clearBuffer(0,len)):(allow||lastMatch+1>=partialPosition)&&(writeBuffer(),allow||input.val(input.val().substring(0,lastMatch+1))),partialPosition?i:firstNonMaskPos}input.data($.mask.dataName,function(){return $.map(buffer,function(c,i){return tests[i]&&c!=settings.placeholder?c:null}).join("")}),input.attr("readonly")||input.one("unmask",function(){input.unbind(".mask").removeData($.mask.dataName)}).bind("focus.mask",function(){focusText=input.val();var pos=checkVal(!0);writeBuffer();var moveCaret=function(){pos==mask.length?input.caret(0,pos):input.caret(pos)};($.browser.msie?moveCaret:function(){setTimeout(moveCaret,0)})()}).bind("blur.mask",function(){checkVal(!0),input.val()!=focusText&&input.change()}).bind("keydown.mask",function(e){var k=e.which;if(8==k||46==k||iPhone&&127==k){var pos=input.caret(),begin=pos.begin,end=pos.end;return end-begin==0&&(begin=46!=k?function(pos){for(;--pos>=0&&!tests[pos];);return pos}(begin):end=seekNext(begin-1),end=46==k?seekNext(end):end),clearBuffer(begin,end),shiftL(begin,end-1),!1}}).bind("keypress.mask",function(e){var k=e.which,pos=input.caret();if(e.ctrlKey||e.altKey||e.metaKey||k<32)return!0;if(k){pos.end-pos.begin!=0&&(clearBuffer(pos.begin,pos.end),shiftL(pos.begin,pos.end-1));var p=seekNext(pos.begin-1);if(p<len){var c=String.fromCharCode(k);if(tests[p].test(c)){!function(pos){for(var i=pos,c=settings.placeholder;i<len;i++)if(tests[i]){var j=seekNext(i),t=buffer[i];if(buffer[i]=c,!(j<len&&tests[j].test(t)))break;c=t}}(p),buffer[p]=c,writeBuffer();var next=seekNext(p);input.caret(next),settings.completed&&next>=len&&settings.completed.call(input)}}return!1}}).bind(pasteEventName,function(){setTimeout(function(){input.caret(checkVal(!0))},0)}),checkVal(!0)})}})}).call(window)},1686:function(module,exports,__webpack_require__){"use strict";var $;($=jQuery).blistEditor.addEditor("date",{editorAdded:function(){this._super.apply(this,arguments);var editObj=this;editObj.textValidationHookup();var curDate=editObj._origDate||new Date;editObj.$dom().find(":input").DatePicker({current:curDate,date:curDate.format("y-m-d"),locale:$.DatePickerLocaleOptions,onShow:function(calDom){$(calDom).mousedown(function(e){e.stopPropagation()})},onChange:function(f,newD){editObj.$dom().find(":input").val(newD.format(editObj._format)),editObj.textModified(),editObj.focus()},starts:0,eventName:"focus"})},originalTextValue:function(){this.flattenValue();var formatName=this.format.view||"date_time";return this._format=this.type.formats[formatName]||this.type.formats.date_time,"number"==typeof this.originalValue?this._origDate=new Date(1e3*this.originalValue):$.isBlank(this.originalValue)||($.isBlank(this.type.stringParse)?this._origDate=Date.parse(this.originalValue):this._origDate=Date.parseExact(this.originalValue,this.type.stringParse)),_.isDate(this._origDate)?this._origDate.format(this._format):this.originalValue||""},finishEdit:function(){this._super(),this.$dom().find(":input").DatePickerRemove()},currentValue:function(){var t=this.textValue();if(null===t)return null;var d=Date.parse(t);if(!$.isBlank(d)){try{(this.format.view||"").startsWith("date_dmy")&&!$.isBlank(t.match(/\d{1,2}\/\d{1,2}\//))&&d.set({day:d.getMonth()+1,month:d.getDate()-1})}catch(e){}d=$.isBlank(this.type.stringFormat)?Math.floor(d.valueOf()/1e3):d.toString(this.type.stringFormat)}return d||t},isValid:function(){var t=this.textValue();return null===t||null!==Date.parse(t)}},"text")},1687:function(module,exports,__webpack_require__){"use strict";var $;($=jQuery).blistEditor.addEditor("text",{editorAdded:function(){this._super.apply(this,arguments),this.textValidationHookup()},$editor:function(){if(!this._$editor){var value=$.htmlEscape(this.newValue||this.originalTextValue()),align=this.format.align?" align-"+this.format.align:"";this._$editor=$('<div class="blist-table-editor type-'+this.type.name+'"><input type="text" class="'+align+'" value="'+value+'" /></div>')}return this._$editor},getSizeElement:function(){return this.$editor()[0].childNodes[0]},originalTextValue:function(){return this.flattenValue(),this.originalValue||""},textValidationHookup:function(){var editObj=this;editObj.$dom().find(":input").keypress(function(){setTimeout(function(){editObj.textModified()},0)})},querySize:function(){var width=((this.originalValue||"")+"").visualLength(this.$editor().css("font-size"));return{width:width+=2}},textValue:function(){var newVal=this.$editor().find(":text").val();return""===newVal?null:newVal},currentValue:function(){return this.textValue()},textModified:function(){this.isValid()?this.$dom().removeClass("invalid"):this.$dom().addClass("invalid")}})},1688:function(module,exports,__webpack_require__){"use strict";!function($){$.blistEditor={addEditor:function(type,editor,dependsOn){if($.isBlank(blist.datatypes.interfaceTypes[type]))throw"No such type exists: "+type;blist.datatypes.interfaceTypes[type].editor=type,$.Control.registerMixin(type,editor,{},"blistEditor",dependsOn)}},$.Control.extend("blistEditor",{_init:function(){var editObj=this;editObj._super.apply(this,arguments);var $domObj=editObj.$dom();$domObj.keydown(function(e){handleKeyDown(editObj,e)}),editObj.row=editObj.settings.row,editObj.type=editObj.settings.type,editObj.format=editObj.settings.format||{},editObj.customProperties=editObj.settings.customProperties||{},editObj.originalValue=editObj.settings.value,editObj.newValue=this.settings.newValue,editObj._uid||(editObj._uid=_.uniqueId());var $editor=editObj.$editor();$domObj.append($editor),editObj.isValid()||$domObj.addClass("invalid"),editObj.editorAdded(),$(document).bind("mousedown.blistEditor_"+editObj._uid,function(e){docMouseDown(editObj,e)})},_getMixins:function(options){return[(options.editorInterface||options.type.interfaceType).editor]},editorAdded:function(){},finishEdit:function(){this._uid&&($(document).unbind(".blistEditor_"+this._uid),this._uid=null),delete this._$externalEditor,this.$dom().trigger("edit-finished")},flattenValue:function(){$.isPlainObject(this.originalValue)&&(this.originalValue=_.values(this.originalValue)[0])},initComplete:function(showCallback){showCallback()},registerExternalEditor:function($extEditor){this._$externalEditor=$extEditor},currentValue:function(){return this.originalValue},focus:function(){var $text=this.$editor().find(":text:first");$text.focus(),null!=this.newValue?(delete this.newValue,setCursorPosition($text[0])):$text.select()},setFullSize:function(){this.$dom().addClass("full-size")},adjustSize:function(minWidth,minHeight,maxWidth,maxHeight){var size=this.querySize();if(size)var width=size.width,height=size.height;width||(width=0),height||(height=0);var $sz=$(this.getSizeElement()),outer=this.$dom()[0];minWidth-=outer.offsetWidth-$sz.width(),minHeight-=outer.offsetHeight-$sz.height(),width<minWidth&&(width=minWidth),height<minHeight&&(height=minHeight),maxWidth=Math.floor(maxWidth||1/0),maxHeight=Math.floor(maxHeight||1/0),width>maxWidth&&(width=maxWidth),height>maxHeight&&(height=maxHeight),this.setSize(width,height)},getSizeElement:function(){return this.$editor()[0]},setSize:function(width,height){var $outer=this.$dom(),$sz=$(this.getSizeElement()),outerWidth=width+($outer.width()-$sz.width()),outerHeight=height+($outer.height()-$sz.height());width==this._prevWidth&&height==this._prevHeight||(this._prevWidth=width,this._prevHeight=height,$sz.css({width:width+"px",height:height+"px"}),$outer.width(outerWidth).height(outerHeight))},querySize:function(){return{}},isValid:function(){return!0},actionStatesChanged:function(){this.$dom().trigger("action-state-change")},getActionStates:function(){return{}},action:function(){return!1},inContainer:function(){return!(!this.$editor()||!this.$editor().closest(".blist-table-edit-container").length)},supportsFormatting:function(){return!1},changed:function(){this.$dom().trigger("editor-change")}});var handleKeyDown=function(editObj,event){var save=!0;switch(event.keyCode){case 9:case 13:case 33:case 34:case 113:break;case 27:save=!1;break;case 38:case 40:if($(event.target).is(":text")&&$(event.target).closest(".blist-combo").length<1)break;return;case 37:if($(event.target).is(":text")&&!getCursorPosition(event.target)){var $prev=$(event.target).prev(":text");if($prev.length)return $prev.focus(),setCursorPosition($prev[0]),void event.preventDefault();break}return;case 39:if($(event.target).is(":text")&&getCursorPosition(event.target)==$(event.target).val().length){var $next=$(event.target).next(":text");if($next.length)return $next.focus(),setCursorPosition($next[0],0),void event.preventDefault();break}return;default:return}event.stopPropagation(),editObj.$dom().trigger("edit_end",[save,event])},docMouseDown=function(editObj,event){$(event.target).parents().andSelf().index(editObj.$dom().add(editObj._$externalEditor))<0&&"uploadFileInput"!=$(event.target).attr("name")&&editObj.$dom().trigger("edit_end",[!0,event])},setCursorPosition=function(text,pos){if(null==pos&&(pos=$(text).val().length),text.createTextRange){var range=text.createTextRange();range.collapse(!0),range.moveEnd("character",pos),range.moveStart("character",pos),range.select()}else text.setSelectionRange(pos,pos)},getCursorPosition=function(text){if(text.createTextRange){var range=text.createTextRange();return range.text.length?-1:(range.moveStart(0),range.text.length)}return text.selectionStart!=text.selectionEnd?-1:text.selectionStart}}(jQuery)},1689:function(module,exports,__webpack_require__){__webpack_require__(1688),__webpack_require__(1687),__webpack_require__(763),__webpack_require__(1686),__webpack_require__(1685),__webpack_require__(1684),__webpack_require__(1683),__webpack_require__(1682),__webpack_require__(1681),__webpack_require__(1680),__webpack_require__(1679),__webpack_require__(1678),__webpack_require__(1677),__webpack_require__(1676),__webpack_require__(1675),__webpack_require__(1674),__webpack_require__(1673),__webpack_require__(1672),__webpack_require__(1671),__webpack_require__(113),__webpack_require__(762),__webpack_require__(1670),__webpack_require__(1669),module.exports=__webpack_require__(1668)},5:function(module,exports){module.exports=jQuery}});
//# sourceMappingURL=shared-editors.js.map